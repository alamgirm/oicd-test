import {
  __commonJS
} from "./chunk.5OSL2VXB.js";
import {
  __name
} from "./chunk.KSB52TMW.js";

// node_modules/oidc-client/lib/oidc-client.min.js
var require_oidc_client_min = __commonJS((exports, module) => {
  !(/* @__PURE__ */ __name(function webpackUniversalModuleDefinition(e, t) {
    if (typeof exports == "object" && typeof module == "object")
      module.exports = t();
    else if (typeof define == "function" && define.amd)
      define([], t);
    else {
      var r = t();
      for (var n in r)
        (typeof exports == "object" ? exports : e)[n] = r[n];
    }
  }, "webpackUniversalModuleDefinition"))(window, function() {
    return function(e) {
      var t = {};
      function __webpack_require__(r) {
        if (t[r])
          return t[r].exports;
        var n = t[r] = {i: r, l: false, exports: {}};
        return e[r].call(n.exports, n, n.exports, __webpack_require__), n.l = true, n.exports;
      }
      __name(__webpack_require__, "__webpack_require__");
      return __webpack_require__.m = e, __webpack_require__.c = t, __webpack_require__.d = function(e2, t2, r) {
        __webpack_require__.o(e2, t2) || Object.defineProperty(e2, t2, {enumerable: true, get: r});
      }, __webpack_require__.r = function(e2) {
        typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(e2, Symbol.toStringTag, {value: "Module"}), Object.defineProperty(e2, "__esModule", {value: true});
      }, __webpack_require__.t = function(e2, t2) {
        if (1 & t2 && (e2 = __webpack_require__(e2)), 8 & t2)
          return e2;
        if (4 & t2 && typeof e2 == "object" && e2 && e2.__esModule)
          return e2;
        var r = Object.create(null);
        if (__webpack_require__.r(r), Object.defineProperty(r, "default", {enumerable: true, value: e2}), 2 & t2 && typeof e2 != "string")
          for (var n in e2)
            __webpack_require__.d(r, n, function(t3) {
              return e2[t3];
            }.bind(null, n));
        return r;
      }, __webpack_require__.n = function(e2) {
        var t2 = e2 && e2.__esModule ? /* @__PURE__ */ __name(function getDefault() {
          return e2.default;
        }, "getDefault") : /* @__PURE__ */ __name(function getModuleExports() {
          return e2;
        }, "getModuleExports");
        return __webpack_require__.d(t2, "a", t2), t2;
      }, __webpack_require__.o = function(e2, t2) {
        return Object.prototype.hasOwnProperty.call(e2, t2);
      }, __webpack_require__.p = "", __webpack_require__(__webpack_require__.s = 47);
    }([function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true});
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }();
      var i = {debug: /* @__PURE__ */ __name(function debug() {
      }, "debug"), info: /* @__PURE__ */ __name(function info() {
      }, "info"), warn: /* @__PURE__ */ __name(function warn() {
      }, "warn"), error: /* @__PURE__ */ __name(function error() {
      }, "error")}, o = void 0, s = void 0;
      (t.Log = function() {
        function Log() {
          !(/* @__PURE__ */ __name(function _classCallCheck(e2, t2) {
            if (!(e2 instanceof t2))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, Log);
        }
        __name(Log, "Log");
        return Log.reset = /* @__PURE__ */ __name(function reset() {
          s = 3, o = i;
        }, "reset"), Log.debug = /* @__PURE__ */ __name(function debug() {
          if (s >= 4) {
            for (var e2 = arguments.length, t2 = Array(e2), r2 = 0; r2 < e2; r2++)
              t2[r2] = arguments[r2];
            o.debug.apply(o, Array.from(t2));
          }
        }, "debug"), Log.info = /* @__PURE__ */ __name(function info() {
          if (s >= 3) {
            for (var e2 = arguments.length, t2 = Array(e2), r2 = 0; r2 < e2; r2++)
              t2[r2] = arguments[r2];
            o.info.apply(o, Array.from(t2));
          }
        }, "info"), Log.warn = /* @__PURE__ */ __name(function warn() {
          if (s >= 2) {
            for (var e2 = arguments.length, t2 = Array(e2), r2 = 0; r2 < e2; r2++)
              t2[r2] = arguments[r2];
            o.warn.apply(o, Array.from(t2));
          }
        }, "warn"), Log.error = /* @__PURE__ */ __name(function error() {
          if (s >= 1) {
            for (var e2 = arguments.length, t2 = Array(e2), r2 = 0; r2 < e2; r2++)
              t2[r2] = arguments[r2];
            o.error.apply(o, Array.from(t2));
          }
        }, "error"), n(Log, null, [{key: "NONE", get: /* @__PURE__ */ __name(function get() {
          return 0;
        }, "get")}, {key: "ERROR", get: /* @__PURE__ */ __name(function get() {
          return 1;
        }, "get")}, {key: "WARN", get: /* @__PURE__ */ __name(function get() {
          return 2;
        }, "get")}, {key: "INFO", get: /* @__PURE__ */ __name(function get() {
          return 3;
        }, "get")}, {key: "DEBUG", get: /* @__PURE__ */ __name(function get() {
          return 4;
        }, "get")}, {key: "level", get: /* @__PURE__ */ __name(function get() {
          return s;
        }, "get"), set: /* @__PURE__ */ __name(function set(e2) {
          if (!(0 <= e2 && e2 <= 4))
            throw new Error("Invalid log level");
          s = e2;
        }, "set")}, {key: "logger", get: /* @__PURE__ */ __name(function get() {
          return o;
        }, "get"), set: /* @__PURE__ */ __name(function set(e2) {
          if (!e2.debug && e2.info && (e2.debug = e2.info), !(e2.debug && e2.info && e2.warn && e2.error))
            throw new Error("Invalid logger");
          o = e2;
        }, "set")}]), Log;
      }()).reset();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true});
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }();
      var i = {setInterval: function(e2) {
        function setInterval2(t2, r2) {
          return e2.apply(this, arguments);
        }
        __name(setInterval2, "setInterval");
        return setInterval2.toString = function() {
          return e2.toString();
        }, setInterval2;
      }(function(e2, t2) {
        return setInterval(e2, t2);
      }), clearInterval: function(e2) {
        function clearInterval2(t2) {
          return e2.apply(this, arguments);
        }
        __name(clearInterval2, "clearInterval");
        return clearInterval2.toString = function() {
          return e2.toString();
        }, clearInterval2;
      }(function(e2) {
        return clearInterval(e2);
      })}, o = false, s = null;
      t.Global = function() {
        function Global() {
          !(/* @__PURE__ */ __name(function _classCallCheck(e2, t2) {
            if (!(e2 instanceof t2))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, Global);
        }
        __name(Global, "Global");
        return Global._testing = /* @__PURE__ */ __name(function _testing() {
          o = true;
        }, "_testing"), Global.setXMLHttpRequest = /* @__PURE__ */ __name(function setXMLHttpRequest(e2) {
          s = e2;
        }, "setXMLHttpRequest"), n(Global, null, [{key: "location", get: /* @__PURE__ */ __name(function get() {
          if (!o)
            return location;
        }, "get")}, {key: "localStorage", get: /* @__PURE__ */ __name(function get() {
          if (!o && typeof window != "undefined")
            return localStorage;
        }, "get")}, {key: "sessionStorage", get: /* @__PURE__ */ __name(function get() {
          if (!o && typeof window != "undefined")
            return sessionStorage;
        }, "get")}, {key: "XMLHttpRequest", get: /* @__PURE__ */ __name(function get() {
          if (!o && typeof window != "undefined")
            return s || XMLHttpRequest;
        }, "get")}, {key: "timer", get: /* @__PURE__ */ __name(function get() {
          if (!o)
            return i;
        }, "get")}]), Global;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.MetadataService = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(0), o = r(6);
      t.MetadataService = function() {
        function MetadataService(e2) {
          var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : o.JsonService;
          if ((/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, MetadataService), !e2)
            throw i.Log.error("MetadataService: No settings passed to MetadataService"), new Error("settings");
          this._settings = e2, this._jsonService = new t2(["application/jwk-set+json"]);
        }
        __name(MetadataService, "MetadataService");
        return MetadataService.prototype.getMetadata = /* @__PURE__ */ __name(function getMetadata() {
          var e2 = this;
          return this._settings.metadata ? (i.Log.debug("MetadataService.getMetadata: Returning metadata from settings"), Promise.resolve(this._settings.metadata)) : this.metadataUrl ? (i.Log.debug("MetadataService.getMetadata: getting metadata from", this.metadataUrl), this._jsonService.getJson(this.metadataUrl).then(function(t2) {
            return i.Log.debug("MetadataService.getMetadata: json received"), e2._settings.metadata = t2, t2;
          })) : (i.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"), Promise.reject(new Error("No authority or metadataUrl configured on settings")));
        }, "getMetadata"), MetadataService.prototype.getIssuer = /* @__PURE__ */ __name(function getIssuer() {
          return this._getMetadataProperty("issuer");
        }, "getIssuer"), MetadataService.prototype.getAuthorizationEndpoint = /* @__PURE__ */ __name(function getAuthorizationEndpoint() {
          return this._getMetadataProperty("authorization_endpoint");
        }, "getAuthorizationEndpoint"), MetadataService.prototype.getUserInfoEndpoint = /* @__PURE__ */ __name(function getUserInfoEndpoint() {
          return this._getMetadataProperty("userinfo_endpoint");
        }, "getUserInfoEndpoint"), MetadataService.prototype.getTokenEndpoint = /* @__PURE__ */ __name(function getTokenEndpoint() {
          var e2 = !(arguments.length > 0 && arguments[0] !== void 0) || arguments[0];
          return this._getMetadataProperty("token_endpoint", e2);
        }, "getTokenEndpoint"), MetadataService.prototype.getCheckSessionIframe = /* @__PURE__ */ __name(function getCheckSessionIframe() {
          return this._getMetadataProperty("check_session_iframe", true);
        }, "getCheckSessionIframe"), MetadataService.prototype.getEndSessionEndpoint = /* @__PURE__ */ __name(function getEndSessionEndpoint() {
          return this._getMetadataProperty("end_session_endpoint", true);
        }, "getEndSessionEndpoint"), MetadataService.prototype.getRevocationEndpoint = /* @__PURE__ */ __name(function getRevocationEndpoint() {
          return this._getMetadataProperty("revocation_endpoint", true);
        }, "getRevocationEndpoint"), MetadataService.prototype.getKeysEndpoint = /* @__PURE__ */ __name(function getKeysEndpoint() {
          return this._getMetadataProperty("jwks_uri", true);
        }, "getKeysEndpoint"), MetadataService.prototype._getMetadataProperty = /* @__PURE__ */ __name(function _getMetadataProperty(e2) {
          var t2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
          return i.Log.debug("MetadataService.getMetadataProperty for: " + e2), this.getMetadata().then(function(r2) {
            if (i.Log.debug("MetadataService.getMetadataProperty: metadata recieved"), r2[e2] === void 0) {
              if (t2 === true)
                return void i.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property " + e2);
              throw i.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property " + e2), new Error("Metadata does not contain property " + e2);
            }
            return r2[e2];
          });
        }, "_getMetadataProperty"), MetadataService.prototype.getSigningKeys = /* @__PURE__ */ __name(function getSigningKeys() {
          var e2 = this;
          return this._settings.signingKeys ? (i.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"), Promise.resolve(this._settings.signingKeys)) : this._getMetadataProperty("jwks_uri").then(function(t2) {
            return i.Log.debug("MetadataService.getSigningKeys: jwks_uri received", t2), e2._jsonService.getJson(t2).then(function(t3) {
              if (i.Log.debug("MetadataService.getSigningKeys: key set received", t3), !t3.keys)
                throw i.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"), new Error("Missing keys on keyset");
              return e2._settings.signingKeys = t3.keys, e2._settings.signingKeys;
            });
          });
        }, "getSigningKeys"), n(MetadataService, [{key: "metadataUrl", get: /* @__PURE__ */ __name(function get() {
          return this._metadataUrl || (this._settings.metadataUrl ? this._metadataUrl = this._settings.metadataUrl : (this._metadataUrl = this._settings.authority, this._metadataUrl && this._metadataUrl.indexOf(".well-known/openid-configuration") < 0 && (this._metadataUrl[this._metadataUrl.length - 1] !== "/" && (this._metadataUrl += "/"), this._metadataUrl += ".well-known/openid-configuration"))), this._metadataUrl;
        }, "get")}]), MetadataService;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.UrlUtility = void 0;
      var n = r(0), i = r(1);
      t.UrlUtility = function() {
        function UrlUtility() {
          !(/* @__PURE__ */ __name(function _classCallCheck(e2, t2) {
            if (!(e2 instanceof t2))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, UrlUtility);
        }
        __name(UrlUtility, "UrlUtility");
        return UrlUtility.addQueryParam = /* @__PURE__ */ __name(function addQueryParam(e2, t2, r2) {
          return e2.indexOf("?") < 0 && (e2 += "?"), e2[e2.length - 1] !== "?" && (e2 += "&"), e2 += encodeURIComponent(t2), e2 += "=", e2 += encodeURIComponent(r2);
        }, "addQueryParam"), UrlUtility.parseUrlFragment = /* @__PURE__ */ __name(function parseUrlFragment(e2) {
          var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "#", r2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : i.Global;
          typeof e2 != "string" && (e2 = r2.location.href);
          var o = e2.lastIndexOf(t2);
          o >= 0 && (e2 = e2.substr(o + 1)), t2 === "?" && (o = e2.indexOf("#")) >= 0 && (e2 = e2.substr(0, o));
          for (var s, a = {}, u = /([^&=]+)=([^&]*)/g, c = 0; s = u.exec(e2); )
            if (a[decodeURIComponent(s[1])] = decodeURIComponent(s[2]), c++ > 50)
              return n.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters", e2), {error: "Response exceeded expected number of parameters"};
          for (var h in a)
            return a;
          return {};
        }, "parseUrlFragment"), UrlUtility;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.State = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(0), o = (/* @__PURE__ */ __name(function _interopRequireDefault(e2) {
        return e2 && e2.__esModule ? e2 : {default: e2};
      }, "_interopRequireDefault"))(r(16));
      t.State = function() {
        function State() {
          var e2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t2 = e2.id, r2 = e2.data, n2 = e2.created;
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, State), this._id = t2 || (0, o.default)(), this._data = r2, this._created = typeof n2 == "number" && n2 > 0 ? n2 : parseInt(Date.now() / 1e3);
        }
        __name(State, "State");
        return State.prototype.toStorageString = /* @__PURE__ */ __name(function toStorageString() {
          return i.Log.debug("State.toStorageString"), JSON.stringify({id: this.id, data: this.data, created: this.created});
        }, "toStorageString"), State.fromStorageString = /* @__PURE__ */ __name(function fromStorageString(e2) {
          return i.Log.debug("State.fromStorageString"), new State(JSON.parse(e2));
        }, "fromStorageString"), State.clearStaleState = /* @__PURE__ */ __name(function clearStaleState(e2, t2) {
          var r2 = Date.now() / 1e3 - t2;
          return e2.getAllKeys().then(function(t3) {
            i.Log.debug("State.clearStaleState: got keys", t3);
            for (var n2 = [], o2 = /* @__PURE__ */ __name(function _loop(o3) {
              var s2 = t3[o3];
              a = e2.get(s2).then(function(t4) {
                var n3 = false;
                if (t4)
                  try {
                    var o4 = State.fromStorageString(t4);
                    i.Log.debug("State.clearStaleState: got item from key: ", s2, o4.created), o4.created <= r2 && (n3 = true);
                  } catch (e3) {
                    i.Log.error("State.clearStaleState: Error parsing state for key", s2, e3.message), n3 = true;
                  }
                else
                  i.Log.debug("State.clearStaleState: no item in storage for key: ", s2), n3 = true;
                if (n3)
                  return i.Log.debug("State.clearStaleState: removed item for key: ", s2), e2.remove(s2);
              }), n2.push(a);
            }, "_loop"), s = 0; s < t3.length; s++) {
              var a;
              o2(s);
            }
            return i.Log.debug("State.clearStaleState: waiting on promise count:", n2.length), Promise.all(n2);
          });
        }, "clearStaleState"), n(State, [{key: "id", get: /* @__PURE__ */ __name(function get() {
          return this._id;
        }, "get")}, {key: "data", get: /* @__PURE__ */ __name(function get() {
          return this._data;
        }, "get")}, {key: "created", get: /* @__PURE__ */ __name(function get() {
          return this._created;
        }, "get")}]), State;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.JoseUtil = void 0;
      var n = r(44), i = r(0);
      var o = ["RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512"];
      t.JoseUtil = function() {
        function JoseUtil() {
          !(/* @__PURE__ */ __name(function _classCallCheck(e2, t2) {
            if (!(e2 instanceof t2))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, JoseUtil);
        }
        __name(JoseUtil, "JoseUtil");
        return JoseUtil.parseJwt = /* @__PURE__ */ __name(function parseJwt(e2) {
          i.Log.debug("JoseUtil.parseJwt");
          try {
            var t2 = n.jws.JWS.parse(e2);
            return {header: t2.headerObj, payload: t2.payloadObj};
          } catch (e3) {
            i.Log.error(e3);
          }
        }, "parseJwt"), JoseUtil.validateJwt = /* @__PURE__ */ __name(function validateJwt(e2, t2, r2, o2, s, a) {
          i.Log.debug("JoseUtil.validateJwt");
          try {
            if (t2.kty === "RSA")
              if (t2.e && t2.n)
                t2 = n.KEYUTIL.getKey(t2);
              else {
                if (!t2.x5c || !t2.x5c.length)
                  return i.Log.error("JoseUtil.validateJwt: RSA key missing key material", t2), Promise.reject(new Error("RSA key missing key material"));
                var u = (0, n.b64tohex)(t2.x5c[0]);
                t2 = n.X509.getPublicKeyFromCertHex(u);
              }
            else {
              if (t2.kty !== "EC")
                return i.Log.error("JoseUtil.validateJwt: Unsupported key type", t2 && t2.kty), Promise.reject(new Error("Unsupported key type: " + t2 && t2.kty));
              if (!(t2.crv && t2.x && t2.y))
                return i.Log.error("JoseUtil.validateJwt: EC key missing key material", t2), Promise.reject(new Error("EC key missing key material"));
              t2 = n.KEYUTIL.getKey(t2);
            }
            return JoseUtil._validateJwt(e2, t2, r2, o2, s, a);
          } catch (e3) {
            return i.Log.error(e3 && e3.message || e3), Promise.reject("JWT validation failed");
          }
        }, "validateJwt"), JoseUtil.validateJwtAttributes = /* @__PURE__ */ __name(function validateJwtAttributes(e2, t2, r2, n2, o2) {
          n2 || (n2 = 0), o2 || (o2 = parseInt(Date.now() / 1e3));
          var s = JoseUtil.parseJwt(e2).payload;
          if (!s.iss)
            return i.Log.error("JoseUtil._validateJwt: issuer was not provided"), Promise.reject(new Error("issuer was not provided"));
          if (s.iss !== t2)
            return i.Log.error("JoseUtil._validateJwt: Invalid issuer in token", s.iss), Promise.reject(new Error("Invalid issuer in token: " + s.iss));
          if (!s.aud)
            return i.Log.error("JoseUtil._validateJwt: aud was not provided"), Promise.reject(new Error("aud was not provided"));
          if (!(s.aud === r2 || Array.isArray(s.aud) && s.aud.indexOf(r2) >= 0))
            return i.Log.error("JoseUtil._validateJwt: Invalid audience in token", s.aud), Promise.reject(new Error("Invalid audience in token: " + s.aud));
          if (s.azp && s.azp !== r2)
            return i.Log.error("JoseUtil._validateJwt: Invalid azp in token", s.azp), Promise.reject(new Error("Invalid azp in token: " + s.azp));
          var a = o2 + n2, u = o2 - n2;
          return s.iat ? a < s.iat ? (i.Log.error("JoseUtil._validateJwt: iat is in the future", s.iat), Promise.reject(new Error("iat is in the future: " + s.iat))) : s.nbf && a < s.nbf ? (i.Log.error("JoseUtil._validateJwt: nbf is in the future", s.nbf), Promise.reject(new Error("nbf is in the future: " + s.nbf))) : s.exp ? s.exp < u ? (i.Log.error("JoseUtil._validateJwt: exp is in the past", s.exp), Promise.reject(new Error("exp is in the past:" + s.exp))) : Promise.resolve(s) : (i.Log.error("JoseUtil._validateJwt: exp was not provided"), Promise.reject(new Error("exp was not provided"))) : (i.Log.error("JoseUtil._validateJwt: iat was not provided"), Promise.reject(new Error("iat was not provided")));
        }, "validateJwtAttributes"), JoseUtil._validateJwt = /* @__PURE__ */ __name(function _validateJwt(e2, t2, r2, s, a, u) {
          return JoseUtil.validateJwtAttributes(e2, r2, s, a, u).then(function(r3) {
            try {
              return n.jws.JWS.verify(e2, t2, o) ? r3 : (i.Log.error("JoseUtil._validateJwt: signature validation failed"), Promise.reject(new Error("signature validation failed")));
            } catch (e3) {
              return i.Log.error(e3 && e3.message || e3), Promise.reject(new Error("signature validation failed"));
            }
          });
        }, "_validateJwt"), JoseUtil.hashString = /* @__PURE__ */ __name(function hashString(e2, t2) {
          try {
            return n.crypto.Util.hashString(e2, t2);
          } catch (e3) {
            i.Log.error(e3);
          }
        }, "hashString"), JoseUtil.hexToBase64Url = /* @__PURE__ */ __name(function hexToBase64Url(e2) {
          try {
            return (0, n.hextob64u)(e2);
          } catch (e3) {
            i.Log.error(e3);
          }
        }, "hexToBase64Url"), JoseUtil;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.JsonService = void 0;
      var n = r(0), i = r(1);
      t.JsonService = function() {
        function JsonService() {
          var e2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null, t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : i.Global.XMLHttpRequest;
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, JsonService), e2 && Array.isArray(e2) ? this._contentTypes = e2.slice() : this._contentTypes = [], this._contentTypes.push("application/json"), this._XMLHttpRequest = t2;
        }
        __name(JsonService, "JsonService");
        return JsonService.prototype.getJson = /* @__PURE__ */ __name(function getJson(e2, t2) {
          var r2 = this;
          if (!e2)
            throw n.Log.error("JsonService.getJson: No url passed"), new Error("url");
          return n.Log.debug("JsonService.getJson, url: ", e2), new Promise(function(i2, o) {
            var s = new r2._XMLHttpRequest();
            s.open("GET", e2);
            var a = r2._contentTypes;
            s.onload = function() {
              if (n.Log.debug("JsonService.getJson: HTTP response received, status", s.status), s.status === 200) {
                var t3 = s.getResponseHeader("Content-Type");
                if (t3) {
                  if (a.find(function(e3) {
                    if (t3.startsWith(e3))
                      return true;
                  }))
                    try {
                      return void i2(JSON.parse(s.responseText));
                    } catch (e3) {
                      return n.Log.error("JsonService.getJson: Error parsing JSON response", e3.message), void o(e3);
                    }
                }
                o(Error("Invalid response Content-Type: " + t3 + ", from URL: " + e2));
              } else
                o(Error(s.statusText + " (" + s.status + ")"));
            }, s.onerror = function() {
              n.Log.error("JsonService.getJson: network error"), o(Error("Network Error"));
            }, t2 && (n.Log.debug("JsonService.getJson: token passed, setting Authorization header"), s.setRequestHeader("Authorization", "Bearer " + t2)), s.send();
          });
        }, "getJson"), JsonService.prototype.postForm = /* @__PURE__ */ __name(function postForm(e2, t2) {
          var r2 = this;
          if (!e2)
            throw n.Log.error("JsonService.postForm: No url passed"), new Error("url");
          return n.Log.debug("JsonService.postForm, url: ", e2), new Promise(function(i2, o) {
            var s = new r2._XMLHttpRequest();
            s.open("POST", e2);
            var a = r2._contentTypes;
            s.onload = function() {
              if (n.Log.debug("JsonService.postForm: HTTP response received, status", s.status), s.status !== 200) {
                if (s.status === 400) {
                  if (r3 = s.getResponseHeader("Content-Type")) {
                    if (a.find(function(e3) {
                      if (r3.startsWith(e3))
                        return true;
                    }))
                      try {
                        var t3 = JSON.parse(s.responseText);
                        if (t3 && t3.error)
                          return n.Log.error("JsonService.postForm: Error from server: ", t3.error), void o(new Error(t3.error));
                      } catch (e3) {
                        return n.Log.error("JsonService.postForm: Error parsing JSON response", e3.message), void o(e3);
                      }
                  }
                }
                o(Error(s.statusText + " (" + s.status + ")"));
              } else {
                var r3;
                if ((r3 = s.getResponseHeader("Content-Type")) && a.find(function(e3) {
                  if (r3.startsWith(e3))
                    return true;
                }))
                  try {
                    return void i2(JSON.parse(s.responseText));
                  } catch (e3) {
                    return n.Log.error("JsonService.postForm: Error parsing JSON response", e3.message), void o(e3);
                  }
                o(Error("Invalid response Content-Type: " + r3 + ", from URL: " + e2));
              }
            }, s.onerror = function() {
              n.Log.error("JsonService.postForm: network error"), o(Error("Network Error"));
            };
            var u = "";
            for (var c in t2) {
              var h = t2[c];
              h && (u.length > 0 && (u += "&"), u += encodeURIComponent(c), u += "=", u += encodeURIComponent(h));
            }
            s.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), s.send(u);
          });
        }, "postForm"), JsonService;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.WebStorageStateStore = void 0;
      var n = r(0), i = r(1);
      t.WebStorageStateStore = function() {
        function WebStorageStateStore() {
          var e2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t2 = e2.prefix, r2 = t2 === void 0 ? "oidc." : t2, n2 = e2.store, o = n2 === void 0 ? i.Global.localStorage : n2;
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, WebStorageStateStore), this._store = o, this._prefix = r2;
        }
        __name(WebStorageStateStore, "WebStorageStateStore");
        return WebStorageStateStore.prototype.set = /* @__PURE__ */ __name(function set(e2, t2) {
          return n.Log.debug("WebStorageStateStore.set", e2), e2 = this._prefix + e2, this._store.setItem(e2, t2), Promise.resolve();
        }, "set"), WebStorageStateStore.prototype.get = /* @__PURE__ */ __name(function get(e2) {
          n.Log.debug("WebStorageStateStore.get", e2), e2 = this._prefix + e2;
          var t2 = this._store.getItem(e2);
          return Promise.resolve(t2);
        }, "get"), WebStorageStateStore.prototype.remove = /* @__PURE__ */ __name(function remove(e2) {
          n.Log.debug("WebStorageStateStore.remove", e2), e2 = this._prefix + e2;
          var t2 = this._store.getItem(e2);
          return this._store.removeItem(e2), Promise.resolve(t2);
        }, "remove"), WebStorageStateStore.prototype.getAllKeys = /* @__PURE__ */ __name(function getAllKeys() {
          n.Log.debug("WebStorageStateStore.getAllKeys");
          for (var e2 = [], t2 = 0; t2 < this._store.length; t2++) {
            var r2 = this._store.key(t2);
            r2.indexOf(this._prefix) === 0 && e2.push(r2.substr(this._prefix.length));
          }
          return Promise.resolve(e2);
        }, "getAllKeys"), WebStorageStateStore;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.OidcClientSettings = void 0;
      var n = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e2) {
        return typeof e2;
      } : function(e2) {
        return e2 && typeof Symbol == "function" && e2.constructor === Symbol && e2 !== Symbol.prototype ? "symbol" : typeof e2;
      }, i = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), o = r(0), s = r(7), a = r(46), u = r(2);
      var c = "id_token", h = "openid", l = 900, f = 300;
      t.OidcClientSettings = function() {
        function OidcClientSettings() {
          var e2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t2 = e2.authority, r2 = e2.metadataUrl, i2 = e2.metadata, o2 = e2.signingKeys, g = e2.client_id, p = e2.client_secret, d = e2.response_type, v = d === void 0 ? c : d, y = e2.scope, m = y === void 0 ? h : y, _ = e2.redirect_uri, S = e2.post_logout_redirect_uri, b = e2.prompt, F = e2.display, w = e2.max_age, E = e2.ui_locales, x = e2.acr_values, C = e2.resource, k = e2.response_mode, A = e2.filterProtocolClaims, P = A === void 0 || A, I = e2.loadUserInfo, B = I === void 0 || I, R = e2.staleStateAge, T = R === void 0 ? l : R, U = e2.clockSkew, D = U === void 0 ? f : U, M = e2.stateStore, L = M === void 0 ? new s.WebStorageStateStore() : M, N = e2.ResponseValidatorCtor, O = N === void 0 ? a.ResponseValidator : N, H = e2.MetadataServiceCtor, j = H === void 0 ? u.MetadataService : H, K = e2.extraQueryParams, V = K === void 0 ? {} : K;
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, OidcClientSettings), this._authority = t2, this._metadataUrl = r2, this._metadata = i2, this._signingKeys = o2, this._client_id = g, this._client_secret = p, this._response_type = v, this._scope = m, this._redirect_uri = _, this._post_logout_redirect_uri = S, this._prompt = b, this._display = F, this._max_age = w, this._ui_locales = E, this._acr_values = x, this._resource = C, this._response_mode = k, this._filterProtocolClaims = !!P, this._loadUserInfo = !!B, this._staleStateAge = T, this._clockSkew = D, this._stateStore = L, this._validator = new O(this), this._metadataService = new j(this), this._extraQueryParams = (V === void 0 ? "undefined" : n(V)) === "object" ? V : {};
        }
        __name(OidcClientSettings, "OidcClientSettings");
        return i(OidcClientSettings, [{key: "client_id", get: /* @__PURE__ */ __name(function get() {
          return this._client_id;
        }, "get"), set: /* @__PURE__ */ __name(function set(e2) {
          if (this._client_id)
            throw o.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."), new Error("client_id has already been assigned.");
          this._client_id = e2;
        }, "set")}, {key: "client_secret", get: /* @__PURE__ */ __name(function get() {
          return this._client_secret;
        }, "get")}, {key: "response_type", get: /* @__PURE__ */ __name(function get() {
          return this._response_type;
        }, "get")}, {key: "scope", get: /* @__PURE__ */ __name(function get() {
          return this._scope;
        }, "get")}, {key: "redirect_uri", get: /* @__PURE__ */ __name(function get() {
          return this._redirect_uri;
        }, "get")}, {key: "post_logout_redirect_uri", get: /* @__PURE__ */ __name(function get() {
          return this._post_logout_redirect_uri;
        }, "get")}, {key: "prompt", get: /* @__PURE__ */ __name(function get() {
          return this._prompt;
        }, "get")}, {key: "display", get: /* @__PURE__ */ __name(function get() {
          return this._display;
        }, "get")}, {key: "max_age", get: /* @__PURE__ */ __name(function get() {
          return this._max_age;
        }, "get")}, {key: "ui_locales", get: /* @__PURE__ */ __name(function get() {
          return this._ui_locales;
        }, "get")}, {key: "acr_values", get: /* @__PURE__ */ __name(function get() {
          return this._acr_values;
        }, "get")}, {key: "resource", get: /* @__PURE__ */ __name(function get() {
          return this._resource;
        }, "get")}, {key: "response_mode", get: /* @__PURE__ */ __name(function get() {
          return this._response_mode;
        }, "get")}, {key: "authority", get: /* @__PURE__ */ __name(function get() {
          return this._authority;
        }, "get"), set: /* @__PURE__ */ __name(function set(e2) {
          if (this._authority)
            throw o.Log.error("OidcClientSettings.set_authority: authority has already been assigned."), new Error("authority has already been assigned.");
          this._authority = e2;
        }, "set")}, {key: "metadataUrl", get: /* @__PURE__ */ __name(function get() {
          return this._metadataUrl || (this._metadataUrl = this.authority, this._metadataUrl && this._metadataUrl.indexOf(".well-known/openid-configuration") < 0 && (this._metadataUrl[this._metadataUrl.length - 1] !== "/" && (this._metadataUrl += "/"), this._metadataUrl += ".well-known/openid-configuration")), this._metadataUrl;
        }, "get")}, {key: "metadata", get: /* @__PURE__ */ __name(function get() {
          return this._metadata;
        }, "get"), set: /* @__PURE__ */ __name(function set(e2) {
          this._metadata = e2;
        }, "set")}, {key: "signingKeys", get: /* @__PURE__ */ __name(function get() {
          return this._signingKeys;
        }, "get"), set: /* @__PURE__ */ __name(function set(e2) {
          this._signingKeys = e2;
        }, "set")}, {key: "filterProtocolClaims", get: /* @__PURE__ */ __name(function get() {
          return this._filterProtocolClaims;
        }, "get")}, {key: "loadUserInfo", get: /* @__PURE__ */ __name(function get() {
          return this._loadUserInfo;
        }, "get")}, {key: "staleStateAge", get: /* @__PURE__ */ __name(function get() {
          return this._staleStateAge;
        }, "get")}, {key: "clockSkew", get: /* @__PURE__ */ __name(function get() {
          return this._clockSkew;
        }, "get")}, {key: "stateStore", get: /* @__PURE__ */ __name(function get() {
          return this._stateStore;
        }, "get")}, {key: "validator", get: /* @__PURE__ */ __name(function get() {
          return this._validator;
        }, "get")}, {key: "metadataService", get: /* @__PURE__ */ __name(function get() {
          return this._metadataService;
        }, "get")}, {key: "extraQueryParams", get: /* @__PURE__ */ __name(function get() {
          return this._extraQueryParams;
        }, "get"), set: /* @__PURE__ */ __name(function set(e2) {
          (e2 === void 0 ? "undefined" : n(e2)) === "object" ? this._extraQueryParams = e2 : this._extraQueryParams = {};
        }, "set")}]), OidcClientSettings;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.CordovaPopupWindow = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(0);
      var o = "location=no,toolbar=no,zoom=no", s = "_blank";
      t.CordovaPopupWindow = function() {
        function CordovaPopupWindow(e2) {
          var t2 = this;
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, CordovaPopupWindow), this._promise = new Promise(function(e3, r2) {
            t2._resolve = e3, t2._reject = r2;
          }), this.features = e2.popupWindowFeatures || o, this.target = e2.popupWindowTarget || s, this.redirect_uri = e2.startUrl, i.Log.debug("CordovaPopupWindow.ctor: redirect_uri: " + this.redirect_uri);
        }
        __name(CordovaPopupWindow, "CordovaPopupWindow");
        return CordovaPopupWindow.prototype._isInAppBrowserInstalled = /* @__PURE__ */ __name(function _isInAppBrowserInstalled(e2) {
          return ["cordova-plugin-inappbrowser", "cordova-plugin-inappbrowser.inappbrowser", "org.apache.cordova.inappbrowser"].some(function(t2) {
            return e2.hasOwnProperty(t2);
          });
        }, "_isInAppBrowserInstalled"), CordovaPopupWindow.prototype.navigate = /* @__PURE__ */ __name(function navigate(e2) {
          if (e2 && e2.url) {
            if (!window.cordova)
              return this._error("cordova is undefined");
            var t2 = window.cordova.require("cordova/plugin_list").metadata;
            if (this._isInAppBrowserInstalled(t2) === false)
              return this._error("InAppBrowser plugin not found");
            this._popup = cordova.InAppBrowser.open(e2.url, this.target, this.features), this._popup ? (i.Log.debug("CordovaPopupWindow.navigate: popup successfully created"), this._exitCallbackEvent = this._exitCallback.bind(this), this._loadStartCallbackEvent = this._loadStartCallback.bind(this), this._popup.addEventListener("exit", this._exitCallbackEvent, false), this._popup.addEventListener("loadstart", this._loadStartCallbackEvent, false)) : this._error("Error opening popup window");
          } else
            this._error("No url provided");
          return this.promise;
        }, "navigate"), CordovaPopupWindow.prototype._loadStartCallback = /* @__PURE__ */ __name(function _loadStartCallback(e2) {
          e2.url.indexOf(this.redirect_uri) === 0 && this._success({url: e2.url});
        }, "_loadStartCallback"), CordovaPopupWindow.prototype._exitCallback = /* @__PURE__ */ __name(function _exitCallback(e2) {
          this._error(e2);
        }, "_exitCallback"), CordovaPopupWindow.prototype._success = /* @__PURE__ */ __name(function _success(e2) {
          this._cleanup(), i.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"), this._resolve(e2);
        }, "_success"), CordovaPopupWindow.prototype._error = /* @__PURE__ */ __name(function _error(e2) {
          this._cleanup(), i.Log.error(e2), this._reject(new Error(e2));
        }, "_error"), CordovaPopupWindow.prototype.close = /* @__PURE__ */ __name(function close() {
          this._cleanup();
        }, "close"), CordovaPopupWindow.prototype._cleanup = /* @__PURE__ */ __name(function _cleanup() {
          this._popup && (i.Log.debug("CordovaPopupWindow: cleaning up popup"), this._popup.removeEventListener("exit", this._exitCallbackEvent, false), this._popup.removeEventListener("loadstart", this._loadStartCallbackEvent, false), this._popup.close()), this._popup = null;
        }, "_cleanup"), n(CordovaPopupWindow, [{key: "promise", get: /* @__PURE__ */ __name(function get() {
          return this._promise;
        }, "get")}]), CordovaPopupWindow;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.TokenRevocationClient = void 0;
      var n = r(0), i = r(2), o = r(1);
      t.TokenRevocationClient = function() {
        function TokenRevocationClient(e2) {
          var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : o.Global.XMLHttpRequest, r2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : i.MetadataService;
          if ((/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, TokenRevocationClient), !e2)
            throw n.Log.error("TokenRevocationClient.ctor: No settings provided"), new Error("No settings provided.");
          this._settings = e2, this._XMLHttpRequestCtor = t2, this._metadataService = new r2(this._settings);
        }
        __name(TokenRevocationClient, "TokenRevocationClient");
        return TokenRevocationClient.prototype.revoke = /* @__PURE__ */ __name(function revoke(e2, t2) {
          var r2 = this, i2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "access_token";
          if (!e2)
            throw n.Log.error("TokenRevocationClient.revoke: No token provided"), new Error("No token provided.");
          if (i2 !== "access_token" && i2 != "refresh_token")
            throw n.Log.error("TokenRevocationClient.revoke: Invalid token type"), new Error("Invalid token type.");
          return this._metadataService.getRevocationEndpoint().then(function(o2) {
            if (o2) {
              n.Log.debug("TokenRevocationClient.revoke: Revoking " + i2);
              var s = r2._settings.client_id, a = r2._settings.client_secret;
              return r2._revoke(o2, s, a, e2, i2);
            }
            if (t2)
              throw n.Log.error("TokenRevocationClient.revoke: Revocation not supported"), new Error("Revocation not supported");
          });
        }, "revoke"), TokenRevocationClient.prototype._revoke = /* @__PURE__ */ __name(function _revoke(e2, t2, r2, i2, o2) {
          var s = this;
          return new Promise(function(a, u) {
            var c = new s._XMLHttpRequestCtor();
            c.open("POST", e2), c.onload = function() {
              n.Log.debug("TokenRevocationClient.revoke: HTTP response received, status", c.status), c.status === 200 ? a() : u(Error(c.statusText + " (" + c.status + ")"));
            }, c.onerror = function() {
              n.Log.debug("TokenRevocationClient.revoke: Network Error."), u("Network Error");
            };
            var h = "client_id=" + encodeURIComponent(t2);
            r2 && (h += "&client_secret=" + encodeURIComponent(r2)), h += "&token_type_hint=" + encodeURIComponent(o2), h += "&token=" + encodeURIComponent(i2), c.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), c.send(h);
          });
        }, "_revoke"), TokenRevocationClient;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.CheckSessionIFrame = void 0;
      var n = r(0);
      var i = 2e3;
      t.CheckSessionIFrame = function() {
        function CheckSessionIFrame(e2, t2, r2, n2) {
          var o = !(arguments.length > 4 && arguments[4] !== void 0) || arguments[4];
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, CheckSessionIFrame), this._callback = e2, this._client_id = t2, this._url = r2, this._interval = n2 || i, this._stopOnError = o;
          var s = r2.indexOf("/", r2.indexOf("//") + 2);
          this._frame_origin = r2.substr(0, s), this._frame = window.document.createElement("iframe"), this._frame.style.visibility = "hidden", this._frame.style.position = "absolute", this._frame.style.display = "none", this._frame.style.width = 0, this._frame.style.height = 0, this._frame.src = r2;
        }
        __name(CheckSessionIFrame, "CheckSessionIFrame");
        return CheckSessionIFrame.prototype.load = /* @__PURE__ */ __name(function load() {
          var e2 = this;
          return new Promise(function(t2) {
            e2._frame.onload = function() {
              t2();
            }, window.document.body.appendChild(e2._frame), e2._boundMessageEvent = e2._message.bind(e2), window.addEventListener("message", e2._boundMessageEvent, false);
          });
        }, "load"), CheckSessionIFrame.prototype._message = /* @__PURE__ */ __name(function _message(e2) {
          e2.origin === this._frame_origin && e2.source === this._frame.contentWindow && (e2.data === "error" ? (n.Log.error("CheckSessionIFrame: error message from check session op iframe"), this._stopOnError && this.stop()) : e2.data === "changed" ? (n.Log.debug("CheckSessionIFrame: changed message from check session op iframe"), this.stop(), this._callback()) : n.Log.debug("CheckSessionIFrame: " + e2.data + " message from check session op iframe"));
        }, "_message"), CheckSessionIFrame.prototype.start = /* @__PURE__ */ __name(function start(e2) {
          var t2 = this;
          if (this._session_state !== e2) {
            n.Log.debug("CheckSessionIFrame.start"), this.stop(), this._session_state = e2;
            var r2 = /* @__PURE__ */ __name(function send() {
              t2._frame.contentWindow.postMessage(t2._client_id + " " + t2._session_state, t2._frame_origin);
            }, "send");
            r2(), this._timer = window.setInterval(r2, this._interval);
          }
        }, "start"), CheckSessionIFrame.prototype.stop = /* @__PURE__ */ __name(function stop() {
          this._session_state = null, this._timer && (n.Log.debug("CheckSessionIFrame.stop"), window.clearInterval(this._timer), this._timer = null);
        }, "stop"), CheckSessionIFrame;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.SessionMonitor = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(0), o = r(11);
      t.SessionMonitor = function() {
        function SessionMonitor(e2) {
          var t2 = this, r2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : o.CheckSessionIFrame;
          if ((/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, SessionMonitor), !e2)
            throw i.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"), new Error("userManager");
          this._userManager = e2, this._CheckSessionIFrameCtor = r2, this._userManager.events.addUserLoaded(this._start.bind(this)), this._userManager.events.addUserUnloaded(this._stop.bind(this)), this._userManager.getUser().then(function(e3) {
            e3 && t2._start(e3);
          }).catch(function(e3) {
            i.Log.error("SessionMonitor ctor: error from getUser:", e3.message);
          });
        }
        __name(SessionMonitor, "SessionMonitor");
        return SessionMonitor.prototype._start = /* @__PURE__ */ __name(function _start(e2) {
          var t2 = this, r2 = e2.session_state;
          r2 && (this._sub = e2.profile.sub, this._sid = e2.profile.sid, i.Log.debug("SessionMonitor._start: session_state:", r2, ", sub:", this._sub), this._checkSessionIFrame ? this._checkSessionIFrame.start(r2) : this._metadataService.getCheckSessionIframe().then(function(e3) {
            if (e3) {
              i.Log.debug("SessionMonitor._start: Initializing check session iframe");
              var n2 = t2._client_id, o2 = t2._checkSessionInterval, s = t2._stopCheckSessionOnError;
              t2._checkSessionIFrame = new t2._CheckSessionIFrameCtor(t2._callback.bind(t2), n2, e3, o2, s), t2._checkSessionIFrame.load().then(function() {
                t2._checkSessionIFrame.start(r2);
              });
            } else
              i.Log.warn("SessionMonitor._start: No check session iframe found in the metadata");
          }).catch(function(e3) {
            i.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:", e3.message);
          }));
        }, "_start"), SessionMonitor.prototype._stop = /* @__PURE__ */ __name(function _stop() {
          this._sub = null, this._sid = null, this._checkSessionIFrame && (i.Log.debug("SessionMonitor._stop"), this._checkSessionIFrame.stop());
        }, "_stop"), SessionMonitor.prototype._callback = /* @__PURE__ */ __name(function _callback() {
          var e2 = this;
          this._userManager.querySessionStatus().then(function(t2) {
            var r2 = true;
            t2 ? t2.sub === e2._sub ? (r2 = false, e2._checkSessionIFrame.start(t2.session_state), t2.sid === e2._sid ? i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:", t2.session_state) : (i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:", t2.session_state), e2._userManager.events._raiseUserSessionChanged())) : i.Log.debug("SessionMonitor._callback: Different subject signed into OP:", t2.sub) : i.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"), r2 && (i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"), e2._userManager.events._raiseUserSignedOut());
          }).catch(function(t2) {
            i.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event", t2.message), e2._userManager.events._raiseUserSignedOut();
          });
        }, "_callback"), n(SessionMonitor, [{key: "_settings", get: /* @__PURE__ */ __name(function get() {
          return this._userManager.settings;
        }, "get")}, {key: "_metadataService", get: /* @__PURE__ */ __name(function get() {
          return this._userManager.metadataService;
        }, "get")}, {key: "_client_id", get: /* @__PURE__ */ __name(function get() {
          return this._settings.client_id;
        }, "get")}, {key: "_checkSessionInterval", get: /* @__PURE__ */ __name(function get() {
          return this._settings.checkSessionInterval;
        }, "get")}, {key: "_stopCheckSessionOnError", get: /* @__PURE__ */ __name(function get() {
          return this._settings.stopCheckSessionOnError;
        }, "get")}]), SessionMonitor;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.Event = void 0;
      var n = r(0);
      t.Event = function() {
        function Event(e2) {
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t2) {
            if (!(e3 instanceof t2))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, Event), this._name = e2, this._callbacks = [];
        }
        __name(Event, "Event");
        return Event.prototype.addHandler = /* @__PURE__ */ __name(function addHandler(e2) {
          this._callbacks.push(e2);
        }, "addHandler"), Event.prototype.removeHandler = /* @__PURE__ */ __name(function removeHandler(e2) {
          var t2 = this._callbacks.findIndex(function(t3) {
            return t3 === e2;
          });
          t2 >= 0 && this._callbacks.splice(t2, 1);
        }, "removeHandler"), Event.prototype.raise = /* @__PURE__ */ __name(function raise() {
          n.Log.debug("Event: Raising event: " + this._name);
          for (var e2 = 0; e2 < this._callbacks.length; e2++) {
            var t2;
            (t2 = this._callbacks)[e2].apply(t2, arguments);
          }
        }, "raise"), Event;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.AccessTokenEvents = void 0;
      var n = r(0), i = r(25);
      var o = 60;
      t.AccessTokenEvents = function() {
        function AccessTokenEvents() {
          var e2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t2 = e2.accessTokenExpiringNotificationTime, r2 = t2 === void 0 ? o : t2, n2 = e2.accessTokenExpiringTimer, s = n2 === void 0 ? new i.Timer("Access token expiring") : n2, a = e2.accessTokenExpiredTimer, u = a === void 0 ? new i.Timer("Access token expired") : a;
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, AccessTokenEvents), this._accessTokenExpiringNotificationTime = r2, this._accessTokenExpiring = s, this._accessTokenExpired = u;
        }
        __name(AccessTokenEvents, "AccessTokenEvents");
        return AccessTokenEvents.prototype.load = /* @__PURE__ */ __name(function load(e2) {
          if (e2.access_token && e2.expires_in !== void 0) {
            var t2 = e2.expires_in;
            if (n.Log.debug("AccessTokenEvents.load: access token present, remaining duration:", t2), t2 > 0) {
              var r2 = t2 - this._accessTokenExpiringNotificationTime;
              r2 <= 0 && (r2 = 1), n.Log.debug("AccessTokenEvents.load: registering expiring timer in:", r2), this._accessTokenExpiring.init(r2);
            } else
              n.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."), this._accessTokenExpiring.cancel();
            var i2 = t2 + 1;
            n.Log.debug("AccessTokenEvents.load: registering expired timer in:", i2), this._accessTokenExpired.init(i2);
          } else
            this._accessTokenExpiring.cancel(), this._accessTokenExpired.cancel();
        }, "load"), AccessTokenEvents.prototype.unload = /* @__PURE__ */ __name(function unload() {
          n.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"), this._accessTokenExpiring.cancel(), this._accessTokenExpired.cancel();
        }, "unload"), AccessTokenEvents.prototype.addAccessTokenExpiring = /* @__PURE__ */ __name(function addAccessTokenExpiring(e2) {
          this._accessTokenExpiring.addHandler(e2);
        }, "addAccessTokenExpiring"), AccessTokenEvents.prototype.removeAccessTokenExpiring = /* @__PURE__ */ __name(function removeAccessTokenExpiring(e2) {
          this._accessTokenExpiring.removeHandler(e2);
        }, "removeAccessTokenExpiring"), AccessTokenEvents.prototype.addAccessTokenExpired = /* @__PURE__ */ __name(function addAccessTokenExpired(e2) {
          this._accessTokenExpired.addHandler(e2);
        }, "addAccessTokenExpired"), AccessTokenEvents.prototype.removeAccessTokenExpired = /* @__PURE__ */ __name(function removeAccessTokenExpired(e2) {
          this._accessTokenExpired.removeHandler(e2);
        }, "removeAccessTokenExpired"), AccessTokenEvents;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.User = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(0);
      t.User = function() {
        function User(e2) {
          var t2 = e2.id_token, r2 = e2.session_state, n2 = e2.access_token, i2 = e2.refresh_token, o = e2.token_type, s = e2.scope, a = e2.profile, u = e2.expires_at, c = e2.state;
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, User), this.id_token = t2, this.session_state = r2, this.access_token = n2, this.refresh_token = i2, this.token_type = o, this.scope = s, this.profile = a, this.expires_at = u, this.state = c;
        }
        __name(User, "User");
        return User.prototype.toStorageString = /* @__PURE__ */ __name(function toStorageString() {
          return i.Log.debug("User.toStorageString"), JSON.stringify({id_token: this.id_token, session_state: this.session_state, access_token: this.access_token, refresh_token: this.refresh_token, token_type: this.token_type, scope: this.scope, profile: this.profile, expires_at: this.expires_at});
        }, "toStorageString"), User.fromStorageString = /* @__PURE__ */ __name(function fromStorageString(e2) {
          return i.Log.debug("User.fromStorageString"), new User(JSON.parse(e2));
        }, "fromStorageString"), n(User, [{key: "expires_in", get: /* @__PURE__ */ __name(function get() {
          if (this.expires_at) {
            var e2 = parseInt(Date.now() / 1e3);
            return this.expires_at - e2;
          }
        }, "get"), set: /* @__PURE__ */ __name(function set(e2) {
          var t2 = parseInt(e2);
          if (typeof t2 == "number" && t2 > 0) {
            var r2 = parseInt(Date.now() / 1e3);
            this.expires_at = r2 + t2;
          }
        }, "set")}, {key: "expired", get: /* @__PURE__ */ __name(function get() {
          var e2 = this.expires_in;
          if (e2 !== void 0)
            return e2 <= 0;
        }, "get")}, {key: "scopes", get: /* @__PURE__ */ __name(function get() {
          return (this.scope || "").split(" ");
        }, "get")}]), User;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.default = /* @__PURE__ */ __name(function random() {
        for (var e2 = "xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx", t2 = "0123456789abcdef", r2 = 0, n = "", i = 0; i < e2.length; i++)
          e2[i] !== "-" && e2[i] !== "4" && (r2 = 16 * Math.random() | 0), e2[i] === "x" ? n += t2[r2] : e2[i] === "y" ? (r2 &= 3, n += t2[r2 |= 8]) : n += e2[i];
        return n;
      }, "random"), e.exports = t.default;
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.SigninState = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(0), o = r(4), s = r(5), a = (/* @__PURE__ */ __name(function _interopRequireDefault(e2) {
        return e2 && e2.__esModule ? e2 : {default: e2};
      }, "_interopRequireDefault"))(r(16));
      t.SigninState = function(e2) {
        function SigninState() {
          var t2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, r2 = t2.nonce, n2 = t2.authority, i2 = t2.client_id, o2 = t2.redirect_uri, u = t2.code_verifier;
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, SigninState);
          var c = (/* @__PURE__ */ __name(function _possibleConstructorReturn(e3, t3) {
            if (!e3)
              throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t3 || typeof t3 != "object" && typeof t3 != "function" ? e3 : t3;
          }, "_possibleConstructorReturn"))(this, e2.call(this, arguments[0]));
          if (r2 === true ? c._nonce = (0, a.default)() : r2 && (c._nonce = r2), u === true ? c._code_verifier = (0, a.default)() + (0, a.default)() + (0, a.default)() : u && (c._code_verifier = u), c.code_verifier) {
            var h = s.JoseUtil.hashString(c.code_verifier, "SHA256");
            c._code_challenge = s.JoseUtil.hexToBase64Url(h);
          }
          return c._redirect_uri = o2, c._authority = n2, c._client_id = i2, c;
        }
        __name(SigninState, "SigninState");
        return (/* @__PURE__ */ __name(function _inherits(e3, t2) {
          if (typeof t2 != "function" && t2 !== null)
            throw new TypeError("Super expression must either be null or a function, not " + typeof t2);
          e3.prototype = Object.create(t2 && t2.prototype, {constructor: {value: e3, enumerable: false, writable: true, configurable: true}}), t2 && (Object.setPrototypeOf ? Object.setPrototypeOf(e3, t2) : e3.__proto__ = t2);
        }, "_inherits"))(SigninState, e2), SigninState.prototype.toStorageString = /* @__PURE__ */ __name(function toStorageString() {
          return i.Log.debug("SigninState.toStorageString"), JSON.stringify({id: this.id, data: this.data, created: this.created, nonce: this.nonce, code_verifier: this.code_verifier, redirect_uri: this.redirect_uri, authority: this.authority, client_id: this.client_id});
        }, "toStorageString"), SigninState.fromStorageString = /* @__PURE__ */ __name(function fromStorageString(e3) {
          return i.Log.debug("SigninState.fromStorageString"), new SigninState(JSON.parse(e3));
        }, "fromStorageString"), n(SigninState, [{key: "nonce", get: /* @__PURE__ */ __name(function get() {
          return this._nonce;
        }, "get")}, {key: "authority", get: /* @__PURE__ */ __name(function get() {
          return this._authority;
        }, "get")}, {key: "client_id", get: /* @__PURE__ */ __name(function get() {
          return this._client_id;
        }, "get")}, {key: "redirect_uri", get: /* @__PURE__ */ __name(function get() {
          return this._redirect_uri;
        }, "get")}, {key: "code_verifier", get: /* @__PURE__ */ __name(function get() {
          return this._code_verifier;
        }, "get")}, {key: "code_challenge", get: /* @__PURE__ */ __name(function get() {
          return this._code_challenge;
        }, "get")}]), SigninState;
      }(o.State);
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.ErrorResponse = void 0;
      var n = r(0);
      t.ErrorResponse = function(e2) {
        function ErrorResponse() {
          var t2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, r2 = t2.error, i = t2.error_description, o = t2.error_uri, s = t2.state;
          if ((/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, ErrorResponse), !r2)
            throw n.Log.error("No error passed to ErrorResponse"), new Error("error");
          var a = (/* @__PURE__ */ __name(function _possibleConstructorReturn(e3, t3) {
            if (!e3)
              throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t3 || typeof t3 != "object" && typeof t3 != "function" ? e3 : t3;
          }, "_possibleConstructorReturn"))(this, e2.call(this, i || r2));
          return a.name = "ErrorResponse", a.error = r2, a.error_description = i, a.error_uri = o, a.state = s, a;
        }
        __name(ErrorResponse, "ErrorResponse");
        return (/* @__PURE__ */ __name(function _inherits(e3, t2) {
          if (typeof t2 != "function" && t2 !== null)
            throw new TypeError("Super expression must either be null or a function, not " + typeof t2);
          e3.prototype = Object.create(t2 && t2.prototype, {constructor: {value: e3, enumerable: false, writable: true, configurable: true}}), t2 && (Object.setPrototypeOf ? Object.setPrototypeOf(e3, t2) : e3.__proto__ = t2);
        }, "_inherits"))(ErrorResponse, e2), ErrorResponse;
      }(Error);
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.TokenClient = void 0;
      var n = r(6), i = r(2), o = r(0);
      t.TokenClient = function() {
        function TokenClient(e2) {
          var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : n.JsonService, r2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : i.MetadataService;
          if ((/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, TokenClient), !e2)
            throw o.Log.error("TokenClient.ctor: No settings passed"), new Error("settings");
          this._settings = e2, this._jsonService = new t2(), this._metadataService = new r2(this._settings);
        }
        __name(TokenClient, "TokenClient");
        return TokenClient.prototype.exchangeCode = /* @__PURE__ */ __name(function exchangeCode() {
          var e2 = this, t2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          return t2.grant_type = t2.grant_type || "authorization_code", t2.client_id = t2.client_id || this._settings.client_id, t2.redirect_uri = t2.redirect_uri || this._settings.redirect_uri, t2.code ? t2.redirect_uri ? t2.code_verifier ? t2.client_id ? this._metadataService.getTokenEndpoint(false).then(function(r2) {
            return o.Log.debug("TokenClient.exchangeCode: Received token endpoint"), e2._jsonService.postForm(r2, t2).then(function(e3) {
              return o.Log.debug("TokenClient.exchangeCode: response received"), e3;
            });
          }) : (o.Log.error("TokenClient.exchangeCode: No client_id passed"), Promise.reject(new Error("A client_id is required"))) : (o.Log.error("TokenClient.exchangeCode: No code_verifier passed"), Promise.reject(new Error("A code_verifier is required"))) : (o.Log.error("TokenClient.exchangeCode: No redirect_uri passed"), Promise.reject(new Error("A redirect_uri is required"))) : (o.Log.error("TokenClient.exchangeCode: No code passed"), Promise.reject(new Error("A code is required")));
        }, "exchangeCode"), TokenClient.prototype.exchangeRefreshToken = /* @__PURE__ */ __name(function exchangeRefreshToken() {
          var e2 = this, t2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          return t2.grant_type = t2.grant_type || "refresh_token", t2.client_id = t2.client_id || this._settings.client_id, t2.refresh_token ? t2.client_id ? this._metadataService.getTokenEndpoint(false).then(function(r2) {
            return o.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"), e2._jsonService.postForm(r2, t2).then(function(e3) {
              return o.Log.debug("TokenClient.exchangeRefreshToken: response received"), e3;
            });
          }) : (o.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"), Promise.reject(new Error("A client_id is required"))) : (o.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"), Promise.reject(new Error("A refresh_token is required")));
        }, "exchangeRefreshToken"), TokenClient;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.OidcClient = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(0), o = r(8), s = r(18), a = r(38), u = r(37), c = r(36), h = r(35), l = r(17), f = r(4);
      t.OidcClient = function() {
        function OidcClient() {
          var e2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t2) {
            if (!(e3 instanceof t2))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, OidcClient), e2 instanceof o.OidcClientSettings ? this._settings = e2 : this._settings = new o.OidcClientSettings(e2);
        }
        __name(OidcClient, "OidcClient");
        return OidcClient.prototype.createSigninRequest = /* @__PURE__ */ __name(function createSigninRequest() {
          var e2 = this, t2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, r2 = t2.response_type, n2 = t2.scope, o2 = t2.redirect_uri, s2 = t2.data, u2 = t2.state, c2 = t2.prompt, h2 = t2.display, l2 = t2.max_age, f2 = t2.ui_locales, g = t2.id_token_hint, p = t2.login_hint, d = t2.acr_values, v = t2.resource, y = t2.request, m = t2.request_uri, _ = t2.response_mode, S = t2.extraQueryParams, b = arguments[1];
          i.Log.debug("OidcClient.createSigninRequest");
          var F = this._settings.client_id;
          r2 = r2 || this._settings.response_type, n2 = n2 || this._settings.scope, o2 = o2 || this._settings.redirect_uri, c2 = c2 || this._settings.prompt, h2 = h2 || this._settings.display, l2 = l2 || this._settings.max_age, f2 = f2 || this._settings.ui_locales, d = d || this._settings.acr_values, v = v || this._settings.resource, _ = _ || this._settings.response_mode, S = S || this._settings.extraQueryParams;
          var w = this._settings.authority;
          return a.SigninRequest.isCode(r2) && r2 !== "code" ? Promise.reject(new Error("OpenID Connect hybrid flow is not supported")) : this._metadataService.getAuthorizationEndpoint().then(function(t3) {
            i.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint", t3);
            var E = new a.SigninRequest({url: t3, client_id: F, redirect_uri: o2, response_type: r2, scope: n2, data: s2 || u2, authority: w, prompt: c2, display: h2, max_age: l2, ui_locales: f2, id_token_hint: g, login_hint: p, acr_values: d, resource: v, request: y, request_uri: m, extraQueryParams: S, response_mode: _}), x = E.state;
            return (b = b || e2._stateStore).set(x.id, x.toStorageString()).then(function() {
              return E;
            });
          });
        }, "createSigninRequest"), OidcClient.prototype.processSigninResponse = /* @__PURE__ */ __name(function processSigninResponse(e2, t2) {
          var r2 = this;
          i.Log.debug("OidcClient.processSigninResponse");
          var n2 = this._settings.response_mode === "query" || !this._settings.response_mode && a.SigninRequest.isCode(this._settings.response_type) ? "?" : "#", o2 = new u.SigninResponse(e2, n2);
          return o2.state ? (t2 = t2 || this._stateStore).remove(o2.state).then(function(e3) {
            if (!e3)
              throw i.Log.error("OidcClient.processSigninResponse: No matching state found in storage"), new Error("No matching state found in storage");
            var t3 = l.SigninState.fromStorageString(e3);
            return i.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"), r2._validator.validateSigninResponse(t3, o2);
          }) : (i.Log.error("OidcClient.processSigninResponse: No state in response"), Promise.reject(new Error("No state in response")));
        }, "processSigninResponse"), OidcClient.prototype.createSignoutRequest = /* @__PURE__ */ __name(function createSignoutRequest() {
          var e2 = this, t2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, r2 = t2.id_token_hint, n2 = t2.data, o2 = t2.state, s2 = t2.post_logout_redirect_uri, a2 = arguments[1];
          return i.Log.debug("OidcClient.createSignoutRequest"), s2 = s2 || this._settings.post_logout_redirect_uri, this._metadataService.getEndSessionEndpoint().then(function(t3) {
            if (!t3)
              throw i.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"), new Error("no end session endpoint");
            i.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint", t3);
            var u2 = new c.SignoutRequest({url: t3, id_token_hint: r2, post_logout_redirect_uri: s2, data: n2 || o2}), h2 = u2.state;
            return h2 && (i.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"), (a2 = a2 || e2._stateStore).set(h2.id, h2.toStorageString())), u2;
          });
        }, "createSignoutRequest"), OidcClient.prototype.processSignoutResponse = /* @__PURE__ */ __name(function processSignoutResponse(e2, t2) {
          var r2 = this;
          i.Log.debug("OidcClient.processSignoutResponse");
          var n2 = new h.SignoutResponse(e2);
          if (!n2.state)
            return i.Log.debug("OidcClient.processSignoutResponse: No state in response"), n2.error ? (i.Log.warn("OidcClient.processSignoutResponse: Response was error: ", n2.error), Promise.reject(new s.ErrorResponse(n2))) : Promise.resolve(n2);
          var o2 = n2.state;
          return (t2 = t2 || this._stateStore).remove(o2).then(function(e3) {
            if (!e3)
              throw i.Log.error("OidcClient.processSignoutResponse: No matching state found in storage"), new Error("No matching state found in storage");
            var t3 = f.State.fromStorageString(e3);
            return i.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"), r2._validator.validateSignoutResponse(t3, n2);
          });
        }, "processSignoutResponse"), OidcClient.prototype.clearStaleState = /* @__PURE__ */ __name(function clearStaleState(e2) {
          return i.Log.debug("OidcClient.clearStaleState"), e2 = e2 || this._stateStore, f.State.clearStaleState(e2, this.settings.staleStateAge);
        }, "clearStaleState"), n(OidcClient, [{key: "_stateStore", get: /* @__PURE__ */ __name(function get() {
          return this.settings.stateStore;
        }, "get")}, {key: "_validator", get: /* @__PURE__ */ __name(function get() {
          return this.settings.validator;
        }, "get")}, {key: "_metadataService", get: /* @__PURE__ */ __name(function get() {
          return this.settings.metadataService;
        }, "get")}, {key: "settings", get: /* @__PURE__ */ __name(function get() {
          return this._settings;
        }, "get")}, {key: "metadataService", get: /* @__PURE__ */ __name(function get() {
          return this._metadataService;
        }, "get")}]), OidcClient;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.CordovaIFrameNavigator = void 0;
      var n = r(9);
      t.CordovaIFrameNavigator = function() {
        function CordovaIFrameNavigator() {
          !(/* @__PURE__ */ __name(function _classCallCheck(e2, t2) {
            if (!(e2 instanceof t2))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, CordovaIFrameNavigator);
        }
        __name(CordovaIFrameNavigator, "CordovaIFrameNavigator");
        return CordovaIFrameNavigator.prototype.prepare = /* @__PURE__ */ __name(function prepare(e2) {
          e2.popupWindowFeatures = "hidden=yes";
          var t2 = new n.CordovaPopupWindow(e2);
          return Promise.resolve(t2);
        }, "prepare"), CordovaIFrameNavigator;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.CordovaPopupNavigator = void 0;
      var n = r(9);
      t.CordovaPopupNavigator = function() {
        function CordovaPopupNavigator() {
          !(/* @__PURE__ */ __name(function _classCallCheck(e2, t2) {
            if (!(e2 instanceof t2))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, CordovaPopupNavigator);
        }
        __name(CordovaPopupNavigator, "CordovaPopupNavigator");
        return CordovaPopupNavigator.prototype.prepare = /* @__PURE__ */ __name(function prepare(e2) {
          var t2 = new n.CordovaPopupWindow(e2);
          return Promise.resolve(t2);
        }, "prepare"), CordovaPopupNavigator;
      }();
    }, function(e, t) {
      function webpackEmptyContext(e2) {
        var t2 = new Error("Cannot find module '" + e2 + "'");
        throw t2.code = "MODULE_NOT_FOUND", t2;
      }
      __name(webpackEmptyContext, "webpackEmptyContext");
      webpackEmptyContext.keys = function() {
        return [];
      }, webpackEmptyContext.resolve = webpackEmptyContext, e.exports = webpackEmptyContext, webpackEmptyContext.id = 23;
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.SilentRenewService = void 0;
      var n = r(0);
      t.SilentRenewService = function() {
        function SilentRenewService(e2) {
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t2) {
            if (!(e3 instanceof t2))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, SilentRenewService), this._userManager = e2;
        }
        __name(SilentRenewService, "SilentRenewService");
        return SilentRenewService.prototype.start = /* @__PURE__ */ __name(function start() {
          this._callback || (this._callback = this._tokenExpiring.bind(this), this._userManager.events.addAccessTokenExpiring(this._callback), this._userManager.getUser().then(function(e2) {
          }).catch(function(e2) {
            n.Log.error("SilentRenewService.start: Error from getUser:", e2.message);
          }));
        }, "start"), SilentRenewService.prototype.stop = /* @__PURE__ */ __name(function stop() {
          this._callback && (this._userManager.events.removeAccessTokenExpiring(this._callback), delete this._callback);
        }, "stop"), SilentRenewService.prototype._tokenExpiring = /* @__PURE__ */ __name(function _tokenExpiring() {
          var e2 = this;
          this._userManager.signinSilent().then(function(e3) {
            n.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful");
          }, function(t2) {
            n.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:", t2.message), e2._userManager.events._raiseSilentRenewError(t2);
          });
        }, "_tokenExpiring"), SilentRenewService;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.Timer = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(0), o = r(1), s = r(13);
      t.Timer = function(e2) {
        function Timer(t2) {
          var r2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : o.Global.timer, n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0;
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, Timer);
          var i2 = (/* @__PURE__ */ __name(function _possibleConstructorReturn(e3, t3) {
            if (!e3)
              throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t3 || typeof t3 != "object" && typeof t3 != "function" ? e3 : t3;
          }, "_possibleConstructorReturn"))(this, e2.call(this, t2));
          return i2._timer = r2, i2._nowFunc = n2 || function() {
            return Date.now() / 1e3;
          }, i2;
        }
        __name(Timer, "Timer");
        return (/* @__PURE__ */ __name(function _inherits(e3, t2) {
          if (typeof t2 != "function" && t2 !== null)
            throw new TypeError("Super expression must either be null or a function, not " + typeof t2);
          e3.prototype = Object.create(t2 && t2.prototype, {constructor: {value: e3, enumerable: false, writable: true, configurable: true}}), t2 && (Object.setPrototypeOf ? Object.setPrototypeOf(e3, t2) : e3.__proto__ = t2);
        }, "_inherits"))(Timer, e2), Timer.prototype.init = /* @__PURE__ */ __name(function init(e3) {
          e3 <= 0 && (e3 = 1), e3 = parseInt(e3);
          var t2 = this.now + e3;
          if (this.expiration === t2 && this._timerHandle)
            i.Log.debug("Timer.init timer " + this._name + " skipping initialization since already initialized for expiration:", this.expiration);
          else {
            this.cancel(), i.Log.debug("Timer.init timer " + this._name + " for duration:", e3), this._expiration = t2;
            var r2 = 5;
            e3 < r2 && (r2 = e3), this._timerHandle = this._timer.setInterval(this._callback.bind(this), 1e3 * r2);
          }
        }, "init"), Timer.prototype.cancel = /* @__PURE__ */ __name(function cancel() {
          this._timerHandle && (i.Log.debug("Timer.cancel: ", this._name), this._timer.clearInterval(this._timerHandle), this._timerHandle = null);
        }, "cancel"), Timer.prototype._callback = /* @__PURE__ */ __name(function _callback() {
          var t2 = this._expiration - this.now;
          i.Log.debug("Timer.callback; " + this._name + " timer expires in:", t2), this._expiration <= this.now && (this.cancel(), e2.prototype.raise.call(this));
        }, "_callback"), n(Timer, [{key: "now", get: /* @__PURE__ */ __name(function get() {
          return parseInt(this._nowFunc());
        }, "get")}, {key: "expiration", get: /* @__PURE__ */ __name(function get() {
          return this._expiration;
        }, "get")}]), Timer;
      }(s.Event);
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.UserManagerEvents = void 0;
      var n = r(0), i = r(14), o = r(13);
      t.UserManagerEvents = function(e2) {
        function UserManagerEvents(t2) {
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, UserManagerEvents);
          var r2 = (/* @__PURE__ */ __name(function _possibleConstructorReturn(e3, t3) {
            if (!e3)
              throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t3 || typeof t3 != "object" && typeof t3 != "function" ? e3 : t3;
          }, "_possibleConstructorReturn"))(this, e2.call(this, t2));
          return r2._userLoaded = new o.Event("User loaded"), r2._userUnloaded = new o.Event("User unloaded"), r2._silentRenewError = new o.Event("Silent renew error"), r2._userSignedOut = new o.Event("User signed out"), r2._userSessionChanged = new o.Event("User session changed"), r2;
        }
        __name(UserManagerEvents, "UserManagerEvents");
        return (/* @__PURE__ */ __name(function _inherits(e3, t2) {
          if (typeof t2 != "function" && t2 !== null)
            throw new TypeError("Super expression must either be null or a function, not " + typeof t2);
          e3.prototype = Object.create(t2 && t2.prototype, {constructor: {value: e3, enumerable: false, writable: true, configurable: true}}), t2 && (Object.setPrototypeOf ? Object.setPrototypeOf(e3, t2) : e3.__proto__ = t2);
        }, "_inherits"))(UserManagerEvents, e2), UserManagerEvents.prototype.load = /* @__PURE__ */ __name(function load(t2) {
          var r2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
          n.Log.debug("UserManagerEvents.load"), e2.prototype.load.call(this, t2), r2 && this._userLoaded.raise(t2);
        }, "load"), UserManagerEvents.prototype.unload = /* @__PURE__ */ __name(function unload() {
          n.Log.debug("UserManagerEvents.unload"), e2.prototype.unload.call(this), this._userUnloaded.raise();
        }, "unload"), UserManagerEvents.prototype.addUserLoaded = /* @__PURE__ */ __name(function addUserLoaded(e3) {
          this._userLoaded.addHandler(e3);
        }, "addUserLoaded"), UserManagerEvents.prototype.removeUserLoaded = /* @__PURE__ */ __name(function removeUserLoaded(e3) {
          this._userLoaded.removeHandler(e3);
        }, "removeUserLoaded"), UserManagerEvents.prototype.addUserUnloaded = /* @__PURE__ */ __name(function addUserUnloaded(e3) {
          this._userUnloaded.addHandler(e3);
        }, "addUserUnloaded"), UserManagerEvents.prototype.removeUserUnloaded = /* @__PURE__ */ __name(function removeUserUnloaded(e3) {
          this._userUnloaded.removeHandler(e3);
        }, "removeUserUnloaded"), UserManagerEvents.prototype.addSilentRenewError = /* @__PURE__ */ __name(function addSilentRenewError(e3) {
          this._silentRenewError.addHandler(e3);
        }, "addSilentRenewError"), UserManagerEvents.prototype.removeSilentRenewError = /* @__PURE__ */ __name(function removeSilentRenewError(e3) {
          this._silentRenewError.removeHandler(e3);
        }, "removeSilentRenewError"), UserManagerEvents.prototype._raiseSilentRenewError = /* @__PURE__ */ __name(function _raiseSilentRenewError(e3) {
          n.Log.debug("UserManagerEvents._raiseSilentRenewError", e3.message), this._silentRenewError.raise(e3);
        }, "_raiseSilentRenewError"), UserManagerEvents.prototype.addUserSignedOut = /* @__PURE__ */ __name(function addUserSignedOut(e3) {
          this._userSignedOut.addHandler(e3);
        }, "addUserSignedOut"), UserManagerEvents.prototype.removeUserSignedOut = /* @__PURE__ */ __name(function removeUserSignedOut(e3) {
          this._userSignedOut.removeHandler(e3);
        }, "removeUserSignedOut"), UserManagerEvents.prototype._raiseUserSignedOut = /* @__PURE__ */ __name(function _raiseUserSignedOut(e3) {
          n.Log.debug("UserManagerEvents._raiseUserSignedOut"), this._userSignedOut.raise(e3);
        }, "_raiseUserSignedOut"), UserManagerEvents.prototype.addUserSessionChanged = /* @__PURE__ */ __name(function addUserSessionChanged(e3) {
          this._userSessionChanged.addHandler(e3);
        }, "addUserSessionChanged"), UserManagerEvents.prototype.removeUserSessionChanged = /* @__PURE__ */ __name(function removeUserSessionChanged(e3) {
          this._userSessionChanged.removeHandler(e3);
        }, "removeUserSessionChanged"), UserManagerEvents.prototype._raiseUserSessionChanged = /* @__PURE__ */ __name(function _raiseUserSessionChanged(e3) {
          n.Log.debug("UserManagerEvents._raiseUserSessionChanged"), this._userSessionChanged.raise(e3);
        }, "_raiseUserSessionChanged"), UserManagerEvents;
      }(i.AccessTokenEvents);
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.IFrameWindow = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(0);
      t.IFrameWindow = function() {
        function IFrameWindow(e2) {
          var t2 = this;
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, IFrameWindow), this._promise = new Promise(function(e3, r2) {
            t2._resolve = e3, t2._reject = r2;
          }), this._boundMessageEvent = this._message.bind(this), window.addEventListener("message", this._boundMessageEvent, false), this._frame = window.document.createElement("iframe"), this._frame.style.visibility = "hidden", this._frame.style.position = "absolute", this._frame.style.display = "none", this._frame.style.width = 0, this._frame.style.height = 0, window.document.body.appendChild(this._frame);
        }
        __name(IFrameWindow, "IFrameWindow");
        return IFrameWindow.prototype.navigate = /* @__PURE__ */ __name(function navigate(e2) {
          if (e2 && e2.url) {
            var t2 = e2.silentRequestTimeout || 1e4;
            i.Log.debug("IFrameWindow.navigate: Using timeout of:", t2), this._timer = window.setTimeout(this._timeout.bind(this), t2), this._frame.src = e2.url;
          } else
            this._error("No url provided");
          return this.promise;
        }, "navigate"), IFrameWindow.prototype._success = /* @__PURE__ */ __name(function _success(e2) {
          this._cleanup(), i.Log.debug("IFrameWindow: Successful response from frame window"), this._resolve(e2);
        }, "_success"), IFrameWindow.prototype._error = /* @__PURE__ */ __name(function _error(e2) {
          this._cleanup(), i.Log.error(e2), this._reject(new Error(e2));
        }, "_error"), IFrameWindow.prototype.close = /* @__PURE__ */ __name(function close() {
          this._cleanup();
        }, "close"), IFrameWindow.prototype._cleanup = /* @__PURE__ */ __name(function _cleanup() {
          this._frame && (i.Log.debug("IFrameWindow: cleanup"), window.removeEventListener("message", this._boundMessageEvent, false), window.clearTimeout(this._timer), window.document.body.removeChild(this._frame), this._timer = null, this._frame = null, this._boundMessageEvent = null);
        }, "_cleanup"), IFrameWindow.prototype._timeout = /* @__PURE__ */ __name(function _timeout() {
          i.Log.debug("IFrameWindow.timeout"), this._error("Frame window timed out");
        }, "_timeout"), IFrameWindow.prototype._message = /* @__PURE__ */ __name(function _message(e2) {
          if (i.Log.debug("IFrameWindow.message"), this._timer && e2.origin === this._origin && e2.source === this._frame.contentWindow) {
            var t2 = e2.data;
            t2 ? this._success({url: t2}) : this._error("Invalid response from frame");
          }
        }, "_message"), IFrameWindow.notifyParent = /* @__PURE__ */ __name(function notifyParent(e2) {
          i.Log.debug("IFrameWindow.notifyParent"), window.parent && window !== window.parent && (e2 = e2 || window.location.href) && (i.Log.debug("IFrameWindow.notifyParent: posting url message to parent"), window.parent.postMessage(e2, location.protocol + "//" + location.host));
        }, "notifyParent"), n(IFrameWindow, [{key: "promise", get: /* @__PURE__ */ __name(function get() {
          return this._promise;
        }, "get")}, {key: "_origin", get: /* @__PURE__ */ __name(function get() {
          return location.protocol + "//" + location.host;
        }, "get")}]), IFrameWindow;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.IFrameNavigator = void 0;
      var n = r(0), i = r(27);
      t.IFrameNavigator = function() {
        function IFrameNavigator() {
          !(/* @__PURE__ */ __name(function _classCallCheck(e2, t2) {
            if (!(e2 instanceof t2))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, IFrameNavigator);
        }
        __name(IFrameNavigator, "IFrameNavigator");
        return IFrameNavigator.prototype.prepare = /* @__PURE__ */ __name(function prepare(e2) {
          var t2 = new i.IFrameWindow(e2);
          return Promise.resolve(t2);
        }, "prepare"), IFrameNavigator.prototype.callback = /* @__PURE__ */ __name(function callback(e2) {
          n.Log.debug("IFrameNavigator.callback");
          try {
            return i.IFrameWindow.notifyParent(e2), Promise.resolve();
          } catch (e3) {
            return Promise.reject(e3);
          }
        }, "callback"), IFrameNavigator;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.PopupWindow = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(0), o = r(3);
      var s = 500, a = "location=no,toolbar=no,width=500,height=500,left=100,top=100;", u = "_blank";
      t.PopupWindow = function() {
        function PopupWindow(e2) {
          var t2 = this;
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, PopupWindow), this._promise = new Promise(function(e3, r3) {
            t2._resolve = e3, t2._reject = r3;
          });
          var r2 = e2.popupWindowTarget || u, n2 = e2.popupWindowFeatures || a;
          this._popup = window.open("", r2, n2), this._popup && (i.Log.debug("PopupWindow.ctor: popup successfully created"), this._checkForPopupClosedTimer = window.setInterval(this._checkForPopupClosed.bind(this), s));
        }
        __name(PopupWindow, "PopupWindow");
        return PopupWindow.prototype.navigate = /* @__PURE__ */ __name(function navigate(e2) {
          return this._popup ? e2 && e2.url ? (i.Log.debug("PopupWindow.navigate: Setting URL in popup"), this._id = e2.id, this._id && (window["popupCallback_" + e2.id] = this._callback.bind(this)), this._popup.focus(), this._popup.window.location = e2.url) : (this._error("PopupWindow.navigate: no url provided"), this._error("No url provided")) : this._error("PopupWindow.navigate: Error opening popup window"), this.promise;
        }, "navigate"), PopupWindow.prototype._success = /* @__PURE__ */ __name(function _success(e2) {
          i.Log.debug("PopupWindow.callback: Successful response from popup window"), this._cleanup(), this._resolve(e2);
        }, "_success"), PopupWindow.prototype._error = /* @__PURE__ */ __name(function _error(e2) {
          i.Log.error("PopupWindow.error: ", e2), this._cleanup(), this._reject(new Error(e2));
        }, "_error"), PopupWindow.prototype.close = /* @__PURE__ */ __name(function close() {
          this._cleanup(false);
        }, "close"), PopupWindow.prototype._cleanup = /* @__PURE__ */ __name(function _cleanup(e2) {
          i.Log.debug("PopupWindow.cleanup"), window.clearInterval(this._checkForPopupClosedTimer), this._checkForPopupClosedTimer = null, delete window["popupCallback_" + this._id], this._popup && !e2 && this._popup.close(), this._popup = null;
        }, "_cleanup"), PopupWindow.prototype._checkForPopupClosed = /* @__PURE__ */ __name(function _checkForPopupClosed() {
          this._popup && !this._popup.closed || this._error("Popup window closed");
        }, "_checkForPopupClosed"), PopupWindow.prototype._callback = /* @__PURE__ */ __name(function _callback(e2, t2) {
          this._cleanup(t2), e2 ? (i.Log.debug("PopupWindow.callback success"), this._success({url: e2})) : (i.Log.debug("PopupWindow.callback: Invalid response from popup"), this._error("Invalid response from popup"));
        }, "_callback"), PopupWindow.notifyOpener = /* @__PURE__ */ __name(function notifyOpener(e2, t2, r2) {
          if (window.opener) {
            if (e2 = e2 || window.location.href) {
              var n2 = o.UrlUtility.parseUrlFragment(e2, r2);
              if (n2.state) {
                var s2 = "popupCallback_" + n2.state, a2 = window.opener[s2];
                a2 ? (i.Log.debug("PopupWindow.notifyOpener: passing url message to opener"), a2(e2, t2)) : i.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener");
              } else
                i.Log.warn("PopupWindow.notifyOpener: no state found in response url");
            }
          } else
            i.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.");
        }, "notifyOpener"), n(PopupWindow, [{key: "promise", get: /* @__PURE__ */ __name(function get() {
          return this._promise;
        }, "get")}]), PopupWindow;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.PopupNavigator = void 0;
      var n = r(0), i = r(29);
      t.PopupNavigator = function() {
        function PopupNavigator() {
          !(/* @__PURE__ */ __name(function _classCallCheck(e2, t2) {
            if (!(e2 instanceof t2))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, PopupNavigator);
        }
        __name(PopupNavigator, "PopupNavigator");
        return PopupNavigator.prototype.prepare = /* @__PURE__ */ __name(function prepare(e2) {
          var t2 = new i.PopupWindow(e2);
          return Promise.resolve(t2);
        }, "prepare"), PopupNavigator.prototype.callback = /* @__PURE__ */ __name(function callback(e2, t2, r2) {
          n.Log.debug("PopupNavigator.callback");
          try {
            return i.PopupWindow.notifyOpener(e2, t2, r2), Promise.resolve();
          } catch (e3) {
            return Promise.reject(e3);
          }
        }, "callback"), PopupNavigator;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.RedirectNavigator = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(0);
      t.RedirectNavigator = function() {
        function RedirectNavigator() {
          !(/* @__PURE__ */ __name(function _classCallCheck(e2, t2) {
            if (!(e2 instanceof t2))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, RedirectNavigator);
        }
        __name(RedirectNavigator, "RedirectNavigator");
        return RedirectNavigator.prototype.prepare = /* @__PURE__ */ __name(function prepare() {
          return Promise.resolve(this);
        }, "prepare"), RedirectNavigator.prototype.navigate = /* @__PURE__ */ __name(function navigate(e2) {
          return e2 && e2.url ? (window.location = e2.url, Promise.resolve()) : (i.Log.error("RedirectNavigator.navigate: No url provided"), Promise.reject(new Error("No url provided")));
        }, "navigate"), n(RedirectNavigator, [{key: "url", get: /* @__PURE__ */ __name(function get() {
          return window.location.href;
        }, "get")}]), RedirectNavigator;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.UserManagerSettings = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = (r(0), r(8)), o = r(31), s = r(30), a = r(28), u = r(7), c = r(1);
      var h = 60, l = 2e3, f = "id_token";
      t.UserManagerSettings = function(e2) {
        function UserManagerSettings() {
          var t2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, r2 = t2.popup_redirect_uri, n2 = t2.popup_post_logout_redirect_uri, i2 = t2.popupWindowFeatures, g = t2.popupWindowTarget, p = t2.silent_redirect_uri, d = t2.silentRequestTimeout, v = t2.automaticSilentRenew, y = v !== void 0 && v, m = t2.includeIdTokenInSilentRenew, _ = m === void 0 || m, S = t2.monitorSession, b = S === void 0 || S, F = t2.checkSessionInterval, w = F === void 0 ? l : F, E = t2.stopCheckSessionOnError, x = E === void 0 || E, C = t2.query_status_response_type, k = C === void 0 ? f : C, A = t2.revokeAccessTokenOnSignout, P = A !== void 0 && A, I = t2.accessTokenExpiringNotificationTime, B = I === void 0 ? h : I, R = t2.redirectNavigator, T = R === void 0 ? new o.RedirectNavigator() : R, U = t2.popupNavigator, D = U === void 0 ? new s.PopupNavigator() : U, M = t2.iframeNavigator, L = M === void 0 ? new a.IFrameNavigator() : M, N = t2.userStore, O = N === void 0 ? new u.WebStorageStateStore({store: c.Global.sessionStorage}) : N;
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, UserManagerSettings);
          var H = (/* @__PURE__ */ __name(function _possibleConstructorReturn(e3, t3) {
            if (!e3)
              throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t3 || typeof t3 != "object" && typeof t3 != "function" ? e3 : t3;
          }, "_possibleConstructorReturn"))(this, e2.call(this, arguments[0]));
          return H._popup_redirect_uri = r2, H._popup_post_logout_redirect_uri = n2, H._popupWindowFeatures = i2, H._popupWindowTarget = g, H._silent_redirect_uri = p, H._silentRequestTimeout = d, H._automaticSilentRenew = !!y, H._includeIdTokenInSilentRenew = _, H._accessTokenExpiringNotificationTime = B, H._monitorSession = b, H._checkSessionInterval = w, H._stopCheckSessionOnError = x, H._query_status_response_type = k, H._revokeAccessTokenOnSignout = P, H._redirectNavigator = T, H._popupNavigator = D, H._iframeNavigator = L, H._userStore = O, H;
        }
        __name(UserManagerSettings, "UserManagerSettings");
        return (/* @__PURE__ */ __name(function _inherits(e3, t2) {
          if (typeof t2 != "function" && t2 !== null)
            throw new TypeError("Super expression must either be null or a function, not " + typeof t2);
          e3.prototype = Object.create(t2 && t2.prototype, {constructor: {value: e3, enumerable: false, writable: true, configurable: true}}), t2 && (Object.setPrototypeOf ? Object.setPrototypeOf(e3, t2) : e3.__proto__ = t2);
        }, "_inherits"))(UserManagerSettings, e2), n(UserManagerSettings, [{key: "popup_redirect_uri", get: /* @__PURE__ */ __name(function get() {
          return this._popup_redirect_uri;
        }, "get")}, {key: "popup_post_logout_redirect_uri", get: /* @__PURE__ */ __name(function get() {
          return this._popup_post_logout_redirect_uri;
        }, "get")}, {key: "popupWindowFeatures", get: /* @__PURE__ */ __name(function get() {
          return this._popupWindowFeatures;
        }, "get")}, {key: "popupWindowTarget", get: /* @__PURE__ */ __name(function get() {
          return this._popupWindowTarget;
        }, "get")}, {key: "silent_redirect_uri", get: /* @__PURE__ */ __name(function get() {
          return this._silent_redirect_uri;
        }, "get")}, {key: "silentRequestTimeout", get: /* @__PURE__ */ __name(function get() {
          return this._silentRequestTimeout;
        }, "get")}, {key: "automaticSilentRenew", get: /* @__PURE__ */ __name(function get() {
          return !(!this.silent_redirect_uri || !this._automaticSilentRenew);
        }, "get")}, {key: "includeIdTokenInSilentRenew", get: /* @__PURE__ */ __name(function get() {
          return this._includeIdTokenInSilentRenew;
        }, "get")}, {key: "accessTokenExpiringNotificationTime", get: /* @__PURE__ */ __name(function get() {
          return this._accessTokenExpiringNotificationTime;
        }, "get")}, {key: "monitorSession", get: /* @__PURE__ */ __name(function get() {
          return this._monitorSession;
        }, "get")}, {key: "checkSessionInterval", get: /* @__PURE__ */ __name(function get() {
          return this._checkSessionInterval;
        }, "get")}, {key: "stopCheckSessionOnError", get: /* @__PURE__ */ __name(function get() {
          return this._stopCheckSessionOnError;
        }, "get")}, {key: "query_status_response_type", get: /* @__PURE__ */ __name(function get() {
          return this._query_status_response_type;
        }, "get")}, {key: "revokeAccessTokenOnSignout", get: /* @__PURE__ */ __name(function get() {
          return this._revokeAccessTokenOnSignout;
        }, "get")}, {key: "redirectNavigator", get: /* @__PURE__ */ __name(function get() {
          return this._redirectNavigator;
        }, "get")}, {key: "popupNavigator", get: /* @__PURE__ */ __name(function get() {
          return this._popupNavigator;
        }, "get")}, {key: "iframeNavigator", get: /* @__PURE__ */ __name(function get() {
          return this._iframeNavigator;
        }, "get")}, {key: "userStore", get: /* @__PURE__ */ __name(function get() {
          return this._userStore;
        }, "get")}]), UserManagerSettings;
      }(i.OidcClientSettings);
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.UserManager = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(0), o = r(20), s = r(32), a = r(15), u = r(26), c = r(24), h = r(12), l = r(10), f = r(19), g = r(5);
      t.UserManager = function(e2) {
        function UserManager() {
          var t2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, r2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : c.SilentRenewService, n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : h.SessionMonitor, o2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : l.TokenRevocationClient, a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : f.TokenClient, p = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : g.JoseUtil;
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, UserManager), t2 instanceof s.UserManagerSettings || (t2 = new s.UserManagerSettings(t2));
          var d = (/* @__PURE__ */ __name(function _possibleConstructorReturn(e3, t3) {
            if (!e3)
              throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t3 || typeof t3 != "object" && typeof t3 != "function" ? e3 : t3;
          }, "_possibleConstructorReturn"))(this, e2.call(this, t2));
          return d._events = new u.UserManagerEvents(t2), d._silentRenewService = new r2(d), d.settings.automaticSilentRenew && (i.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"), d.startSilentRenew()), d.settings.monitorSession && (i.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"), d._sessionMonitor = new n2(d)), d._tokenRevocationClient = new o2(d._settings), d._tokenClient = new a2(d._settings), d._joseUtil = p, d;
        }
        __name(UserManager, "UserManager");
        return (/* @__PURE__ */ __name(function _inherits(e3, t2) {
          if (typeof t2 != "function" && t2 !== null)
            throw new TypeError("Super expression must either be null or a function, not " + typeof t2);
          e3.prototype = Object.create(t2 && t2.prototype, {constructor: {value: e3, enumerable: false, writable: true, configurable: true}}), t2 && (Object.setPrototypeOf ? Object.setPrototypeOf(e3, t2) : e3.__proto__ = t2);
        }, "_inherits"))(UserManager, e2), UserManager.prototype.getUser = /* @__PURE__ */ __name(function getUser() {
          var e3 = this;
          return this._loadUser().then(function(t2) {
            return t2 ? (i.Log.info("UserManager.getUser: user loaded"), e3._events.load(t2, false), t2) : (i.Log.info("UserManager.getUser: user not found in storage"), null);
          });
        }, "getUser"), UserManager.prototype.removeUser = /* @__PURE__ */ __name(function removeUser() {
          var e3 = this;
          return this.storeUser(null).then(function() {
            i.Log.info("UserManager.removeUser: user removed from storage"), e3._events.unload();
          });
        }, "removeUser"), UserManager.prototype.signinRedirect = /* @__PURE__ */ __name(function signinRedirect(e3) {
          return this._signinStart(e3, this._redirectNavigator).then(function() {
            i.Log.info("UserManager.signinRedirect: successful");
          });
        }, "signinRedirect"), UserManager.prototype.signinRedirectCallback = /* @__PURE__ */ __name(function signinRedirectCallback(e3) {
          return this._signinEnd(e3 || this._redirectNavigator.url).then(function(e4) {
            return e4 && (e4.profile && e4.profile.sub ? i.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ", e4.profile.sub) : i.Log.info("UserManager.signinRedirectCallback: no sub")), e4;
          });
        }, "signinRedirectCallback"), UserManager.prototype.signinPopup = /* @__PURE__ */ __name(function signinPopup() {
          var e3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t2 = e3.redirect_uri || this.settings.popup_redirect_uri || this.settings.redirect_uri;
          return t2 ? (e3.redirect_uri = t2, e3.display = "popup", this._signin(e3, this._popupNavigator, {startUrl: t2, popupWindowFeatures: e3.popupWindowFeatures || this.settings.popupWindowFeatures, popupWindowTarget: e3.popupWindowTarget || this.settings.popupWindowTarget}).then(function(e4) {
            return e4 && (e4.profile && e4.profile.sub ? i.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ", e4.profile.sub) : i.Log.info("UserManager.signinPopup: no sub")), e4;
          })) : (i.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"), Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")));
        }, "signinPopup"), UserManager.prototype.signinPopupCallback = /* @__PURE__ */ __name(function signinPopupCallback(e3) {
          return this._signinCallback(e3, this._popupNavigator).then(function(e4) {
            return e4 && (e4.profile && e4.profile.sub ? i.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ", e4.profile.sub) : i.Log.info("UserManager.signinPopupCallback: no sub")), e4;
          }).catch(function(e4) {
            i.Log.error("UserManager.signinPopupCallback error: " + e4 && e4.message);
          });
        }, "signinPopupCallback"), UserManager.prototype.signinSilent = /* @__PURE__ */ __name(function signinSilent() {
          var e3 = this, t2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          return this._loadUser().then(function(r2) {
            return r2 && r2.refresh_token ? (t2.refresh_token = r2.refresh_token, e3._useRefreshToken(t2)) : (t2.id_token_hint = t2.id_token_hint || e3.settings.includeIdTokenInSilentRenew && r2 && r2.id_token, e3._signinSilentIframe(t2));
          });
        }, "signinSilent"), UserManager.prototype._useRefreshToken = /* @__PURE__ */ __name(function _useRefreshToken() {
          var e3 = this, t2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          return this._tokenClient.exchangeRefreshToken(t2).then(function(t3) {
            return t3 ? t3.access_token ? e3._loadUser().then(function(r2) {
              if (r2) {
                var n2 = Promise.resolve();
                return t3.id_token && (n2 = e3._validateIdTokenFromTokenRefreshToken(r2.profile, t3.id_token)), n2.then(function() {
                  return i.Log.debug("UserManager._useRefreshToken: refresh token response success"), r2.access_token = t3.access_token, r2.refresh_token = t3.refresh_token || r2.refresh_token, r2.expires_in = t3.expires_in, e3.storeUser(r2).then(function() {
                    return e3._events.load(r2), r2;
                  });
                });
              }
              return null;
            }) : (i.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"), Promise.reject("No access token returned from token endpoint")) : (i.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"), Promise.reject("No response returned from token endpoint"));
          });
        }, "_useRefreshToken"), UserManager.prototype._validateIdTokenFromTokenRefreshToken = /* @__PURE__ */ __name(function _validateIdTokenFromTokenRefreshToken(e3, t2) {
          var r2 = this;
          return this._metadataService.getIssuer().then(function(n2) {
            return r2._joseUtil.validateJwtAttributes(t2, n2, r2._settings.client_id, r2._settings.clockSkew).then(function(t3) {
              return t3 ? t3.sub !== e3.sub ? (i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"), Promise.reject(new Error("sub in id_token does not match current sub"))) : t3.auth_time && t3.auth_time !== e3.auth_time ? (i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"), Promise.reject(new Error("auth_time in id_token does not match original auth_time"))) : t3.azp && t3.azp !== e3.azp ? (i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"), Promise.reject(new Error("azp in id_token does not match original azp"))) : !t3.azp && e3.azp ? (i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"), Promise.reject(new Error("azp not in id_token, but present in original id_token"))) : void 0 : (i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"), Promise.reject(new Error("Failed to validate id_token")));
            });
          });
        }, "_validateIdTokenFromTokenRefreshToken"), UserManager.prototype._signinSilentIframe = /* @__PURE__ */ __name(function _signinSilentIframe() {
          var e3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t2 = e3.redirect_uri || this.settings.silent_redirect_uri;
          return t2 ? (e3.redirect_uri = t2, e3.prompt = e3.prompt || "none", this._signin(e3, this._iframeNavigator, {startUrl: t2, silentRequestTimeout: e3.silentRequestTimeout || this.settings.silentRequestTimeout}).then(function(e4) {
            return e4 && (e4.profile && e4.profile.sub ? i.Log.info("UserManager.signinSilent: successful, signed in sub: ", e4.profile.sub) : i.Log.info("UserManager.signinSilent: no sub")), e4;
          })) : (i.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"), Promise.reject(new Error("No silent_redirect_uri configured")));
        }, "_signinSilentIframe"), UserManager.prototype.signinSilentCallback = /* @__PURE__ */ __name(function signinSilentCallback(e3) {
          return this._signinCallback(e3, this._iframeNavigator).then(function(e4) {
            return e4 && (e4.profile && e4.profile.sub ? i.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ", e4.profile.sub) : i.Log.info("UserManager.signinSilentCallback: no sub")), e4;
          });
        }, "signinSilentCallback"), UserManager.prototype.querySessionStatus = /* @__PURE__ */ __name(function querySessionStatus() {
          var e3 = this, t2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, r2 = t2.redirect_uri || this.settings.silent_redirect_uri;
          return r2 ? (t2.redirect_uri = r2, t2.prompt = "none", t2.response_type = t2.response_type || this.settings.query_status_response_type, t2.scope = "openid", this._signinStart(t2, this._iframeNavigator, {startUrl: r2, silentRequestTimeout: t2.silentRequestTimeout || this.settings.silentRequestTimeout}).then(function(t3) {
            return e3.processSigninResponse(t3.url).then(function(e4) {
              if (i.Log.debug("UserManager.querySessionStatus: got signin response"), e4.session_state && e4.profile.sub)
                return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ", e4.profile.sub), {session_state: e4.session_state, sub: e4.profile.sub, sid: e4.profile.sid};
              i.Log.info("querySessionStatus successful, user not authenticated");
            });
          })) : (i.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"), Promise.reject(new Error("No silent_redirect_uri configured")));
        }, "querySessionStatus"), UserManager.prototype._signin = /* @__PURE__ */ __name(function _signin(e3, t2) {
          var r2 = this, n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
          return this._signinStart(e3, t2, n2).then(function(e4) {
            return r2._signinEnd(e4.url);
          });
        }, "_signin"), UserManager.prototype._signinStart = /* @__PURE__ */ __name(function _signinStart(e3, t2) {
          var r2 = this, n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
          return t2.prepare(n2).then(function(t3) {
            return i.Log.debug("UserManager._signinStart: got navigator window handle"), r2.createSigninRequest(e3).then(function(e4) {
              return i.Log.debug("UserManager._signinStart: got signin request"), n2.url = e4.url, n2.id = e4.state.id, t3.navigate(n2);
            }).catch(function(e4) {
              throw t3.close && (i.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"), t3.close()), e4;
            });
          });
        }, "_signinStart"), UserManager.prototype._signinEnd = /* @__PURE__ */ __name(function _signinEnd(e3) {
          var t2 = this;
          return this.processSigninResponse(e3).then(function(e4) {
            i.Log.debug("UserManager._signinEnd: got signin response");
            var r2 = new a.User(e4);
            return t2.storeUser(r2).then(function() {
              return i.Log.debug("UserManager._signinEnd: user stored"), t2._events.load(r2), r2;
            });
          });
        }, "_signinEnd"), UserManager.prototype._signinCallback = /* @__PURE__ */ __name(function _signinCallback(e3, t2) {
          return i.Log.debug("UserManager._signinCallback"), t2.callback(e3);
        }, "_signinCallback"), UserManager.prototype.signoutRedirect = /* @__PURE__ */ __name(function signoutRedirect() {
          var e3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t2 = e3.post_logout_redirect_uri || this.settings.post_logout_redirect_uri;
          return t2 && (e3.post_logout_redirect_uri = t2), this._signoutStart(e3, this._redirectNavigator).then(function() {
            i.Log.info("UserManager.signoutRedirect: successful");
          });
        }, "signoutRedirect"), UserManager.prototype.signoutRedirectCallback = /* @__PURE__ */ __name(function signoutRedirectCallback(e3) {
          return this._signoutEnd(e3 || this._redirectNavigator.url).then(function(e4) {
            return i.Log.info("UserManager.signoutRedirectCallback: successful"), e4;
          });
        }, "signoutRedirectCallback"), UserManager.prototype.signoutPopup = /* @__PURE__ */ __name(function signoutPopup() {
          var e3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t2 = e3.post_logout_redirect_uri || this.settings.popup_post_logout_redirect_uri || this.settings.post_logout_redirect_uri;
          return e3.post_logout_redirect_uri = t2, e3.display = "popup", e3.post_logout_redirect_uri && (e3.state = e3.state || {}), this._signout(e3, this._popupNavigator, {startUrl: t2, popupWindowFeatures: e3.popupWindowFeatures || this.settings.popupWindowFeatures, popupWindowTarget: e3.popupWindowTarget || this.settings.popupWindowTarget}).then(function() {
            i.Log.info("UserManager.signoutPopup: successful");
          });
        }, "signoutPopup"), UserManager.prototype.signoutPopupCallback = /* @__PURE__ */ __name(function signoutPopupCallback(e3, t2) {
          t2 === void 0 && typeof e3 == "boolean" && (t2 = e3, e3 = null);
          return this._popupNavigator.callback(e3, t2, "?").then(function() {
            i.Log.info("UserManager.signoutPopupCallback: successful");
          });
        }, "signoutPopupCallback"), UserManager.prototype._signout = /* @__PURE__ */ __name(function _signout(e3, t2) {
          var r2 = this, n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
          return this._signoutStart(e3, t2, n2).then(function(e4) {
            return r2._signoutEnd(e4.url);
          });
        }, "_signout"), UserManager.prototype._signoutStart = /* @__PURE__ */ __name(function _signoutStart() {
          var e3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t2 = this, r2 = arguments[1], n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
          return r2.prepare(n2).then(function(r3) {
            return i.Log.debug("UserManager._signoutStart: got navigator window handle"), t2._loadUser().then(function(o2) {
              return i.Log.debug("UserManager._signoutStart: loaded current user from storage"), (t2._settings.revokeAccessTokenOnSignout ? t2._revokeInternal(o2) : Promise.resolve()).then(function() {
                var s2 = e3.id_token_hint || o2 && o2.id_token;
                return s2 && (i.Log.debug("UserManager._signoutStart: Setting id_token into signout request"), e3.id_token_hint = s2), t2.removeUser().then(function() {
                  return i.Log.debug("UserManager._signoutStart: user removed, creating signout request"), t2.createSignoutRequest(e3).then(function(e4) {
                    return i.Log.debug("UserManager._signoutStart: got signout request"), n2.url = e4.url, e4.state && (n2.id = e4.state.id), r3.navigate(n2);
                  });
                });
              });
            }).catch(function(e4) {
              throw r3.close && (i.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"), r3.close()), e4;
            });
          });
        }, "_signoutStart"), UserManager.prototype._signoutEnd = /* @__PURE__ */ __name(function _signoutEnd(e3) {
          return this.processSignoutResponse(e3).then(function(e4) {
            return i.Log.debug("UserManager._signoutEnd: got signout response"), e4;
          });
        }, "_signoutEnd"), UserManager.prototype.revokeAccessToken = /* @__PURE__ */ __name(function revokeAccessToken() {
          var e3 = this;
          return this._loadUser().then(function(t2) {
            return e3._revokeInternal(t2, true).then(function(r2) {
              if (r2)
                return i.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"), t2.access_token = null, t2.refresh_token = null, t2.expires_at = null, t2.token_type = null, e3.storeUser(t2).then(function() {
                  i.Log.debug("UserManager.revokeAccessToken: user stored"), e3._events.load(t2);
                });
            });
          }).then(function() {
            i.Log.info("UserManager.revokeAccessToken: access token revoked successfully");
          });
        }, "revokeAccessToken"), UserManager.prototype._revokeInternal = /* @__PURE__ */ __name(function _revokeInternal(e3, t2) {
          var n2 = this;
          if (e3) {
            var o2 = e3.access_token, s2 = e3.refresh_token;
            return this._revokeAccessTokenInternal(o2, r(23)).then(function(e4) {
              return n2._revokeRefreshTokenInternal(s2, t2).then(function(t3) {
                return e4 || t3 || i.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"), e4 || t3;
              });
            });
          }
          return Promise.resolve(false);
        }, "_revokeInternal"), UserManager.prototype._revokeAccessTokenInternal = /* @__PURE__ */ __name(function _revokeAccessTokenInternal(e3, t2) {
          return !e3 || e3.indexOf(".") >= 0 ? Promise.resolve(false) : this._tokenRevocationClient.revoke(e3, t2).then(function() {
            return true;
          });
        }, "_revokeAccessTokenInternal"), UserManager.prototype._revokeRefreshTokenInternal = /* @__PURE__ */ __name(function _revokeRefreshTokenInternal(e3, t2) {
          return e3 ? this._tokenRevocationClient.revoke(e3, t2, "refresh_token").then(function() {
            return true;
          }) : Promise.resolve(false);
        }, "_revokeRefreshTokenInternal"), UserManager.prototype.startSilentRenew = /* @__PURE__ */ __name(function startSilentRenew() {
          this._silentRenewService.start();
        }, "startSilentRenew"), UserManager.prototype.stopSilentRenew = /* @__PURE__ */ __name(function stopSilentRenew() {
          this._silentRenewService.stop();
        }, "stopSilentRenew"), UserManager.prototype._loadUser = /* @__PURE__ */ __name(function _loadUser() {
          return this._userStore.get(this._userStoreKey).then(function(e3) {
            return e3 ? (i.Log.debug("UserManager._loadUser: user storageString loaded"), a.User.fromStorageString(e3)) : (i.Log.debug("UserManager._loadUser: no user storageString"), null);
          });
        }, "_loadUser"), UserManager.prototype.storeUser = /* @__PURE__ */ __name(function storeUser(e3) {
          if (e3) {
            i.Log.debug("UserManager.storeUser: storing user");
            var t2 = e3.toStorageString();
            return this._userStore.set(this._userStoreKey, t2);
          }
          return i.Log.debug("storeUser.storeUser: removing user"), this._userStore.remove(this._userStoreKey);
        }, "storeUser"), n(UserManager, [{key: "_redirectNavigator", get: /* @__PURE__ */ __name(function get() {
          return this.settings.redirectNavigator;
        }, "get")}, {key: "_popupNavigator", get: /* @__PURE__ */ __name(function get() {
          return this.settings.popupNavigator;
        }, "get")}, {key: "_iframeNavigator", get: /* @__PURE__ */ __name(function get() {
          return this.settings.iframeNavigator;
        }, "get")}, {key: "_userStore", get: /* @__PURE__ */ __name(function get() {
          return this.settings.userStore;
        }, "get")}, {key: "events", get: /* @__PURE__ */ __name(function get() {
          return this._events;
        }, "get")}, {key: "_userStoreKey", get: /* @__PURE__ */ __name(function get() {
          return "user:" + this.settings.authority + ":" + this.settings.client_id;
        }, "get")}]), UserManager;
      }(o.OidcClient);
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.InMemoryWebStorage = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(0);
      t.InMemoryWebStorage = function() {
        function InMemoryWebStorage() {
          !(/* @__PURE__ */ __name(function _classCallCheck(e2, t2) {
            if (!(e2 instanceof t2))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, InMemoryWebStorage), this._data = {};
        }
        __name(InMemoryWebStorage, "InMemoryWebStorage");
        return InMemoryWebStorage.prototype.getItem = /* @__PURE__ */ __name(function getItem(e2) {
          return i.Log.debug("InMemoryWebStorage.getItem", e2), this._data[e2];
        }, "getItem"), InMemoryWebStorage.prototype.setItem = /* @__PURE__ */ __name(function setItem(e2, t2) {
          i.Log.debug("InMemoryWebStorage.setItem", e2), this._data[e2] = t2;
        }, "setItem"), InMemoryWebStorage.prototype.removeItem = /* @__PURE__ */ __name(function removeItem(e2) {
          i.Log.debug("InMemoryWebStorage.removeItem", e2), delete this._data[e2];
        }, "removeItem"), InMemoryWebStorage.prototype.key = /* @__PURE__ */ __name(function key(e2) {
          return Object.getOwnPropertyNames(this._data)[e2];
        }, "key"), n(InMemoryWebStorage, [{key: "length", get: /* @__PURE__ */ __name(function get() {
          return Object.getOwnPropertyNames(this._data).length;
        }, "get")}]), InMemoryWebStorage;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.SignoutResponse = void 0;
      var n = r(3);
      t.SignoutResponse = /* @__PURE__ */ __name(function SignoutResponse(e2) {
        !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
          if (!(e3 instanceof t3))
            throw new TypeError("Cannot call a class as a function");
        }, "_classCallCheck"))(this, SignoutResponse);
        var t2 = n.UrlUtility.parseUrlFragment(e2, "?");
        this.error = t2.error, this.error_description = t2.error_description, this.error_uri = t2.error_uri, this.state = t2.state;
      }, "SignoutResponse");
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.SignoutRequest = void 0;
      var n = r(0), i = r(3), o = r(4);
      t.SignoutRequest = /* @__PURE__ */ __name(function SignoutRequest(e2) {
        var t2 = e2.url, r2 = e2.id_token_hint, s = e2.post_logout_redirect_uri, a = e2.data;
        if ((/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
          if (!(e3 instanceof t3))
            throw new TypeError("Cannot call a class as a function");
        }, "_classCallCheck"))(this, SignoutRequest), !t2)
          throw n.Log.error("SignoutRequest.ctor: No url passed"), new Error("url");
        r2 && (t2 = i.UrlUtility.addQueryParam(t2, "id_token_hint", r2)), s && (t2 = i.UrlUtility.addQueryParam(t2, "post_logout_redirect_uri", s), a && (this.state = new o.State({data: a}), t2 = i.UrlUtility.addQueryParam(t2, "state", this.state.id))), this.url = t2;
      }, "SignoutRequest");
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.SigninResponse = void 0;
      var n = function() {
        function defineProperties(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2++) {
            var n2 = t2[r2];
            n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(e2, n2.key, n2);
          }
        }
        __name(defineProperties, "defineProperties");
        return function(e2, t2, r2) {
          return t2 && defineProperties(e2.prototype, t2), r2 && defineProperties(e2, r2), e2;
        };
      }(), i = r(3);
      t.SigninResponse = function() {
        function SigninResponse(e2) {
          var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "#";
          !(/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, SigninResponse);
          var r2 = i.UrlUtility.parseUrlFragment(e2, t2);
          this.error = r2.error, this.error_description = r2.error_description, this.error_uri = r2.error_uri, this.code = r2.code, this.state = r2.state, this.id_token = r2.id_token, this.session_state = r2.session_state, this.access_token = r2.access_token, this.token_type = r2.token_type, this.scope = r2.scope, this.profile = void 0, this.expires_in = r2.expires_in;
        }
        __name(SigninResponse, "SigninResponse");
        return n(SigninResponse, [{key: "expires_in", get: /* @__PURE__ */ __name(function get() {
          if (this.expires_at) {
            var e2 = parseInt(Date.now() / 1e3);
            return this.expires_at - e2;
          }
        }, "get"), set: /* @__PURE__ */ __name(function set(e2) {
          var t2 = parseInt(e2);
          if (typeof t2 == "number" && t2 > 0) {
            var r2 = parseInt(Date.now() / 1e3);
            this.expires_at = r2 + t2;
          }
        }, "set")}, {key: "expired", get: /* @__PURE__ */ __name(function get() {
          var e2 = this.expires_in;
          if (e2 !== void 0)
            return e2 <= 0;
        }, "get")}, {key: "scopes", get: /* @__PURE__ */ __name(function get() {
          return (this.scope || "").split(" ");
        }, "get")}, {key: "isOpenIdConnect", get: /* @__PURE__ */ __name(function get() {
          return this.scopes.indexOf("openid") >= 0 || !!this.id_token;
        }, "get")}]), SigninResponse;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.SigninRequest = void 0;
      var n = r(0), i = r(3), o = r(17);
      t.SigninRequest = function() {
        function SigninRequest(e2) {
          var t2 = e2.url, r2 = e2.client_id, s = e2.redirect_uri, a = e2.response_type, u = e2.scope, c = e2.authority, h = e2.data, l = e2.prompt, f = e2.display, g = e2.max_age, p = e2.ui_locales, d = e2.id_token_hint, v = e2.login_hint, y = e2.acr_values, m = e2.resource, _ = e2.response_mode, S = e2.request, b = e2.request_uri, F = e2.extraQueryParams;
          if ((/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, SigninRequest), !t2)
            throw n.Log.error("SigninRequest.ctor: No url passed"), new Error("url");
          if (!r2)
            throw n.Log.error("SigninRequest.ctor: No client_id passed"), new Error("client_id");
          if (!s)
            throw n.Log.error("SigninRequest.ctor: No redirect_uri passed"), new Error("redirect_uri");
          if (!a)
            throw n.Log.error("SigninRequest.ctor: No response_type passed"), new Error("response_type");
          if (!u)
            throw n.Log.error("SigninRequest.ctor: No scope passed"), new Error("scope");
          if (!c)
            throw n.Log.error("SigninRequest.ctor: No authority passed"), new Error("authority");
          var w = SigninRequest.isOidc(a), E = SigninRequest.isCode(a);
          this.state = new o.SigninState({nonce: w, data: h, client_id: r2, authority: c, redirect_uri: s, code_verifier: E}), t2 = i.UrlUtility.addQueryParam(t2, "client_id", r2), t2 = i.UrlUtility.addQueryParam(t2, "redirect_uri", s), t2 = i.UrlUtility.addQueryParam(t2, "response_type", a), t2 = i.UrlUtility.addQueryParam(t2, "scope", u), t2 = i.UrlUtility.addQueryParam(t2, "state", this.state.id), w && (t2 = i.UrlUtility.addQueryParam(t2, "nonce", this.state.nonce)), E && (t2 = i.UrlUtility.addQueryParam(t2, "code_challenge", this.state.code_challenge), t2 = i.UrlUtility.addQueryParam(t2, "code_challenge_method", "S256"));
          var x = {prompt: l, display: f, max_age: g, ui_locales: p, id_token_hint: d, login_hint: v, acr_values: y, resource: m, request: S, request_uri: b, response_mode: _};
          for (var C in x)
            x[C] && (t2 = i.UrlUtility.addQueryParam(t2, C, x[C]));
          for (var k in F)
            t2 = i.UrlUtility.addQueryParam(t2, k, F[k]);
          this.url = t2;
        }
        __name(SigninRequest, "SigninRequest");
        return SigninRequest.isOidc = /* @__PURE__ */ __name(function isOidc(e2) {
          return !!e2.split(/\s+/g).filter(function(e3) {
            return e3 === "id_token";
          })[0];
        }, "isOidc"), SigninRequest.isOAuth = /* @__PURE__ */ __name(function isOAuth(e2) {
          return !!e2.split(/\s+/g).filter(function(e3) {
            return e3 === "token";
          })[0];
        }, "isOAuth"), SigninRequest.isCode = /* @__PURE__ */ __name(function isCode(e2) {
          return !!e2.split(/\s+/g).filter(function(e3) {
            return e3 === "code";
          })[0];
        }, "isCode"), SigninRequest;
      }();
    }, function(e, t) {
      var r = {}.toString;
      e.exports = Array.isArray || function(e2) {
        return r.call(e2) == "[object Array]";
      };
    }, function(e, t) {
      t.read = function(e2, t2, r, n, i) {
        var o, s, a = 8 * i - n - 1, u = (1 << a) - 1, c = u >> 1, h = -7, l = r ? i - 1 : 0, f = r ? -1 : 1, g = e2[t2 + l];
        for (l += f, o = g & (1 << -h) - 1, g >>= -h, h += a; h > 0; o = 256 * o + e2[t2 + l], l += f, h -= 8)
          ;
        for (s = o & (1 << -h) - 1, o >>= -h, h += n; h > 0; s = 256 * s + e2[t2 + l], l += f, h -= 8)
          ;
        if (o === 0)
          o = 1 - c;
        else {
          if (o === u)
            return s ? NaN : 1 / 0 * (g ? -1 : 1);
          s += Math.pow(2, n), o -= c;
        }
        return (g ? -1 : 1) * s * Math.pow(2, o - n);
      }, t.write = function(e2, t2, r, n, i, o) {
        var s, a, u, c = 8 * o - i - 1, h = (1 << c) - 1, l = h >> 1, f = i === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0, g = n ? 0 : o - 1, p = n ? 1 : -1, d = t2 < 0 || t2 === 0 && 1 / t2 < 0 ? 1 : 0;
        for (t2 = Math.abs(t2), isNaN(t2) || t2 === 1 / 0 ? (a = isNaN(t2) ? 1 : 0, s = h) : (s = Math.floor(Math.log(t2) / Math.LN2), t2 * (u = Math.pow(2, -s)) < 1 && (s--, u *= 2), (t2 += s + l >= 1 ? f / u : f * Math.pow(2, 1 - l)) * u >= 2 && (s++, u /= 2), s + l >= h ? (a = 0, s = h) : s + l >= 1 ? (a = (t2 * u - 1) * Math.pow(2, i), s += l) : (a = t2 * Math.pow(2, l - 1) * Math.pow(2, i), s = 0)); i >= 8; e2[r + g] = 255 & a, g += p, a /= 256, i -= 8)
          ;
        for (s = s << i | a, c += i; c > 0; e2[r + g] = 255 & s, g += p, s /= 256, c -= 8)
          ;
        e2[r + g - p] |= 128 * d;
      };
    }, function(e, t, r) {
      "use strict";
      t.byteLength = /* @__PURE__ */ __name(function byteLength(e2) {
        var t2 = getLens(e2), r2 = t2[0], n2 = t2[1];
        return 3 * (r2 + n2) / 4 - n2;
      }, "byteLength"), t.toByteArray = /* @__PURE__ */ __name(function toByteArray(e2) {
        for (var t2, r2 = getLens(e2), n2 = r2[0], s2 = r2[1], a2 = new o((/* @__PURE__ */ __name(function _byteLength(e3, t3, r3) {
          return 3 * (t3 + r3) / 4 - r3;
        }, "_byteLength"))(0, n2, s2)), u2 = 0, c = s2 > 0 ? n2 - 4 : n2, h = 0; h < c; h += 4)
          t2 = i[e2.charCodeAt(h)] << 18 | i[e2.charCodeAt(h + 1)] << 12 | i[e2.charCodeAt(h + 2)] << 6 | i[e2.charCodeAt(h + 3)], a2[u2++] = t2 >> 16 & 255, a2[u2++] = t2 >> 8 & 255, a2[u2++] = 255 & t2;
        s2 === 2 && (t2 = i[e2.charCodeAt(h)] << 2 | i[e2.charCodeAt(h + 1)] >> 4, a2[u2++] = 255 & t2);
        s2 === 1 && (t2 = i[e2.charCodeAt(h)] << 10 | i[e2.charCodeAt(h + 1)] << 4 | i[e2.charCodeAt(h + 2)] >> 2, a2[u2++] = t2 >> 8 & 255, a2[u2++] = 255 & t2);
        return a2;
      }, "toByteArray"), t.fromByteArray = /* @__PURE__ */ __name(function fromByteArray(e2) {
        for (var t2, r2 = e2.length, i2 = r2 % 3, o2 = [], s2 = 0, a2 = r2 - i2; s2 < a2; s2 += 16383)
          o2.push(encodeChunk(e2, s2, s2 + 16383 > a2 ? a2 : s2 + 16383));
        i2 === 1 ? (t2 = e2[r2 - 1], o2.push(n[t2 >> 2] + n[t2 << 4 & 63] + "==")) : i2 === 2 && (t2 = (e2[r2 - 2] << 8) + e2[r2 - 1], o2.push(n[t2 >> 10] + n[t2 >> 4 & 63] + n[t2 << 2 & 63] + "="));
        return o2.join("");
      }, "fromByteArray");
      for (var n = [], i = [], o = typeof Uint8Array != "undefined" ? Uint8Array : Array, s = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", a = 0, u = s.length; a < u; ++a)
        n[a] = s[a], i[s.charCodeAt(a)] = a;
      function getLens(e2) {
        var t2 = e2.length;
        if (t2 % 4 > 0)
          throw new Error("Invalid string. Length must be a multiple of 4");
        var r2 = e2.indexOf("=");
        return r2 === -1 && (r2 = t2), [r2, r2 === t2 ? 0 : 4 - r2 % 4];
      }
      __name(getLens, "getLens");
      function tripletToBase64(e2) {
        return n[e2 >> 18 & 63] + n[e2 >> 12 & 63] + n[e2 >> 6 & 63] + n[63 & e2];
      }
      __name(tripletToBase64, "tripletToBase64");
      function encodeChunk(e2, t2, r2) {
        for (var n2, i2 = [], o2 = t2; o2 < r2; o2 += 3)
          n2 = (e2[o2] << 16 & 16711680) + (e2[o2 + 1] << 8 & 65280) + (255 & e2[o2 + 2]), i2.push(tripletToBase64(n2));
        return i2.join("");
      }
      __name(encodeChunk, "encodeChunk");
      i["-".charCodeAt(0)] = 62, i["_".charCodeAt(0)] = 63;
    }, function(e, t) {
      var r;
      r = function() {
        return this;
      }();
      try {
        r = r || Function("return this")() || (0, eval)("this");
      } catch (e2) {
        typeof window == "object" && (r = window);
      }
      e.exports = r;
    }, function(e, t, r) {
      "use strict";
      (function(e2) {
        /*!
         * The buffer module from node.js, for the browser.
         *
         * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
         * @license  MIT
         */
        var n = r(41), i = r(40), o = r(39);
        function kMaxLength() {
          return Buffer.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823;
        }
        __name(kMaxLength, "kMaxLength");
        function createBuffer(e3, t2) {
          if (kMaxLength() < t2)
            throw new RangeError("Invalid typed array length");
          return Buffer.TYPED_ARRAY_SUPPORT ? (e3 = new Uint8Array(t2)).__proto__ = Buffer.prototype : (e3 === null && (e3 = new Buffer(t2)), e3.length = t2), e3;
        }
        __name(createBuffer, "createBuffer");
        function Buffer(e3, t2, r2) {
          if (!(Buffer.TYPED_ARRAY_SUPPORT || this instanceof Buffer))
            return new Buffer(e3, t2, r2);
          if (typeof e3 == "number") {
            if (typeof t2 == "string")
              throw new Error("If encoding is specified then the first argument must be a string");
            return allocUnsafe(this, e3);
          }
          return from(this, e3, t2, r2);
        }
        __name(Buffer, "Buffer");
        function from(e3, t2, r2, n2) {
          if (typeof t2 == "number")
            throw new TypeError('"value" argument must not be a number');
          return typeof ArrayBuffer != "undefined" && t2 instanceof ArrayBuffer ? (/* @__PURE__ */ __name(function fromArrayBuffer(e4, t3, r3, n3) {
            if (t3.byteLength, r3 < 0 || t3.byteLength < r3)
              throw new RangeError("'offset' is out of bounds");
            if (t3.byteLength < r3 + (n3 || 0))
              throw new RangeError("'length' is out of bounds");
            t3 = r3 === void 0 && n3 === void 0 ? new Uint8Array(t3) : n3 === void 0 ? new Uint8Array(t3, r3) : new Uint8Array(t3, r3, n3);
            Buffer.TYPED_ARRAY_SUPPORT ? (e4 = t3).__proto__ = Buffer.prototype : e4 = fromArrayLike(e4, t3);
            return e4;
          }, "fromArrayBuffer"))(e3, t2, r2, n2) : typeof t2 == "string" ? (/* @__PURE__ */ __name(function fromString(e4, t3, r3) {
            typeof r3 == "string" && r3 !== "" || (r3 = "utf8");
            if (!Buffer.isEncoding(r3))
              throw new TypeError('"encoding" must be a valid string encoding');
            var n3 = 0 | byteLength(t3, r3), i2 = (e4 = createBuffer(e4, n3)).write(t3, r3);
            i2 !== n3 && (e4 = e4.slice(0, i2));
            return e4;
          }, "fromString"))(e3, t2, r2) : (/* @__PURE__ */ __name(function fromObject(e4, t3) {
            if (Buffer.isBuffer(t3)) {
              var r3 = 0 | checked(t3.length);
              return (e4 = createBuffer(e4, r3)).length === 0 ? e4 : (t3.copy(e4, 0, 0, r3), e4);
            }
            if (t3) {
              if (typeof ArrayBuffer != "undefined" && t3.buffer instanceof ArrayBuffer || "length" in t3)
                return typeof t3.length != "number" || (/* @__PURE__ */ __name(function isnan(e5) {
                  return e5 != e5;
                }, "isnan"))(t3.length) ? createBuffer(e4, 0) : fromArrayLike(e4, t3);
              if (t3.type === "Buffer" && o(t3.data))
                return fromArrayLike(e4, t3.data);
            }
            throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
          }, "fromObject"))(e3, t2);
        }
        __name(from, "from");
        function assertSize(e3) {
          if (typeof e3 != "number")
            throw new TypeError('"size" argument must be a number');
          if (e3 < 0)
            throw new RangeError('"size" argument must not be negative');
        }
        __name(assertSize, "assertSize");
        function allocUnsafe(e3, t2) {
          if (assertSize(t2), e3 = createBuffer(e3, t2 < 0 ? 0 : 0 | checked(t2)), !Buffer.TYPED_ARRAY_SUPPORT)
            for (var r2 = 0; r2 < t2; ++r2)
              e3[r2] = 0;
          return e3;
        }
        __name(allocUnsafe, "allocUnsafe");
        function fromArrayLike(e3, t2) {
          var r2 = t2.length < 0 ? 0 : 0 | checked(t2.length);
          e3 = createBuffer(e3, r2);
          for (var n2 = 0; n2 < r2; n2 += 1)
            e3[n2] = 255 & t2[n2];
          return e3;
        }
        __name(fromArrayLike, "fromArrayLike");
        function checked(e3) {
          if (e3 >= kMaxLength())
            throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + kMaxLength().toString(16) + " bytes");
          return 0 | e3;
        }
        __name(checked, "checked");
        function byteLength(e3, t2) {
          if (Buffer.isBuffer(e3))
            return e3.length;
          if (typeof ArrayBuffer != "undefined" && typeof ArrayBuffer.isView == "function" && (ArrayBuffer.isView(e3) || e3 instanceof ArrayBuffer))
            return e3.byteLength;
          typeof e3 != "string" && (e3 = "" + e3);
          var r2 = e3.length;
          if (r2 === 0)
            return 0;
          for (var n2 = false; ; )
            switch (t2) {
              case "ascii":
              case "latin1":
              case "binary":
                return r2;
              case "utf8":
              case "utf-8":
              case void 0:
                return utf8ToBytes(e3).length;
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return 2 * r2;
              case "hex":
                return r2 >>> 1;
              case "base64":
                return base64ToBytes(e3).length;
              default:
                if (n2)
                  return utf8ToBytes(e3).length;
                t2 = ("" + t2).toLowerCase(), n2 = true;
            }
        }
        __name(byteLength, "byteLength");
        function swap(e3, t2, r2) {
          var n2 = e3[t2];
          e3[t2] = e3[r2], e3[r2] = n2;
        }
        __name(swap, "swap");
        function bidirectionalIndexOf(e3, t2, r2, n2, i2) {
          if (e3.length === 0)
            return -1;
          if (typeof r2 == "string" ? (n2 = r2, r2 = 0) : r2 > 2147483647 ? r2 = 2147483647 : r2 < -2147483648 && (r2 = -2147483648), r2 = +r2, isNaN(r2) && (r2 = i2 ? 0 : e3.length - 1), r2 < 0 && (r2 = e3.length + r2), r2 >= e3.length) {
            if (i2)
              return -1;
            r2 = e3.length - 1;
          } else if (r2 < 0) {
            if (!i2)
              return -1;
            r2 = 0;
          }
          if (typeof t2 == "string" && (t2 = Buffer.from(t2, n2)), Buffer.isBuffer(t2))
            return t2.length === 0 ? -1 : arrayIndexOf(e3, t2, r2, n2, i2);
          if (typeof t2 == "number")
            return t2 &= 255, Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf == "function" ? i2 ? Uint8Array.prototype.indexOf.call(e3, t2, r2) : Uint8Array.prototype.lastIndexOf.call(e3, t2, r2) : arrayIndexOf(e3, [t2], r2, n2, i2);
          throw new TypeError("val must be string, number or Buffer");
        }
        __name(bidirectionalIndexOf, "bidirectionalIndexOf");
        function arrayIndexOf(e3, t2, r2, n2, i2) {
          var o2, s2 = 1, a2 = e3.length, u = t2.length;
          if (n2 !== void 0 && ((n2 = String(n2).toLowerCase()) === "ucs2" || n2 === "ucs-2" || n2 === "utf16le" || n2 === "utf-16le")) {
            if (e3.length < 2 || t2.length < 2)
              return -1;
            s2 = 2, a2 /= 2, u /= 2, r2 /= 2;
          }
          function read(e4, t3) {
            return s2 === 1 ? e4[t3] : e4.readUInt16BE(t3 * s2);
          }
          __name(read, "read");
          if (i2) {
            var c = -1;
            for (o2 = r2; o2 < a2; o2++)
              if (read(e3, o2) === read(t2, c === -1 ? 0 : o2 - c)) {
                if (c === -1 && (c = o2), o2 - c + 1 === u)
                  return c * s2;
              } else
                c !== -1 && (o2 -= o2 - c), c = -1;
          } else
            for (r2 + u > a2 && (r2 = a2 - u), o2 = r2; o2 >= 0; o2--) {
              for (var h = true, l = 0; l < u; l++)
                if (read(e3, o2 + l) !== read(t2, l)) {
                  h = false;
                  break;
                }
              if (h)
                return o2;
            }
          return -1;
        }
        __name(arrayIndexOf, "arrayIndexOf");
        function hexWrite(e3, t2, r2, n2) {
          r2 = Number(r2) || 0;
          var i2 = e3.length - r2;
          n2 ? (n2 = Number(n2)) > i2 && (n2 = i2) : n2 = i2;
          var o2 = t2.length;
          if (o2 % 2 != 0)
            throw new TypeError("Invalid hex string");
          n2 > o2 / 2 && (n2 = o2 / 2);
          for (var s2 = 0; s2 < n2; ++s2) {
            var a2 = parseInt(t2.substr(2 * s2, 2), 16);
            if (isNaN(a2))
              return s2;
            e3[r2 + s2] = a2;
          }
          return s2;
        }
        __name(hexWrite, "hexWrite");
        function utf8Write(e3, t2, r2, n2) {
          return blitBuffer(utf8ToBytes(t2, e3.length - r2), e3, r2, n2);
        }
        __name(utf8Write, "utf8Write");
        function asciiWrite(e3, t2, r2, n2) {
          return blitBuffer((/* @__PURE__ */ __name(function asciiToBytes(e4) {
            for (var t3 = [], r3 = 0; r3 < e4.length; ++r3)
              t3.push(255 & e4.charCodeAt(r3));
            return t3;
          }, "asciiToBytes"))(t2), e3, r2, n2);
        }
        __name(asciiWrite, "asciiWrite");
        function latin1Write(e3, t2, r2, n2) {
          return asciiWrite(e3, t2, r2, n2);
        }
        __name(latin1Write, "latin1Write");
        function base64Write(e3, t2, r2, n2) {
          return blitBuffer(base64ToBytes(t2), e3, r2, n2);
        }
        __name(base64Write, "base64Write");
        function ucs2Write(e3, t2, r2, n2) {
          return blitBuffer((/* @__PURE__ */ __name(function utf16leToBytes(e4, t3) {
            for (var r3, n3, i2, o2 = [], s2 = 0; s2 < e4.length && !((t3 -= 2) < 0); ++s2)
              r3 = e4.charCodeAt(s2), n3 = r3 >> 8, i2 = r3 % 256, o2.push(i2), o2.push(n3);
            return o2;
          }, "utf16leToBytes"))(t2, e3.length - r2), e3, r2, n2);
        }
        __name(ucs2Write, "ucs2Write");
        function base64Slice(e3, t2, r2) {
          return t2 === 0 && r2 === e3.length ? n.fromByteArray(e3) : n.fromByteArray(e3.slice(t2, r2));
        }
        __name(base64Slice, "base64Slice");
        function utf8Slice(e3, t2, r2) {
          r2 = Math.min(e3.length, r2);
          for (var n2 = [], i2 = t2; i2 < r2; ) {
            var o2, a2, u, c, h = e3[i2], l = null, f = h > 239 ? 4 : h > 223 ? 3 : h > 191 ? 2 : 1;
            if (i2 + f <= r2)
              switch (f) {
                case 1:
                  h < 128 && (l = h);
                  break;
                case 2:
                  (192 & (o2 = e3[i2 + 1])) == 128 && (c = (31 & h) << 6 | 63 & o2) > 127 && (l = c);
                  break;
                case 3:
                  o2 = e3[i2 + 1], a2 = e3[i2 + 2], (192 & o2) == 128 && (192 & a2) == 128 && (c = (15 & h) << 12 | (63 & o2) << 6 | 63 & a2) > 2047 && (c < 55296 || c > 57343) && (l = c);
                  break;
                case 4:
                  o2 = e3[i2 + 1], a2 = e3[i2 + 2], u = e3[i2 + 3], (192 & o2) == 128 && (192 & a2) == 128 && (192 & u) == 128 && (c = (15 & h) << 18 | (63 & o2) << 12 | (63 & a2) << 6 | 63 & u) > 65535 && c < 1114112 && (l = c);
              }
            l === null ? (l = 65533, f = 1) : l > 65535 && (l -= 65536, n2.push(l >>> 10 & 1023 | 55296), l = 56320 | 1023 & l), n2.push(l), i2 += f;
          }
          return (/* @__PURE__ */ __name(function decodeCodePointsArray(e4) {
            var t3 = e4.length;
            if (t3 <= s)
              return String.fromCharCode.apply(String, e4);
            var r3 = "", n3 = 0;
            for (; n3 < t3; )
              r3 += String.fromCharCode.apply(String, e4.slice(n3, n3 += s));
            return r3;
          }, "decodeCodePointsArray"))(n2);
        }
        __name(utf8Slice, "utf8Slice");
        t.Buffer = Buffer, t.SlowBuffer = /* @__PURE__ */ __name(function SlowBuffer(e3) {
          +e3 != e3 && (e3 = 0);
          return Buffer.alloc(+e3);
        }, "SlowBuffer"), t.INSPECT_MAX_BYTES = 50, Buffer.TYPED_ARRAY_SUPPORT = e2.TYPED_ARRAY_SUPPORT !== void 0 ? e2.TYPED_ARRAY_SUPPORT : (/* @__PURE__ */ __name(function typedArraySupport() {
          try {
            var e3 = new Uint8Array(1);
            return e3.__proto__ = {__proto__: Uint8Array.prototype, foo: function() {
              return 42;
            }}, e3.foo() === 42 && typeof e3.subarray == "function" && e3.subarray(1, 1).byteLength === 0;
          } catch (e4) {
            return false;
          }
        }, "typedArraySupport"))(), t.kMaxLength = kMaxLength(), Buffer.poolSize = 8192, Buffer._augment = function(e3) {
          return e3.__proto__ = Buffer.prototype, e3;
        }, Buffer.from = function(e3, t2, r2) {
          return from(null, e3, t2, r2);
        }, Buffer.TYPED_ARRAY_SUPPORT && (Buffer.prototype.__proto__ = Uint8Array.prototype, Buffer.__proto__ = Uint8Array, typeof Symbol != "undefined" && Symbol.species && Buffer[Symbol.species] === Buffer && Object.defineProperty(Buffer, Symbol.species, {value: null, configurable: true})), Buffer.alloc = function(e3, t2, r2) {
          return (/* @__PURE__ */ __name(function alloc(e4, t3, r3, n2) {
            return assertSize(t3), t3 <= 0 ? createBuffer(e4, t3) : r3 !== void 0 ? typeof n2 == "string" ? createBuffer(e4, t3).fill(r3, n2) : createBuffer(e4, t3).fill(r3) : createBuffer(e4, t3);
          }, "alloc"))(null, e3, t2, r2);
        }, Buffer.allocUnsafe = function(e3) {
          return allocUnsafe(null, e3);
        }, Buffer.allocUnsafeSlow = function(e3) {
          return allocUnsafe(null, e3);
        }, Buffer.isBuffer = /* @__PURE__ */ __name(function isBuffer(e3) {
          return !(e3 == null || !e3._isBuffer);
        }, "isBuffer"), Buffer.compare = /* @__PURE__ */ __name(function compare(e3, t2) {
          if (!Buffer.isBuffer(e3) || !Buffer.isBuffer(t2))
            throw new TypeError("Arguments must be Buffers");
          if (e3 === t2)
            return 0;
          for (var r2 = e3.length, n2 = t2.length, i2 = 0, o2 = Math.min(r2, n2); i2 < o2; ++i2)
            if (e3[i2] !== t2[i2]) {
              r2 = e3[i2], n2 = t2[i2];
              break;
            }
          return r2 < n2 ? -1 : n2 < r2 ? 1 : 0;
        }, "compare"), Buffer.isEncoding = /* @__PURE__ */ __name(function isEncoding(e3) {
          switch (String(e3).toLowerCase()) {
            case "hex":
            case "utf8":
            case "utf-8":
            case "ascii":
            case "latin1":
            case "binary":
            case "base64":
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
              return true;
            default:
              return false;
          }
        }, "isEncoding"), Buffer.concat = /* @__PURE__ */ __name(function concat(e3, t2) {
          if (!o(e3))
            throw new TypeError('"list" argument must be an Array of Buffers');
          if (e3.length === 0)
            return Buffer.alloc(0);
          var r2;
          if (t2 === void 0)
            for (t2 = 0, r2 = 0; r2 < e3.length; ++r2)
              t2 += e3[r2].length;
          var n2 = Buffer.allocUnsafe(t2), i2 = 0;
          for (r2 = 0; r2 < e3.length; ++r2) {
            var s2 = e3[r2];
            if (!Buffer.isBuffer(s2))
              throw new TypeError('"list" argument must be an Array of Buffers');
            s2.copy(n2, i2), i2 += s2.length;
          }
          return n2;
        }, "concat"), Buffer.byteLength = byteLength, Buffer.prototype._isBuffer = true, Buffer.prototype.swap16 = /* @__PURE__ */ __name(function swap16() {
          var e3 = this.length;
          if (e3 % 2 != 0)
            throw new RangeError("Buffer size must be a multiple of 16-bits");
          for (var t2 = 0; t2 < e3; t2 += 2)
            swap(this, t2, t2 + 1);
          return this;
        }, "swap16"), Buffer.prototype.swap32 = /* @__PURE__ */ __name(function swap32() {
          var e3 = this.length;
          if (e3 % 4 != 0)
            throw new RangeError("Buffer size must be a multiple of 32-bits");
          for (var t2 = 0; t2 < e3; t2 += 4)
            swap(this, t2, t2 + 3), swap(this, t2 + 1, t2 + 2);
          return this;
        }, "swap32"), Buffer.prototype.swap64 = /* @__PURE__ */ __name(function swap64() {
          var e3 = this.length;
          if (e3 % 8 != 0)
            throw new RangeError("Buffer size must be a multiple of 64-bits");
          for (var t2 = 0; t2 < e3; t2 += 8)
            swap(this, t2, t2 + 7), swap(this, t2 + 1, t2 + 6), swap(this, t2 + 2, t2 + 5), swap(this, t2 + 3, t2 + 4);
          return this;
        }, "swap64"), Buffer.prototype.toString = /* @__PURE__ */ __name(function toString() {
          var e3 = 0 | this.length;
          return e3 === 0 ? "" : arguments.length === 0 ? utf8Slice(this, 0, e3) : (/* @__PURE__ */ __name(function slowToString(e4, t2, r2) {
            var n2 = false;
            if ((t2 === void 0 || t2 < 0) && (t2 = 0), t2 > this.length)
              return "";
            if ((r2 === void 0 || r2 > this.length) && (r2 = this.length), r2 <= 0)
              return "";
            if ((r2 >>>= 0) <= (t2 >>>= 0))
              return "";
            for (e4 || (e4 = "utf8"); ; )
              switch (e4) {
                case "hex":
                  return hexSlice(this, t2, r2);
                case "utf8":
                case "utf-8":
                  return utf8Slice(this, t2, r2);
                case "ascii":
                  return asciiSlice(this, t2, r2);
                case "latin1":
                case "binary":
                  return latin1Slice(this, t2, r2);
                case "base64":
                  return base64Slice(this, t2, r2);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return utf16leSlice(this, t2, r2);
                default:
                  if (n2)
                    throw new TypeError("Unknown encoding: " + e4);
                  e4 = (e4 + "").toLowerCase(), n2 = true;
              }
          }, "slowToString")).apply(this, arguments);
        }, "toString"), Buffer.prototype.equals = /* @__PURE__ */ __name(function equals(e3) {
          if (!Buffer.isBuffer(e3))
            throw new TypeError("Argument must be a Buffer");
          return this === e3 || Buffer.compare(this, e3) === 0;
        }, "equals"), Buffer.prototype.inspect = /* @__PURE__ */ __name(function inspect() {
          var e3 = "", r2 = t.INSPECT_MAX_BYTES;
          return this.length > 0 && (e3 = this.toString("hex", 0, r2).match(/.{2}/g).join(" "), this.length > r2 && (e3 += " ... ")), "<Buffer " + e3 + ">";
        }, "inspect"), Buffer.prototype.compare = /* @__PURE__ */ __name(function compare(e3, t2, r2, n2, i2) {
          if (!Buffer.isBuffer(e3))
            throw new TypeError("Argument must be a Buffer");
          if (t2 === void 0 && (t2 = 0), r2 === void 0 && (r2 = e3 ? e3.length : 0), n2 === void 0 && (n2 = 0), i2 === void 0 && (i2 = this.length), t2 < 0 || r2 > e3.length || n2 < 0 || i2 > this.length)
            throw new RangeError("out of range index");
          if (n2 >= i2 && t2 >= r2)
            return 0;
          if (n2 >= i2)
            return -1;
          if (t2 >= r2)
            return 1;
          if (t2 >>>= 0, r2 >>>= 0, n2 >>>= 0, i2 >>>= 0, this === e3)
            return 0;
          for (var o2 = i2 - n2, s2 = r2 - t2, a2 = Math.min(o2, s2), u = this.slice(n2, i2), c = e3.slice(t2, r2), h = 0; h < a2; ++h)
            if (u[h] !== c[h]) {
              o2 = u[h], s2 = c[h];
              break;
            }
          return o2 < s2 ? -1 : s2 < o2 ? 1 : 0;
        }, "compare"), Buffer.prototype.includes = /* @__PURE__ */ __name(function includes(e3, t2, r2) {
          return this.indexOf(e3, t2, r2) !== -1;
        }, "includes"), Buffer.prototype.indexOf = /* @__PURE__ */ __name(function indexOf(e3, t2, r2) {
          return bidirectionalIndexOf(this, e3, t2, r2, true);
        }, "indexOf"), Buffer.prototype.lastIndexOf = /* @__PURE__ */ __name(function lastIndexOf(e3, t2, r2) {
          return bidirectionalIndexOf(this, e3, t2, r2, false);
        }, "lastIndexOf"), Buffer.prototype.write = /* @__PURE__ */ __name(function write(e3, t2, r2, n2) {
          if (t2 === void 0)
            n2 = "utf8", r2 = this.length, t2 = 0;
          else if (r2 === void 0 && typeof t2 == "string")
            n2 = t2, r2 = this.length, t2 = 0;
          else {
            if (!isFinite(t2))
              throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
            t2 |= 0, isFinite(r2) ? (r2 |= 0, n2 === void 0 && (n2 = "utf8")) : (n2 = r2, r2 = void 0);
          }
          var i2 = this.length - t2;
          if ((r2 === void 0 || r2 > i2) && (r2 = i2), e3.length > 0 && (r2 < 0 || t2 < 0) || t2 > this.length)
            throw new RangeError("Attempt to write outside buffer bounds");
          n2 || (n2 = "utf8");
          for (var o2 = false; ; )
            switch (n2) {
              case "hex":
                return hexWrite(this, e3, t2, r2);
              case "utf8":
              case "utf-8":
                return utf8Write(this, e3, t2, r2);
              case "ascii":
                return asciiWrite(this, e3, t2, r2);
              case "latin1":
              case "binary":
                return latin1Write(this, e3, t2, r2);
              case "base64":
                return base64Write(this, e3, t2, r2);
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return ucs2Write(this, e3, t2, r2);
              default:
                if (o2)
                  throw new TypeError("Unknown encoding: " + n2);
                n2 = ("" + n2).toLowerCase(), o2 = true;
            }
        }, "write"), Buffer.prototype.toJSON = /* @__PURE__ */ __name(function toJSON() {
          return {type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0)};
        }, "toJSON");
        var s = 4096;
        function asciiSlice(e3, t2, r2) {
          var n2 = "";
          r2 = Math.min(e3.length, r2);
          for (var i2 = t2; i2 < r2; ++i2)
            n2 += String.fromCharCode(127 & e3[i2]);
          return n2;
        }
        __name(asciiSlice, "asciiSlice");
        function latin1Slice(e3, t2, r2) {
          var n2 = "";
          r2 = Math.min(e3.length, r2);
          for (var i2 = t2; i2 < r2; ++i2)
            n2 += String.fromCharCode(e3[i2]);
          return n2;
        }
        __name(latin1Slice, "latin1Slice");
        function hexSlice(e3, t2, r2) {
          var n2 = e3.length;
          (!t2 || t2 < 0) && (t2 = 0), (!r2 || r2 < 0 || r2 > n2) && (r2 = n2);
          for (var i2 = "", o2 = t2; o2 < r2; ++o2)
            i2 += toHex(e3[o2]);
          return i2;
        }
        __name(hexSlice, "hexSlice");
        function utf16leSlice(e3, t2, r2) {
          for (var n2 = e3.slice(t2, r2), i2 = "", o2 = 0; o2 < n2.length; o2 += 2)
            i2 += String.fromCharCode(n2[o2] + 256 * n2[o2 + 1]);
          return i2;
        }
        __name(utf16leSlice, "utf16leSlice");
        function checkOffset(e3, t2, r2) {
          if (e3 % 1 != 0 || e3 < 0)
            throw new RangeError("offset is not uint");
          if (e3 + t2 > r2)
            throw new RangeError("Trying to access beyond buffer length");
        }
        __name(checkOffset, "checkOffset");
        function checkInt(e3, t2, r2, n2, i2, o2) {
          if (!Buffer.isBuffer(e3))
            throw new TypeError('"buffer" argument must be a Buffer instance');
          if (t2 > i2 || t2 < o2)
            throw new RangeError('"value" argument is out of bounds');
          if (r2 + n2 > e3.length)
            throw new RangeError("Index out of range");
        }
        __name(checkInt, "checkInt");
        function objectWriteUInt16(e3, t2, r2, n2) {
          t2 < 0 && (t2 = 65535 + t2 + 1);
          for (var i2 = 0, o2 = Math.min(e3.length - r2, 2); i2 < o2; ++i2)
            e3[r2 + i2] = (t2 & 255 << 8 * (n2 ? i2 : 1 - i2)) >>> 8 * (n2 ? i2 : 1 - i2);
        }
        __name(objectWriteUInt16, "objectWriteUInt16");
        function objectWriteUInt32(e3, t2, r2, n2) {
          t2 < 0 && (t2 = 4294967295 + t2 + 1);
          for (var i2 = 0, o2 = Math.min(e3.length - r2, 4); i2 < o2; ++i2)
            e3[r2 + i2] = t2 >>> 8 * (n2 ? i2 : 3 - i2) & 255;
        }
        __name(objectWriteUInt32, "objectWriteUInt32");
        function checkIEEE754(e3, t2, r2, n2, i2, o2) {
          if (r2 + n2 > e3.length)
            throw new RangeError("Index out of range");
          if (r2 < 0)
            throw new RangeError("Index out of range");
        }
        __name(checkIEEE754, "checkIEEE754");
        function writeFloat(e3, t2, r2, n2, o2) {
          return o2 || checkIEEE754(e3, 0, r2, 4), i.write(e3, t2, r2, n2, 23, 4), r2 + 4;
        }
        __name(writeFloat, "writeFloat");
        function writeDouble(e3, t2, r2, n2, o2) {
          return o2 || checkIEEE754(e3, 0, r2, 8), i.write(e3, t2, r2, n2, 52, 8), r2 + 8;
        }
        __name(writeDouble, "writeDouble");
        Buffer.prototype.slice = /* @__PURE__ */ __name(function slice(e3, t2) {
          var r2, n2 = this.length;
          if (e3 = ~~e3, t2 = t2 === void 0 ? n2 : ~~t2, e3 < 0 ? (e3 += n2) < 0 && (e3 = 0) : e3 > n2 && (e3 = n2), t2 < 0 ? (t2 += n2) < 0 && (t2 = 0) : t2 > n2 && (t2 = n2), t2 < e3 && (t2 = e3), Buffer.TYPED_ARRAY_SUPPORT)
            (r2 = this.subarray(e3, t2)).__proto__ = Buffer.prototype;
          else {
            var i2 = t2 - e3;
            r2 = new Buffer(i2, void 0);
            for (var o2 = 0; o2 < i2; ++o2)
              r2[o2] = this[o2 + e3];
          }
          return r2;
        }, "slice"), Buffer.prototype.readUIntLE = /* @__PURE__ */ __name(function readUIntLE(e3, t2, r2) {
          e3 |= 0, t2 |= 0, r2 || checkOffset(e3, t2, this.length);
          for (var n2 = this[e3], i2 = 1, o2 = 0; ++o2 < t2 && (i2 *= 256); )
            n2 += this[e3 + o2] * i2;
          return n2;
        }, "readUIntLE"), Buffer.prototype.readUIntBE = /* @__PURE__ */ __name(function readUIntBE(e3, t2, r2) {
          e3 |= 0, t2 |= 0, r2 || checkOffset(e3, t2, this.length);
          for (var n2 = this[e3 + --t2], i2 = 1; t2 > 0 && (i2 *= 256); )
            n2 += this[e3 + --t2] * i2;
          return n2;
        }, "readUIntBE"), Buffer.prototype.readUInt8 = /* @__PURE__ */ __name(function readUInt8(e3, t2) {
          return t2 || checkOffset(e3, 1, this.length), this[e3];
        }, "readUInt8"), Buffer.prototype.readUInt16LE = /* @__PURE__ */ __name(function readUInt16LE(e3, t2) {
          return t2 || checkOffset(e3, 2, this.length), this[e3] | this[e3 + 1] << 8;
        }, "readUInt16LE"), Buffer.prototype.readUInt16BE = /* @__PURE__ */ __name(function readUInt16BE(e3, t2) {
          return t2 || checkOffset(e3, 2, this.length), this[e3] << 8 | this[e3 + 1];
        }, "readUInt16BE"), Buffer.prototype.readUInt32LE = /* @__PURE__ */ __name(function readUInt32LE(e3, t2) {
          return t2 || checkOffset(e3, 4, this.length), (this[e3] | this[e3 + 1] << 8 | this[e3 + 2] << 16) + 16777216 * this[e3 + 3];
        }, "readUInt32LE"), Buffer.prototype.readUInt32BE = /* @__PURE__ */ __name(function readUInt32BE(e3, t2) {
          return t2 || checkOffset(e3, 4, this.length), 16777216 * this[e3] + (this[e3 + 1] << 16 | this[e3 + 2] << 8 | this[e3 + 3]);
        }, "readUInt32BE"), Buffer.prototype.readIntLE = /* @__PURE__ */ __name(function readIntLE(e3, t2, r2) {
          e3 |= 0, t2 |= 0, r2 || checkOffset(e3, t2, this.length);
          for (var n2 = this[e3], i2 = 1, o2 = 0; ++o2 < t2 && (i2 *= 256); )
            n2 += this[e3 + o2] * i2;
          return n2 >= (i2 *= 128) && (n2 -= Math.pow(2, 8 * t2)), n2;
        }, "readIntLE"), Buffer.prototype.readIntBE = /* @__PURE__ */ __name(function readIntBE(e3, t2, r2) {
          e3 |= 0, t2 |= 0, r2 || checkOffset(e3, t2, this.length);
          for (var n2 = t2, i2 = 1, o2 = this[e3 + --n2]; n2 > 0 && (i2 *= 256); )
            o2 += this[e3 + --n2] * i2;
          return o2 >= (i2 *= 128) && (o2 -= Math.pow(2, 8 * t2)), o2;
        }, "readIntBE"), Buffer.prototype.readInt8 = /* @__PURE__ */ __name(function readInt8(e3, t2) {
          return t2 || checkOffset(e3, 1, this.length), 128 & this[e3] ? -1 * (255 - this[e3] + 1) : this[e3];
        }, "readInt8"), Buffer.prototype.readInt16LE = /* @__PURE__ */ __name(function readInt16LE(e3, t2) {
          t2 || checkOffset(e3, 2, this.length);
          var r2 = this[e3] | this[e3 + 1] << 8;
          return 32768 & r2 ? 4294901760 | r2 : r2;
        }, "readInt16LE"), Buffer.prototype.readInt16BE = /* @__PURE__ */ __name(function readInt16BE(e3, t2) {
          t2 || checkOffset(e3, 2, this.length);
          var r2 = this[e3 + 1] | this[e3] << 8;
          return 32768 & r2 ? 4294901760 | r2 : r2;
        }, "readInt16BE"), Buffer.prototype.readInt32LE = /* @__PURE__ */ __name(function readInt32LE(e3, t2) {
          return t2 || checkOffset(e3, 4, this.length), this[e3] | this[e3 + 1] << 8 | this[e3 + 2] << 16 | this[e3 + 3] << 24;
        }, "readInt32LE"), Buffer.prototype.readInt32BE = /* @__PURE__ */ __name(function readInt32BE(e3, t2) {
          return t2 || checkOffset(e3, 4, this.length), this[e3] << 24 | this[e3 + 1] << 16 | this[e3 + 2] << 8 | this[e3 + 3];
        }, "readInt32BE"), Buffer.prototype.readFloatLE = /* @__PURE__ */ __name(function readFloatLE(e3, t2) {
          return t2 || checkOffset(e3, 4, this.length), i.read(this, e3, true, 23, 4);
        }, "readFloatLE"), Buffer.prototype.readFloatBE = /* @__PURE__ */ __name(function readFloatBE(e3, t2) {
          return t2 || checkOffset(e3, 4, this.length), i.read(this, e3, false, 23, 4);
        }, "readFloatBE"), Buffer.prototype.readDoubleLE = /* @__PURE__ */ __name(function readDoubleLE(e3, t2) {
          return t2 || checkOffset(e3, 8, this.length), i.read(this, e3, true, 52, 8);
        }, "readDoubleLE"), Buffer.prototype.readDoubleBE = /* @__PURE__ */ __name(function readDoubleBE(e3, t2) {
          return t2 || checkOffset(e3, 8, this.length), i.read(this, e3, false, 52, 8);
        }, "readDoubleBE"), Buffer.prototype.writeUIntLE = /* @__PURE__ */ __name(function writeUIntLE(e3, t2, r2, n2) {
          (e3 = +e3, t2 |= 0, r2 |= 0, n2) || checkInt(this, e3, t2, r2, Math.pow(2, 8 * r2) - 1, 0);
          var i2 = 1, o2 = 0;
          for (this[t2] = 255 & e3; ++o2 < r2 && (i2 *= 256); )
            this[t2 + o2] = e3 / i2 & 255;
          return t2 + r2;
        }, "writeUIntLE"), Buffer.prototype.writeUIntBE = /* @__PURE__ */ __name(function writeUIntBE(e3, t2, r2, n2) {
          (e3 = +e3, t2 |= 0, r2 |= 0, n2) || checkInt(this, e3, t2, r2, Math.pow(2, 8 * r2) - 1, 0);
          var i2 = r2 - 1, o2 = 1;
          for (this[t2 + i2] = 255 & e3; --i2 >= 0 && (o2 *= 256); )
            this[t2 + i2] = e3 / o2 & 255;
          return t2 + r2;
        }, "writeUIntBE"), Buffer.prototype.writeUInt8 = /* @__PURE__ */ __name(function writeUInt8(e3, t2, r2) {
          return e3 = +e3, t2 |= 0, r2 || checkInt(this, e3, t2, 1, 255, 0), Buffer.TYPED_ARRAY_SUPPORT || (e3 = Math.floor(e3)), this[t2] = 255 & e3, t2 + 1;
        }, "writeUInt8"), Buffer.prototype.writeUInt16LE = /* @__PURE__ */ __name(function writeUInt16LE(e3, t2, r2) {
          return e3 = +e3, t2 |= 0, r2 || checkInt(this, e3, t2, 2, 65535, 0), Buffer.TYPED_ARRAY_SUPPORT ? (this[t2] = 255 & e3, this[t2 + 1] = e3 >>> 8) : objectWriteUInt16(this, e3, t2, true), t2 + 2;
        }, "writeUInt16LE"), Buffer.prototype.writeUInt16BE = /* @__PURE__ */ __name(function writeUInt16BE(e3, t2, r2) {
          return e3 = +e3, t2 |= 0, r2 || checkInt(this, e3, t2, 2, 65535, 0), Buffer.TYPED_ARRAY_SUPPORT ? (this[t2] = e3 >>> 8, this[t2 + 1] = 255 & e3) : objectWriteUInt16(this, e3, t2, false), t2 + 2;
        }, "writeUInt16BE"), Buffer.prototype.writeUInt32LE = /* @__PURE__ */ __name(function writeUInt32LE(e3, t2, r2) {
          return e3 = +e3, t2 |= 0, r2 || checkInt(this, e3, t2, 4, 4294967295, 0), Buffer.TYPED_ARRAY_SUPPORT ? (this[t2 + 3] = e3 >>> 24, this[t2 + 2] = e3 >>> 16, this[t2 + 1] = e3 >>> 8, this[t2] = 255 & e3) : objectWriteUInt32(this, e3, t2, true), t2 + 4;
        }, "writeUInt32LE"), Buffer.prototype.writeUInt32BE = /* @__PURE__ */ __name(function writeUInt32BE(e3, t2, r2) {
          return e3 = +e3, t2 |= 0, r2 || checkInt(this, e3, t2, 4, 4294967295, 0), Buffer.TYPED_ARRAY_SUPPORT ? (this[t2] = e3 >>> 24, this[t2 + 1] = e3 >>> 16, this[t2 + 2] = e3 >>> 8, this[t2 + 3] = 255 & e3) : objectWriteUInt32(this, e3, t2, false), t2 + 4;
        }, "writeUInt32BE"), Buffer.prototype.writeIntLE = /* @__PURE__ */ __name(function writeIntLE(e3, t2, r2, n2) {
          if (e3 = +e3, t2 |= 0, !n2) {
            var i2 = Math.pow(2, 8 * r2 - 1);
            checkInt(this, e3, t2, r2, i2 - 1, -i2);
          }
          var o2 = 0, s2 = 1, a2 = 0;
          for (this[t2] = 255 & e3; ++o2 < r2 && (s2 *= 256); )
            e3 < 0 && a2 === 0 && this[t2 + o2 - 1] !== 0 && (a2 = 1), this[t2 + o2] = (e3 / s2 >> 0) - a2 & 255;
          return t2 + r2;
        }, "writeIntLE"), Buffer.prototype.writeIntBE = /* @__PURE__ */ __name(function writeIntBE(e3, t2, r2, n2) {
          if (e3 = +e3, t2 |= 0, !n2) {
            var i2 = Math.pow(2, 8 * r2 - 1);
            checkInt(this, e3, t2, r2, i2 - 1, -i2);
          }
          var o2 = r2 - 1, s2 = 1, a2 = 0;
          for (this[t2 + o2] = 255 & e3; --o2 >= 0 && (s2 *= 256); )
            e3 < 0 && a2 === 0 && this[t2 + o2 + 1] !== 0 && (a2 = 1), this[t2 + o2] = (e3 / s2 >> 0) - a2 & 255;
          return t2 + r2;
        }, "writeIntBE"), Buffer.prototype.writeInt8 = /* @__PURE__ */ __name(function writeInt8(e3, t2, r2) {
          return e3 = +e3, t2 |= 0, r2 || checkInt(this, e3, t2, 1, 127, -128), Buffer.TYPED_ARRAY_SUPPORT || (e3 = Math.floor(e3)), e3 < 0 && (e3 = 255 + e3 + 1), this[t2] = 255 & e3, t2 + 1;
        }, "writeInt8"), Buffer.prototype.writeInt16LE = /* @__PURE__ */ __name(function writeInt16LE(e3, t2, r2) {
          return e3 = +e3, t2 |= 0, r2 || checkInt(this, e3, t2, 2, 32767, -32768), Buffer.TYPED_ARRAY_SUPPORT ? (this[t2] = 255 & e3, this[t2 + 1] = e3 >>> 8) : objectWriteUInt16(this, e3, t2, true), t2 + 2;
        }, "writeInt16LE"), Buffer.prototype.writeInt16BE = /* @__PURE__ */ __name(function writeInt16BE(e3, t2, r2) {
          return e3 = +e3, t2 |= 0, r2 || checkInt(this, e3, t2, 2, 32767, -32768), Buffer.TYPED_ARRAY_SUPPORT ? (this[t2] = e3 >>> 8, this[t2 + 1] = 255 & e3) : objectWriteUInt16(this, e3, t2, false), t2 + 2;
        }, "writeInt16BE"), Buffer.prototype.writeInt32LE = /* @__PURE__ */ __name(function writeInt32LE(e3, t2, r2) {
          return e3 = +e3, t2 |= 0, r2 || checkInt(this, e3, t2, 4, 2147483647, -2147483648), Buffer.TYPED_ARRAY_SUPPORT ? (this[t2] = 255 & e3, this[t2 + 1] = e3 >>> 8, this[t2 + 2] = e3 >>> 16, this[t2 + 3] = e3 >>> 24) : objectWriteUInt32(this, e3, t2, true), t2 + 4;
        }, "writeInt32LE"), Buffer.prototype.writeInt32BE = /* @__PURE__ */ __name(function writeInt32BE(e3, t2, r2) {
          return e3 = +e3, t2 |= 0, r2 || checkInt(this, e3, t2, 4, 2147483647, -2147483648), e3 < 0 && (e3 = 4294967295 + e3 + 1), Buffer.TYPED_ARRAY_SUPPORT ? (this[t2] = e3 >>> 24, this[t2 + 1] = e3 >>> 16, this[t2 + 2] = e3 >>> 8, this[t2 + 3] = 255 & e3) : objectWriteUInt32(this, e3, t2, false), t2 + 4;
        }, "writeInt32BE"), Buffer.prototype.writeFloatLE = /* @__PURE__ */ __name(function writeFloatLE(e3, t2, r2) {
          return writeFloat(this, e3, t2, true, r2);
        }, "writeFloatLE"), Buffer.prototype.writeFloatBE = /* @__PURE__ */ __name(function writeFloatBE(e3, t2, r2) {
          return writeFloat(this, e3, t2, false, r2);
        }, "writeFloatBE"), Buffer.prototype.writeDoubleLE = /* @__PURE__ */ __name(function writeDoubleLE(e3, t2, r2) {
          return writeDouble(this, e3, t2, true, r2);
        }, "writeDoubleLE"), Buffer.prototype.writeDoubleBE = /* @__PURE__ */ __name(function writeDoubleBE(e3, t2, r2) {
          return writeDouble(this, e3, t2, false, r2);
        }, "writeDoubleBE"), Buffer.prototype.copy = /* @__PURE__ */ __name(function copy(e3, t2, r2, n2) {
          if (r2 || (r2 = 0), n2 || n2 === 0 || (n2 = this.length), t2 >= e3.length && (t2 = e3.length), t2 || (t2 = 0), n2 > 0 && n2 < r2 && (n2 = r2), n2 === r2)
            return 0;
          if (e3.length === 0 || this.length === 0)
            return 0;
          if (t2 < 0)
            throw new RangeError("targetStart out of bounds");
          if (r2 < 0 || r2 >= this.length)
            throw new RangeError("sourceStart out of bounds");
          if (n2 < 0)
            throw new RangeError("sourceEnd out of bounds");
          n2 > this.length && (n2 = this.length), e3.length - t2 < n2 - r2 && (n2 = e3.length - t2 + r2);
          var i2, o2 = n2 - r2;
          if (this === e3 && r2 < t2 && t2 < n2)
            for (i2 = o2 - 1; i2 >= 0; --i2)
              e3[i2 + t2] = this[i2 + r2];
          else if (o2 < 1e3 || !Buffer.TYPED_ARRAY_SUPPORT)
            for (i2 = 0; i2 < o2; ++i2)
              e3[i2 + t2] = this[i2 + r2];
          else
            Uint8Array.prototype.set.call(e3, this.subarray(r2, r2 + o2), t2);
          return o2;
        }, "copy"), Buffer.prototype.fill = /* @__PURE__ */ __name(function fill(e3, t2, r2, n2) {
          if (typeof e3 == "string") {
            if (typeof t2 == "string" ? (n2 = t2, t2 = 0, r2 = this.length) : typeof r2 == "string" && (n2 = r2, r2 = this.length), e3.length === 1) {
              var i2 = e3.charCodeAt(0);
              i2 < 256 && (e3 = i2);
            }
            if (n2 !== void 0 && typeof n2 != "string")
              throw new TypeError("encoding must be a string");
            if (typeof n2 == "string" && !Buffer.isEncoding(n2))
              throw new TypeError("Unknown encoding: " + n2);
          } else
            typeof e3 == "number" && (e3 &= 255);
          if (t2 < 0 || this.length < t2 || this.length < r2)
            throw new RangeError("Out of range index");
          if (r2 <= t2)
            return this;
          var o2;
          if (t2 >>>= 0, r2 = r2 === void 0 ? this.length : r2 >>> 0, e3 || (e3 = 0), typeof e3 == "number")
            for (o2 = t2; o2 < r2; ++o2)
              this[o2] = e3;
          else {
            var s2 = Buffer.isBuffer(e3) ? e3 : utf8ToBytes(new Buffer(e3, n2).toString()), a2 = s2.length;
            for (o2 = 0; o2 < r2 - t2; ++o2)
              this[o2 + t2] = s2[o2 % a2];
          }
          return this;
        }, "fill");
        var a = /[^+\/0-9A-Za-z-_]/g;
        function toHex(e3) {
          return e3 < 16 ? "0" + e3.toString(16) : e3.toString(16);
        }
        __name(toHex, "toHex");
        function utf8ToBytes(e3, t2) {
          var r2;
          t2 = t2 || 1 / 0;
          for (var n2 = e3.length, i2 = null, o2 = [], s2 = 0; s2 < n2; ++s2) {
            if ((r2 = e3.charCodeAt(s2)) > 55295 && r2 < 57344) {
              if (!i2) {
                if (r2 > 56319) {
                  (t2 -= 3) > -1 && o2.push(239, 191, 189);
                  continue;
                }
                if (s2 + 1 === n2) {
                  (t2 -= 3) > -1 && o2.push(239, 191, 189);
                  continue;
                }
                i2 = r2;
                continue;
              }
              if (r2 < 56320) {
                (t2 -= 3) > -1 && o2.push(239, 191, 189), i2 = r2;
                continue;
              }
              r2 = 65536 + (i2 - 55296 << 10 | r2 - 56320);
            } else
              i2 && (t2 -= 3) > -1 && o2.push(239, 191, 189);
            if (i2 = null, r2 < 128) {
              if ((t2 -= 1) < 0)
                break;
              o2.push(r2);
            } else if (r2 < 2048) {
              if ((t2 -= 2) < 0)
                break;
              o2.push(r2 >> 6 | 192, 63 & r2 | 128);
            } else if (r2 < 65536) {
              if ((t2 -= 3) < 0)
                break;
              o2.push(r2 >> 12 | 224, r2 >> 6 & 63 | 128, 63 & r2 | 128);
            } else {
              if (!(r2 < 1114112))
                throw new Error("Invalid code point");
              if ((t2 -= 4) < 0)
                break;
              o2.push(r2 >> 18 | 240, r2 >> 12 & 63 | 128, r2 >> 6 & 63 | 128, 63 & r2 | 128);
            }
          }
          return o2;
        }
        __name(utf8ToBytes, "utf8ToBytes");
        function base64ToBytes(e3) {
          return n.toByteArray((/* @__PURE__ */ __name(function base64clean(e4) {
            if ((e4 = (/* @__PURE__ */ __name(function stringtrim(e5) {
              return e5.trim ? e5.trim() : e5.replace(/^\s+|\s+$/g, "");
            }, "stringtrim"))(e4).replace(a, "")).length < 2)
              return "";
            for (; e4.length % 4 != 0; )
              e4 += "=";
            return e4;
          }, "base64clean"))(e3));
        }
        __name(base64ToBytes, "base64ToBytes");
        function blitBuffer(e3, t2, r2, n2) {
          for (var i2 = 0; i2 < n2 && !(i2 + r2 >= t2.length || i2 >= e3.length); ++i2)
            t2[i2 + r2] = e3[i2];
          return i2;
        }
        __name(blitBuffer, "blitBuffer");
      }).call(this, r(42));
    }, function(e, t, r) {
      "use strict";
      (function(n) {
        var i = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e2) {
          return typeof e2;
        } : function(e2) {
          return e2 && typeof Symbol == "function" && e2.constructor === Symbol && e2 !== Symbol.prototype ? "symbol" : typeof e2;
        }, u = {userAgent: false}, p = {};
        /*!
        Copyright (c) 2011, Yahoo! Inc. All rights reserved.
        Code licensed under the BSD License:
        http://developer.yahoo.com/yui/license.html
        version: 2.9.0
        */
        if (v === void 0)
          var v = {};
        v.lang = {extend: /* @__PURE__ */ __name(function extend(t2, r2, n2) {
          if (!r2 || !t2)
            throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");
          var i2 = /* @__PURE__ */ __name(function d() {
          }, "d");
          if (i2.prototype = r2.prototype, t2.prototype = new i2(), t2.prototype.constructor = t2, t2.superclass = r2.prototype, r2.prototype.constructor == Object.prototype.constructor && (r2.prototype.constructor = r2), n2) {
            var o;
            for (o in n2)
              t2.prototype[o] = n2[o];
            var s = /* @__PURE__ */ __name(function e2() {
            }, "e"), a = ["toString", "valueOf"];
            try {
              /MSIE/.test(u.userAgent) && (s = /* @__PURE__ */ __name(function e2(t3, r3) {
                for (o = 0; o < a.length; o += 1) {
                  var n3 = a[o], i3 = r3[n3];
                  typeof i3 == "function" && i3 != Object.prototype[n3] && (t3[n3] = i3);
                }
              }, "e"));
            } catch (e2) {
            }
            s(t2.prototype, n2);
          }
        }, "extend")};
        /*! CryptoJS v3.1.2 core-fix.js
         * code.google.com/p/crypto-js
         * (c) 2009-2013 by Jeff Mott. All rights reserved.
         * code.google.com/p/crypto-js/wiki/License
         * THIS IS FIX of 'core.js' to fix Hmac issue.
         * https://code.google.com/p/crypto-js/issues/detail?id=84
         * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
         */
        var y = y || function(e2, t2) {
          var r2 = {}, n2 = r2.lib = {}, i2 = n2.Base = function() {
            function n3() {
            }
            __name(n3, "n");
            return {extend: /* @__PURE__ */ __name(function extend(e3) {
              n3.prototype = this;
              var t3 = new n3();
              return e3 && t3.mixIn(e3), t3.hasOwnProperty("init") || (t3.init = function() {
                t3.$super.init.apply(this, arguments);
              }), t3.init.prototype = t3, t3.$super = this, t3;
            }, "extend"), create: /* @__PURE__ */ __name(function create() {
              var e3 = this.extend();
              return e3.init.apply(e3, arguments), e3;
            }, "create"), init: /* @__PURE__ */ __name(function init() {
            }, "init"), mixIn: /* @__PURE__ */ __name(function mixIn(e3) {
              for (var t3 in e3)
                e3.hasOwnProperty(t3) && (this[t3] = e3[t3]);
              e3.hasOwnProperty("toString") && (this.toString = e3.toString);
            }, "mixIn"), clone: /* @__PURE__ */ __name(function clone() {
              return this.init.prototype.extend(this);
            }, "clone")};
          }(), o = n2.WordArray = i2.extend({init: /* @__PURE__ */ __name(function init(e3, t3) {
            e3 = this.words = e3 || [], this.sigBytes = t3 != void 0 ? t3 : 4 * e3.length;
          }, "init"), toString: /* @__PURE__ */ __name(function toString(e3) {
            return (e3 || a).stringify(this);
          }, "toString"), concat: /* @__PURE__ */ __name(function concat(e3) {
            var t3 = this.words, r3 = e3.words, n3 = this.sigBytes, i3 = e3.sigBytes;
            if (this.clamp(), n3 % 4)
              for (var o2 = 0; o2 < i3; o2++) {
                var s2 = r3[o2 >>> 2] >>> 24 - o2 % 4 * 8 & 255;
                t3[n3 + o2 >>> 2] |= s2 << 24 - (n3 + o2) % 4 * 8;
              }
            else
              for (o2 = 0; o2 < i3; o2 += 4)
                t3[n3 + o2 >>> 2] = r3[o2 >>> 2];
            return this.sigBytes += i3, this;
          }, "concat"), clamp: /* @__PURE__ */ __name(function clamp() {
            var t3 = this.words, r3 = this.sigBytes;
            t3[r3 >>> 2] &= 4294967295 << 32 - r3 % 4 * 8, t3.length = e2.ceil(r3 / 4);
          }, "clamp"), clone: /* @__PURE__ */ __name(function clone() {
            var e3 = i2.clone.call(this);
            return e3.words = this.words.slice(0), e3;
          }, "clone"), random: /* @__PURE__ */ __name(function random(t3) {
            for (var r3 = [], n3 = 0; n3 < t3; n3 += 4)
              r3.push(4294967296 * e2.random() | 0);
            return new o.init(r3, t3);
          }, "random")}), s = r2.enc = {}, a = s.Hex = {stringify: /* @__PURE__ */ __name(function stringify(e3) {
            for (var t3 = e3.words, r3 = e3.sigBytes, n3 = [], i3 = 0; i3 < r3; i3++) {
              var o2 = t3[i3 >>> 2] >>> 24 - i3 % 4 * 8 & 255;
              n3.push((o2 >>> 4).toString(16)), n3.push((15 & o2).toString(16));
            }
            return n3.join("");
          }, "stringify"), parse: /* @__PURE__ */ __name(function parse(e3) {
            for (var t3 = e3.length, r3 = [], n3 = 0; n3 < t3; n3 += 2)
              r3[n3 >>> 3] |= parseInt(e3.substr(n3, 2), 16) << 24 - n3 % 8 * 4;
            return new o.init(r3, t3 / 2);
          }, "parse")}, u2 = s.Latin1 = {stringify: /* @__PURE__ */ __name(function stringify(e3) {
            for (var t3 = e3.words, r3 = e3.sigBytes, n3 = [], i3 = 0; i3 < r3; i3++) {
              var o2 = t3[i3 >>> 2] >>> 24 - i3 % 4 * 8 & 255;
              n3.push(String.fromCharCode(o2));
            }
            return n3.join("");
          }, "stringify"), parse: /* @__PURE__ */ __name(function parse(e3) {
            for (var t3 = e3.length, r3 = [], n3 = 0; n3 < t3; n3++)
              r3[n3 >>> 2] |= (255 & e3.charCodeAt(n3)) << 24 - n3 % 4 * 8;
            return new o.init(r3, t3);
          }, "parse")}, c = s.Utf8 = {stringify: /* @__PURE__ */ __name(function stringify(e3) {
            try {
              return decodeURIComponent(escape(u2.stringify(e3)));
            } catch (e4) {
              throw new Error("Malformed UTF-8 data");
            }
          }, "stringify"), parse: /* @__PURE__ */ __name(function parse(e3) {
            return u2.parse(unescape(encodeURIComponent(e3)));
          }, "parse")}, h = n2.BufferedBlockAlgorithm = i2.extend({reset: /* @__PURE__ */ __name(function reset() {
            this._data = new o.init(), this._nDataBytes = 0;
          }, "reset"), _append: /* @__PURE__ */ __name(function _append(e3) {
            typeof e3 == "string" && (e3 = c.parse(e3)), this._data.concat(e3), this._nDataBytes += e3.sigBytes;
          }, "_append"), _process: /* @__PURE__ */ __name(function _process(t3) {
            var r3 = this._data, n3 = r3.words, i3 = r3.sigBytes, s2 = this.blockSize, a2 = i3 / (4 * s2), u3 = (a2 = t3 ? e2.ceil(a2) : e2.max((0 | a2) - this._minBufferSize, 0)) * s2, c2 = e2.min(4 * u3, i3);
            if (u3) {
              for (var h2 = 0; h2 < u3; h2 += s2)
                this._doProcessBlock(n3, h2);
              var l2 = n3.splice(0, u3);
              r3.sigBytes -= c2;
            }
            return new o.init(l2, c2);
          }, "_process"), clone: /* @__PURE__ */ __name(function clone() {
            var e3 = i2.clone.call(this);
            return e3._data = this._data.clone(), e3;
          }, "clone"), _minBufferSize: 0}), l = (n2.Hasher = h.extend({cfg: i2.extend(), init: /* @__PURE__ */ __name(function init(e3) {
            this.cfg = this.cfg.extend(e3), this.reset();
          }, "init"), reset: /* @__PURE__ */ __name(function reset() {
            h.reset.call(this), this._doReset();
          }, "reset"), update: /* @__PURE__ */ __name(function update(e3) {
            return this._append(e3), this._process(), this;
          }, "update"), finalize: /* @__PURE__ */ __name(function finalize(e3) {
            return e3 && this._append(e3), this._doFinalize();
          }, "finalize"), blockSize: 16, _createHelper: /* @__PURE__ */ __name(function _createHelper(e3) {
            return function(t3, r3) {
              return new e3.init(r3).finalize(t3);
            };
          }, "_createHelper"), _createHmacHelper: /* @__PURE__ */ __name(function _createHmacHelper(e3) {
            return function(t3, r3) {
              return new l.HMAC.init(e3, r3).finalize(t3);
            };
          }, "_createHmacHelper")}), r2.algo = {});
          return r2;
        }(Math);
        !function(e2) {
          var t2, r2 = (t2 = y).lib, n2 = r2.Base, i2 = r2.WordArray;
          (t2 = t2.x64 = {}).Word = n2.extend({init: /* @__PURE__ */ __name(function init(e3, t3) {
            this.high = e3, this.low = t3;
          }, "init")}), t2.WordArray = n2.extend({init: /* @__PURE__ */ __name(function init(e3, t3) {
            e3 = this.words = e3 || [], this.sigBytes = t3 != void 0 ? t3 : 8 * e3.length;
          }, "init"), toX32: /* @__PURE__ */ __name(function toX32() {
            for (var e3 = this.words, t3 = e3.length, r3 = [], n3 = 0; n3 < t3; n3++) {
              var o = e3[n3];
              r3.push(o.high), r3.push(o.low);
            }
            return i2.create(r3, this.sigBytes);
          }, "toX32"), clone: /* @__PURE__ */ __name(function clone() {
            for (var e3 = n2.clone.call(this), t3 = e3.words = this.words.slice(0), r3 = t3.length, i3 = 0; i3 < r3; i3++)
              t3[i3] = t3[i3].clone();
            return e3;
          }, "clone")});
        }(), function() {
          var e2 = y, t2 = e2.lib.WordArray;
          e2.enc.Base64 = {stringify: /* @__PURE__ */ __name(function stringify(e3) {
            var t3 = e3.words, r2 = e3.sigBytes, n2 = this._map;
            e3.clamp(), e3 = [];
            for (var i2 = 0; i2 < r2; i2 += 3)
              for (var o = (t3[i2 >>> 2] >>> 24 - i2 % 4 * 8 & 255) << 16 | (t3[i2 + 1 >>> 2] >>> 24 - (i2 + 1) % 4 * 8 & 255) << 8 | t3[i2 + 2 >>> 2] >>> 24 - (i2 + 2) % 4 * 8 & 255, s = 0; 4 > s && i2 + 0.75 * s < r2; s++)
                e3.push(n2.charAt(o >>> 6 * (3 - s) & 63));
            if (t3 = n2.charAt(64))
              for (; e3.length % 4; )
                e3.push(t3);
            return e3.join("");
          }, "stringify"), parse: /* @__PURE__ */ __name(function parse(e3) {
            var r2 = e3.length, n2 = this._map;
            (i2 = n2.charAt(64)) && ((i2 = e3.indexOf(i2)) != -1 && (r2 = i2));
            for (var i2 = [], o = 0, s = 0; s < r2; s++)
              if (s % 4) {
                var a = n2.indexOf(e3.charAt(s - 1)) << s % 4 * 2, u2 = n2.indexOf(e3.charAt(s)) >>> 6 - s % 4 * 2;
                i2[o >>> 2] |= (a | u2) << 24 - o % 4 * 8, o++;
              }
            return t2.create(i2, o);
          }, "parse"), _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};
        }(), function(e2) {
          for (var t2 = y, r2 = (i2 = t2.lib).WordArray, n2 = i2.Hasher, i2 = t2.algo, o = [], s = [], a = /* @__PURE__ */ __name(function u3(e3) {
            return 4294967296 * (e3 - (0 | e3)) | 0;
          }, "u"), u2 = 2, c = 0; 64 > c; ) {
            var h;
            e: {
              h = u2;
              for (var l = e2.sqrt(h), f = 2; f <= l; f++)
                if (!(h % f)) {
                  h = false;
                  break e;
                }
              h = true;
            }
            h && (8 > c && (o[c] = a(e2.pow(u2, 0.5))), s[c] = a(e2.pow(u2, 1 / 3)), c++), u2++;
          }
          var g = [];
          i2 = i2.SHA256 = n2.extend({_doReset: /* @__PURE__ */ __name(function _doReset() {
            this._hash = new r2.init(o.slice(0));
          }, "_doReset"), _doProcessBlock: /* @__PURE__ */ __name(function _doProcessBlock(e3, t3) {
            for (var r3 = this._hash.words, n3 = r3[0], i3 = r3[1], o2 = r3[2], a2 = r3[3], u3 = r3[4], c2 = r3[5], h2 = r3[6], l2 = r3[7], f2 = 0; 64 > f2; f2++) {
              if (16 > f2)
                g[f2] = 0 | e3[t3 + f2];
              else {
                var p2 = g[f2 - 15], d = g[f2 - 2];
                g[f2] = ((p2 << 25 | p2 >>> 7) ^ (p2 << 14 | p2 >>> 18) ^ p2 >>> 3) + g[f2 - 7] + ((d << 15 | d >>> 17) ^ (d << 13 | d >>> 19) ^ d >>> 10) + g[f2 - 16];
              }
              p2 = l2 + ((u3 << 26 | u3 >>> 6) ^ (u3 << 21 | u3 >>> 11) ^ (u3 << 7 | u3 >>> 25)) + (u3 & c2 ^ ~u3 & h2) + s[f2] + g[f2], d = ((n3 << 30 | n3 >>> 2) ^ (n3 << 19 | n3 >>> 13) ^ (n3 << 10 | n3 >>> 22)) + (n3 & i3 ^ n3 & o2 ^ i3 & o2), l2 = h2, h2 = c2, c2 = u3, u3 = a2 + p2 | 0, a2 = o2, o2 = i3, i3 = n3, n3 = p2 + d | 0;
            }
            r3[0] = r3[0] + n3 | 0, r3[1] = r3[1] + i3 | 0, r3[2] = r3[2] + o2 | 0, r3[3] = r3[3] + a2 | 0, r3[4] = r3[4] + u3 | 0, r3[5] = r3[5] + c2 | 0, r3[6] = r3[6] + h2 | 0, r3[7] = r3[7] + l2 | 0;
          }, "_doProcessBlock"), _doFinalize: /* @__PURE__ */ __name(function _doFinalize() {
            var t3 = this._data, r3 = t3.words, n3 = 8 * this._nDataBytes, i3 = 8 * t3.sigBytes;
            return r3[i3 >>> 5] |= 128 << 24 - i3 % 32, r3[14 + (i3 + 64 >>> 9 << 4)] = e2.floor(n3 / 4294967296), r3[15 + (i3 + 64 >>> 9 << 4)] = n3, t3.sigBytes = 4 * r3.length, this._process(), this._hash;
          }, "_doFinalize"), clone: /* @__PURE__ */ __name(function clone() {
            var e3 = n2.clone.call(this);
            return e3._hash = this._hash.clone(), e3;
          }, "clone")});
          t2.SHA256 = n2._createHelper(i2), t2.HmacSHA256 = n2._createHmacHelper(i2);
        }(Math), function() {
          function a() {
            return r2.create.apply(r2, arguments);
          }
          __name(a, "a");
          for (var e2 = y, t2 = e2.lib.Hasher, r2 = (i2 = e2.x64).Word, n2 = i2.WordArray, i2 = e2.algo, o = [a(1116352408, 3609767458), a(1899447441, 602891725), a(3049323471, 3964484399), a(3921009573, 2173295548), a(961987163, 4081628472), a(1508970993, 3053834265), a(2453635748, 2937671579), a(2870763221, 3664609560), a(3624381080, 2734883394), a(310598401, 1164996542), a(607225278, 1323610764), a(1426881987, 3590304994), a(1925078388, 4068182383), a(2162078206, 991336113), a(2614888103, 633803317), a(3248222580, 3479774868), a(3835390401, 2666613458), a(4022224774, 944711139), a(264347078, 2341262773), a(604807628, 2007800933), a(770255983, 1495990901), a(1249150122, 1856431235), a(1555081692, 3175218132), a(1996064986, 2198950837), a(2554220882, 3999719339), a(2821834349, 766784016), a(2952996808, 2566594879), a(3210313671, 3203337956), a(3336571891, 1034457026), a(3584528711, 2466948901), a(113926993, 3758326383), a(338241895, 168717936), a(666307205, 1188179964), a(773529912, 1546045734), a(1294757372, 1522805485), a(1396182291, 2643833823), a(1695183700, 2343527390), a(1986661051, 1014477480), a(2177026350, 1206759142), a(2456956037, 344077627), a(2730485921, 1290863460), a(2820302411, 3158454273), a(3259730800, 3505952657), a(3345764771, 106217008), a(3516065817, 3606008344), a(3600352804, 1432725776), a(4094571909, 1467031594), a(275423344, 851169720), a(430227734, 3100823752), a(506948616, 1363258195), a(659060556, 3750685593), a(883997877, 3785050280), a(958139571, 3318307427), a(1322822218, 3812723403), a(1537002063, 2003034995), a(1747873779, 3602036899), a(1955562222, 1575990012), a(2024104815, 1125592928), a(2227730452, 2716904306), a(2361852424, 442776044), a(2428436474, 593698344), a(2756734187, 3733110249), a(3204031479, 2999351573), a(3329325298, 3815920427), a(3391569614, 3928383900), a(3515267271, 566280711), a(3940187606, 3454069534), a(4118630271, 4000239992), a(116418474, 1914138554), a(174292421, 2731055270), a(289380356, 3203993006), a(460393269, 320620315), a(685471733, 587496836), a(852142971, 1086792851), a(1017036298, 365543100), a(1126000580, 2618297676), a(1288033470, 3409855158), a(1501505948, 4234509866), a(1607167915, 987167468), a(1816402316, 1246189591)], s = [], u2 = 0; 80 > u2; u2++)
            s[u2] = a();
          i2 = i2.SHA512 = t2.extend({_doReset: /* @__PURE__ */ __name(function _doReset() {
            this._hash = new n2.init([new r2.init(1779033703, 4089235720), new r2.init(3144134277, 2227873595), new r2.init(1013904242, 4271175723), new r2.init(2773480762, 1595750129), new r2.init(1359893119, 2917565137), new r2.init(2600822924, 725511199), new r2.init(528734635, 4215389547), new r2.init(1541459225, 327033209)]);
          }, "_doReset"), _doProcessBlock: /* @__PURE__ */ __name(function _doProcessBlock(e3, t3) {
            for (var r3 = (l = this._hash.words)[0], n3 = l[1], i3 = l[2], a2 = l[3], u3 = l[4], c = l[5], h = l[6], l = l[7], f = r3.high, g = r3.low, p2 = n3.high, d = n3.low, v2 = i3.high, y2 = i3.low, m = a2.high, _2 = a2.low, S2 = u3.high, b = u3.low, F2 = c.high, w2 = c.low, E2 = h.high, x = h.low, C2 = l.high, k = l.low, A = f, P2 = g, I2 = p2, B = d, R2 = v2, T2 = y2, U2 = m, D2 = _2, M2 = S2, L2 = b, N2 = F2, O2 = w2, H2 = E2, j = x, K2 = C2, V2 = k, q2 = 0; 80 > q2; q2++) {
              var W2 = s[q2];
              if (16 > q2)
                var J2 = W2.high = 0 | e3[t3 + 2 * q2], z2 = W2.low = 0 | e3[t3 + 2 * q2 + 1];
              else {
                J2 = ((z2 = (J2 = s[q2 - 15]).high) >>> 1 | (Y2 = J2.low) << 31) ^ (z2 >>> 8 | Y2 << 24) ^ z2 >>> 7;
                var Y2 = (Y2 >>> 1 | z2 << 31) ^ (Y2 >>> 8 | z2 << 24) ^ (Y2 >>> 7 | z2 << 25), G = ((z2 = (G = s[q2 - 2]).high) >>> 19 | (X = G.low) << 13) ^ (z2 << 3 | X >>> 29) ^ z2 >>> 6, X = (X >>> 19 | z2 << 13) ^ (X << 3 | z2 >>> 29) ^ (X >>> 6 | z2 << 26), $ = (z2 = s[q2 - 7]).high, Q = (Z = s[q2 - 16]).high, Z = Z.low;
                J2 = (J2 = (J2 = J2 + $ + ((z2 = Y2 + z2.low) >>> 0 < Y2 >>> 0 ? 1 : 0)) + G + ((z2 = z2 + X) >>> 0 < X >>> 0 ? 1 : 0)) + Q + ((z2 = z2 + Z) >>> 0 < Z >>> 0 ? 1 : 0);
                W2.high = J2, W2.low = z2;
              }
              $ = M2 & N2 ^ ~M2 & H2, Z = L2 & O2 ^ ~L2 & j, W2 = A & I2 ^ A & R2 ^ I2 & R2;
              var ee = P2 & B ^ P2 & T2 ^ B & T2, te = (Y2 = (A >>> 28 | P2 << 4) ^ (A << 30 | P2 >>> 2) ^ (A << 25 | P2 >>> 7), G = (P2 >>> 28 | A << 4) ^ (P2 << 30 | A >>> 2) ^ (P2 << 25 | A >>> 7), (X = o[q2]).high), re = X.low;
              Q = (Q = (Q = (Q = K2 + ((M2 >>> 14 | L2 << 18) ^ (M2 >>> 18 | L2 << 14) ^ (M2 << 23 | L2 >>> 9)) + ((X = V2 + ((L2 >>> 14 | M2 << 18) ^ (L2 >>> 18 | M2 << 14) ^ (L2 << 23 | M2 >>> 9))) >>> 0 < V2 >>> 0 ? 1 : 0)) + $ + ((X = X + Z) >>> 0 < Z >>> 0 ? 1 : 0)) + te + ((X = X + re) >>> 0 < re >>> 0 ? 1 : 0)) + J2 + ((X = X + z2) >>> 0 < z2 >>> 0 ? 1 : 0), W2 = Y2 + W2 + ((z2 = G + ee) >>> 0 < G >>> 0 ? 1 : 0), K2 = H2, V2 = j, H2 = N2, j = O2, N2 = M2, O2 = L2, M2 = U2 + Q + ((L2 = D2 + X | 0) >>> 0 < D2 >>> 0 ? 1 : 0) | 0, U2 = R2, D2 = T2, R2 = I2, T2 = B, I2 = A, B = P2, A = Q + W2 + ((P2 = X + z2 | 0) >>> 0 < X >>> 0 ? 1 : 0) | 0;
            }
            g = r3.low = g + P2, r3.high = f + A + (g >>> 0 < P2 >>> 0 ? 1 : 0), d = n3.low = d + B, n3.high = p2 + I2 + (d >>> 0 < B >>> 0 ? 1 : 0), y2 = i3.low = y2 + T2, i3.high = v2 + R2 + (y2 >>> 0 < T2 >>> 0 ? 1 : 0), _2 = a2.low = _2 + D2, a2.high = m + U2 + (_2 >>> 0 < D2 >>> 0 ? 1 : 0), b = u3.low = b + L2, u3.high = S2 + M2 + (b >>> 0 < L2 >>> 0 ? 1 : 0), w2 = c.low = w2 + O2, c.high = F2 + N2 + (w2 >>> 0 < O2 >>> 0 ? 1 : 0), x = h.low = x + j, h.high = E2 + H2 + (x >>> 0 < j >>> 0 ? 1 : 0), k = l.low = k + V2, l.high = C2 + K2 + (k >>> 0 < V2 >>> 0 ? 1 : 0);
          }, "_doProcessBlock"), _doFinalize: /* @__PURE__ */ __name(function _doFinalize() {
            var e3 = this._data, t3 = e3.words, r3 = 8 * this._nDataBytes, n3 = 8 * e3.sigBytes;
            return t3[n3 >>> 5] |= 128 << 24 - n3 % 32, t3[30 + (n3 + 128 >>> 10 << 5)] = Math.floor(r3 / 4294967296), t3[31 + (n3 + 128 >>> 10 << 5)] = r3, e3.sigBytes = 4 * t3.length, this._process(), this._hash.toX32();
          }, "_doFinalize"), clone: /* @__PURE__ */ __name(function clone() {
            var e3 = t2.clone.call(this);
            return e3._hash = this._hash.clone(), e3;
          }, "clone"), blockSize: 32}), e2.SHA512 = t2._createHelper(i2), e2.HmacSHA512 = t2._createHmacHelper(i2);
        }(), function() {
          var e2 = y, t2 = (i2 = e2.x64).Word, r2 = i2.WordArray, n2 = (i2 = e2.algo).SHA512, i2 = i2.SHA384 = n2.extend({_doReset: /* @__PURE__ */ __name(function _doReset() {
            this._hash = new r2.init([new t2.init(3418070365, 3238371032), new t2.init(1654270250, 914150663), new t2.init(2438529370, 812702999), new t2.init(355462360, 4144912697), new t2.init(1731405415, 4290775857), new t2.init(2394180231, 1750603025), new t2.init(3675008525, 1694076839), new t2.init(1203062813, 3204075428)]);
          }, "_doReset"), _doFinalize: /* @__PURE__ */ __name(function _doFinalize() {
            var e3 = n2._doFinalize.call(this);
            return e3.sigBytes -= 16, e3;
          }, "_doFinalize")});
          e2.SHA384 = n2._createHelper(i2), e2.HmacSHA384 = n2._createHmacHelper(i2);
        }();
        /*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
         */
        var _, S = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", F = "=";
        function hex2b64(e2) {
          var t2, r2, n2 = "";
          for (t2 = 0; t2 + 3 <= e2.length; t2 += 3)
            r2 = parseInt(e2.substring(t2, t2 + 3), 16), n2 += S.charAt(r2 >> 6) + S.charAt(63 & r2);
          if (t2 + 1 == e2.length ? (r2 = parseInt(e2.substring(t2, t2 + 1), 16), n2 += S.charAt(r2 << 2)) : t2 + 2 == e2.length && (r2 = parseInt(e2.substring(t2, t2 + 2), 16), n2 += S.charAt(r2 >> 2) + S.charAt((3 & r2) << 4)), F)
            for (; (3 & n2.length) > 0; )
              n2 += F;
          return n2;
        }
        __name(hex2b64, "hex2b64");
        function b64tohex(e2) {
          var t2, r2, n2, i2 = "", o = 0;
          for (t2 = 0; t2 < e2.length && e2.charAt(t2) != F; ++t2)
            (n2 = S.indexOf(e2.charAt(t2))) < 0 || (o == 0 ? (i2 += int2char(n2 >> 2), r2 = 3 & n2, o = 1) : o == 1 ? (i2 += int2char(r2 << 2 | n2 >> 4), r2 = 15 & n2, o = 2) : o == 2 ? (i2 += int2char(r2), i2 += int2char(n2 >> 2), r2 = 3 & n2, o = 3) : (i2 += int2char(r2 << 2 | n2 >> 4), i2 += int2char(15 & n2), o = 0));
          return o == 1 && (i2 += int2char(r2 << 2)), i2;
        }
        __name(b64tohex, "b64tohex");
        function b64toBA(e2) {
          var t2, r2 = b64tohex(e2), n2 = new Array();
          for (t2 = 0; 2 * t2 < r2.length; ++t2)
            n2[t2] = parseInt(r2.substring(2 * t2, 2 * t2 + 2), 16);
          return n2;
        }
        __name(b64toBA, "b64toBA");
        function BigInteger(e2, t2, r2) {
          e2 != null && (typeof e2 == "number" ? this.fromNumber(e2, t2, r2) : t2 == null && typeof e2 != "string" ? this.fromString(e2, 256) : this.fromString(e2, t2));
        }
        __name(BigInteger, "BigInteger");
        function nbi() {
          return new BigInteger(null);
        }
        __name(nbi, "nbi");
        u.appName == "Microsoft Internet Explorer" ? (BigInteger.prototype.am = /* @__PURE__ */ __name(function am2(e2, t2, r2, n2, i2, o) {
          for (var s = 32767 & t2, a = t2 >> 15; --o >= 0; ) {
            var u2 = 32767 & this[e2], c = this[e2++] >> 15, h = a * u2 + c * s;
            i2 = ((u2 = s * u2 + ((32767 & h) << 15) + r2[n2] + (1073741823 & i2)) >>> 30) + (h >>> 15) + a * c + (i2 >>> 30), r2[n2++] = 1073741823 & u2;
          }
          return i2;
        }, "am2"), _ = 30) : u.appName != "Netscape" ? (BigInteger.prototype.am = /* @__PURE__ */ __name(function am1(e2, t2, r2, n2, i2, o) {
          for (; --o >= 0; ) {
            var s = t2 * this[e2++] + r2[n2] + i2;
            i2 = Math.floor(s / 67108864), r2[n2++] = 67108863 & s;
          }
          return i2;
        }, "am1"), _ = 26) : (BigInteger.prototype.am = /* @__PURE__ */ __name(function am3(e2, t2, r2, n2, i2, o) {
          for (var s = 16383 & t2, a = t2 >> 14; --o >= 0; ) {
            var u2 = 16383 & this[e2], c = this[e2++] >> 14, h = a * u2 + c * s;
            i2 = ((u2 = s * u2 + ((16383 & h) << 14) + r2[n2] + i2) >> 28) + (h >> 14) + a * c, r2[n2++] = 268435455 & u2;
          }
          return i2;
        }, "am3"), _ = 28), BigInteger.prototype.DB = _, BigInteger.prototype.DM = (1 << _) - 1, BigInteger.prototype.DV = 1 << _;
        BigInteger.prototype.FV = Math.pow(2, 52), BigInteger.prototype.F1 = 52 - _, BigInteger.prototype.F2 = 2 * _ - 52;
        var w, E, C = "0123456789abcdefghijklmnopqrstuvwxyz", P = new Array();
        for (w = "0".charCodeAt(0), E = 0; E <= 9; ++E)
          P[w++] = E;
        for (w = "a".charCodeAt(0), E = 10; E < 36; ++E)
          P[w++] = E;
        for (w = "A".charCodeAt(0), E = 10; E < 36; ++E)
          P[w++] = E;
        function int2char(e2) {
          return C.charAt(e2);
        }
        __name(int2char, "int2char");
        function intAt(e2, t2) {
          var r2 = P[e2.charCodeAt(t2)];
          return r2 == null ? -1 : r2;
        }
        __name(intAt, "intAt");
        function nbv(e2) {
          var t2 = nbi();
          return t2.fromInt(e2), t2;
        }
        __name(nbv, "nbv");
        function nbits(e2) {
          var t2, r2 = 1;
          return (t2 = e2 >>> 16) != 0 && (e2 = t2, r2 += 16), (t2 = e2 >> 8) != 0 && (e2 = t2, r2 += 8), (t2 = e2 >> 4) != 0 && (e2 = t2, r2 += 4), (t2 = e2 >> 2) != 0 && (e2 = t2, r2 += 2), (t2 = e2 >> 1) != 0 && (e2 = t2, r2 += 1), r2;
        }
        __name(nbits, "nbits");
        function Classic(e2) {
          this.m = e2;
        }
        __name(Classic, "Classic");
        function Montgomery(e2) {
          this.m = e2, this.mp = e2.invDigit(), this.mpl = 32767 & this.mp, this.mph = this.mp >> 15, this.um = (1 << e2.DB - 15) - 1, this.mt2 = 2 * e2.t;
        }
        __name(Montgomery, "Montgomery");
        function op_and(e2, t2) {
          return e2 & t2;
        }
        __name(op_and, "op_and");
        function op_or(e2, t2) {
          return e2 | t2;
        }
        __name(op_or, "op_or");
        function op_xor(e2, t2) {
          return e2 ^ t2;
        }
        __name(op_xor, "op_xor");
        function op_andnot(e2, t2) {
          return e2 & ~t2;
        }
        __name(op_andnot, "op_andnot");
        function lbit(e2) {
          if (e2 == 0)
            return -1;
          var t2 = 0;
          return (65535 & e2) == 0 && (e2 >>= 16, t2 += 16), (255 & e2) == 0 && (e2 >>= 8, t2 += 8), (15 & e2) == 0 && (e2 >>= 4, t2 += 4), (3 & e2) == 0 && (e2 >>= 2, t2 += 2), (1 & e2) == 0 && ++t2, t2;
        }
        __name(lbit, "lbit");
        function cbit(e2) {
          for (var t2 = 0; e2 != 0; )
            e2 &= e2 - 1, ++t2;
          return t2;
        }
        __name(cbit, "cbit");
        function NullExp() {
        }
        __name(NullExp, "NullExp");
        function nNop(e2) {
          return e2;
        }
        __name(nNop, "nNop");
        function Barrett(e2) {
          this.r2 = nbi(), this.q3 = nbi(), BigInteger.ONE.dlShiftTo(2 * e2.t, this.r2), this.mu = this.r2.divide(e2), this.m = e2;
        }
        __name(Barrett, "Barrett");
        Classic.prototype.convert = /* @__PURE__ */ __name(function cConvert(e2) {
          return e2.s < 0 || e2.compareTo(this.m) >= 0 ? e2.mod(this.m) : e2;
        }, "cConvert"), Classic.prototype.revert = /* @__PURE__ */ __name(function cRevert(e2) {
          return e2;
        }, "cRevert"), Classic.prototype.reduce = /* @__PURE__ */ __name(function cReduce(e2) {
          e2.divRemTo(this.m, null, e2);
        }, "cReduce"), Classic.prototype.mulTo = /* @__PURE__ */ __name(function cMulTo(e2, t2, r2) {
          e2.multiplyTo(t2, r2), this.reduce(r2);
        }, "cMulTo"), Classic.prototype.sqrTo = /* @__PURE__ */ __name(function cSqrTo(e2, t2) {
          e2.squareTo(t2), this.reduce(t2);
        }, "cSqrTo"), Montgomery.prototype.convert = /* @__PURE__ */ __name(function montConvert(e2) {
          var t2 = nbi();
          return e2.abs().dlShiftTo(this.m.t, t2), t2.divRemTo(this.m, null, t2), e2.s < 0 && t2.compareTo(BigInteger.ZERO) > 0 && this.m.subTo(t2, t2), t2;
        }, "montConvert"), Montgomery.prototype.revert = /* @__PURE__ */ __name(function montRevert(e2) {
          var t2 = nbi();
          return e2.copyTo(t2), this.reduce(t2), t2;
        }, "montRevert"), Montgomery.prototype.reduce = /* @__PURE__ */ __name(function montReduce(e2) {
          for (; e2.t <= this.mt2; )
            e2[e2.t++] = 0;
          for (var t2 = 0; t2 < this.m.t; ++t2) {
            var r2 = 32767 & e2[t2], n2 = r2 * this.mpl + ((r2 * this.mph + (e2[t2] >> 15) * this.mpl & this.um) << 15) & e2.DM;
            for (e2[r2 = t2 + this.m.t] += this.m.am(0, n2, e2, t2, 0, this.m.t); e2[r2] >= e2.DV; )
              e2[r2] -= e2.DV, e2[++r2]++;
          }
          e2.clamp(), e2.drShiftTo(this.m.t, e2), e2.compareTo(this.m) >= 0 && e2.subTo(this.m, e2);
        }, "montReduce"), Montgomery.prototype.mulTo = /* @__PURE__ */ __name(function montMulTo(e2, t2, r2) {
          e2.multiplyTo(t2, r2), this.reduce(r2);
        }, "montMulTo"), Montgomery.prototype.sqrTo = /* @__PURE__ */ __name(function montSqrTo(e2, t2) {
          e2.squareTo(t2), this.reduce(t2);
        }, "montSqrTo"), BigInteger.prototype.copyTo = /* @__PURE__ */ __name(function bnpCopyTo(e2) {
          for (var t2 = this.t - 1; t2 >= 0; --t2)
            e2[t2] = this[t2];
          e2.t = this.t, e2.s = this.s;
        }, "bnpCopyTo"), BigInteger.prototype.fromInt = /* @__PURE__ */ __name(function bnpFromInt(e2) {
          this.t = 1, this.s = e2 < 0 ? -1 : 0, e2 > 0 ? this[0] = e2 : e2 < -1 ? this[0] = e2 + this.DV : this.t = 0;
        }, "bnpFromInt"), BigInteger.prototype.fromString = /* @__PURE__ */ __name(function bnpFromString(e2, t2) {
          var r2;
          if (t2 == 16)
            r2 = 4;
          else if (t2 == 8)
            r2 = 3;
          else if (t2 == 256)
            r2 = 8;
          else if (t2 == 2)
            r2 = 1;
          else if (t2 == 32)
            r2 = 5;
          else {
            if (t2 != 4)
              return void this.fromRadix(e2, t2);
            r2 = 2;
          }
          this.t = 0, this.s = 0;
          for (var n2 = e2.length, i2 = false, o = 0; --n2 >= 0; ) {
            var s = r2 == 8 ? 255 & e2[n2] : intAt(e2, n2);
            s < 0 ? e2.charAt(n2) == "-" && (i2 = true) : (i2 = false, o == 0 ? this[this.t++] = s : o + r2 > this.DB ? (this[this.t - 1] |= (s & (1 << this.DB - o) - 1) << o, this[this.t++] = s >> this.DB - o) : this[this.t - 1] |= s << o, (o += r2) >= this.DB && (o -= this.DB));
          }
          r2 == 8 && (128 & e2[0]) != 0 && (this.s = -1, o > 0 && (this[this.t - 1] |= (1 << this.DB - o) - 1 << o)), this.clamp(), i2 && BigInteger.ZERO.subTo(this, this);
        }, "bnpFromString"), BigInteger.prototype.clamp = /* @__PURE__ */ __name(function bnpClamp() {
          for (var e2 = this.s & this.DM; this.t > 0 && this[this.t - 1] == e2; )
            --this.t;
        }, "bnpClamp"), BigInteger.prototype.dlShiftTo = /* @__PURE__ */ __name(function bnpDLShiftTo(e2, t2) {
          var r2;
          for (r2 = this.t - 1; r2 >= 0; --r2)
            t2[r2 + e2] = this[r2];
          for (r2 = e2 - 1; r2 >= 0; --r2)
            t2[r2] = 0;
          t2.t = this.t + e2, t2.s = this.s;
        }, "bnpDLShiftTo"), BigInteger.prototype.drShiftTo = /* @__PURE__ */ __name(function bnpDRShiftTo(e2, t2) {
          for (var r2 = e2; r2 < this.t; ++r2)
            t2[r2 - e2] = this[r2];
          t2.t = Math.max(this.t - e2, 0), t2.s = this.s;
        }, "bnpDRShiftTo"), BigInteger.prototype.lShiftTo = /* @__PURE__ */ __name(function bnpLShiftTo(e2, t2) {
          var r2, n2 = e2 % this.DB, i2 = this.DB - n2, o = (1 << i2) - 1, s = Math.floor(e2 / this.DB), a = this.s << n2 & this.DM;
          for (r2 = this.t - 1; r2 >= 0; --r2)
            t2[r2 + s + 1] = this[r2] >> i2 | a, a = (this[r2] & o) << n2;
          for (r2 = s - 1; r2 >= 0; --r2)
            t2[r2] = 0;
          t2[s] = a, t2.t = this.t + s + 1, t2.s = this.s, t2.clamp();
        }, "bnpLShiftTo"), BigInteger.prototype.rShiftTo = /* @__PURE__ */ __name(function bnpRShiftTo(e2, t2) {
          t2.s = this.s;
          var r2 = Math.floor(e2 / this.DB);
          if (r2 >= this.t)
            t2.t = 0;
          else {
            var n2 = e2 % this.DB, i2 = this.DB - n2, o = (1 << n2) - 1;
            t2[0] = this[r2] >> n2;
            for (var s = r2 + 1; s < this.t; ++s)
              t2[s - r2 - 1] |= (this[s] & o) << i2, t2[s - r2] = this[s] >> n2;
            n2 > 0 && (t2[this.t - r2 - 1] |= (this.s & o) << i2), t2.t = this.t - r2, t2.clamp();
          }
        }, "bnpRShiftTo"), BigInteger.prototype.subTo = /* @__PURE__ */ __name(function bnpSubTo(e2, t2) {
          for (var r2 = 0, n2 = 0, i2 = Math.min(e2.t, this.t); r2 < i2; )
            n2 += this[r2] - e2[r2], t2[r2++] = n2 & this.DM, n2 >>= this.DB;
          if (e2.t < this.t) {
            for (n2 -= e2.s; r2 < this.t; )
              n2 += this[r2], t2[r2++] = n2 & this.DM, n2 >>= this.DB;
            n2 += this.s;
          } else {
            for (n2 += this.s; r2 < e2.t; )
              n2 -= e2[r2], t2[r2++] = n2 & this.DM, n2 >>= this.DB;
            n2 -= e2.s;
          }
          t2.s = n2 < 0 ? -1 : 0, n2 < -1 ? t2[r2++] = this.DV + n2 : n2 > 0 && (t2[r2++] = n2), t2.t = r2, t2.clamp();
        }, "bnpSubTo"), BigInteger.prototype.multiplyTo = /* @__PURE__ */ __name(function bnpMultiplyTo(e2, t2) {
          var r2 = this.abs(), n2 = e2.abs(), i2 = r2.t;
          for (t2.t = i2 + n2.t; --i2 >= 0; )
            t2[i2] = 0;
          for (i2 = 0; i2 < n2.t; ++i2)
            t2[i2 + r2.t] = r2.am(0, n2[i2], t2, i2, 0, r2.t);
          t2.s = 0, t2.clamp(), this.s != e2.s && BigInteger.ZERO.subTo(t2, t2);
        }, "bnpMultiplyTo"), BigInteger.prototype.squareTo = /* @__PURE__ */ __name(function bnpSquareTo(e2) {
          for (var t2 = this.abs(), r2 = e2.t = 2 * t2.t; --r2 >= 0; )
            e2[r2] = 0;
          for (r2 = 0; r2 < t2.t - 1; ++r2) {
            var n2 = t2.am(r2, t2[r2], e2, 2 * r2, 0, 1);
            (e2[r2 + t2.t] += t2.am(r2 + 1, 2 * t2[r2], e2, 2 * r2 + 1, n2, t2.t - r2 - 1)) >= t2.DV && (e2[r2 + t2.t] -= t2.DV, e2[r2 + t2.t + 1] = 1);
          }
          e2.t > 0 && (e2[e2.t - 1] += t2.am(r2, t2[r2], e2, 2 * r2, 0, 1)), e2.s = 0, e2.clamp();
        }, "bnpSquareTo"), BigInteger.prototype.divRemTo = /* @__PURE__ */ __name(function bnpDivRemTo(e2, t2, r2) {
          var n2 = e2.abs();
          if (!(n2.t <= 0)) {
            var i2 = this.abs();
            if (i2.t < n2.t)
              return t2 != null && t2.fromInt(0), void (r2 != null && this.copyTo(r2));
            r2 == null && (r2 = nbi());
            var o = nbi(), s = this.s, a = e2.s, u2 = this.DB - nbits(n2[n2.t - 1]);
            u2 > 0 ? (n2.lShiftTo(u2, o), i2.lShiftTo(u2, r2)) : (n2.copyTo(o), i2.copyTo(r2));
            var c = o.t, h = o[c - 1];
            if (h != 0) {
              var l = h * (1 << this.F1) + (c > 1 ? o[c - 2] >> this.F2 : 0), f = this.FV / l, g = (1 << this.F1) / l, p2 = 1 << this.F2, d = r2.t, v2 = d - c, y2 = t2 == null ? nbi() : t2;
              for (o.dlShiftTo(v2, y2), r2.compareTo(y2) >= 0 && (r2[r2.t++] = 1, r2.subTo(y2, r2)), BigInteger.ONE.dlShiftTo(c, y2), y2.subTo(o, o); o.t < c; )
                o[o.t++] = 0;
              for (; --v2 >= 0; ) {
                var m = r2[--d] == h ? this.DM : Math.floor(r2[d] * f + (r2[d - 1] + p2) * g);
                if ((r2[d] += o.am(0, m, r2, v2, 0, c)) < m)
                  for (o.dlShiftTo(v2, y2), r2.subTo(y2, r2); r2[d] < --m; )
                    r2.subTo(y2, r2);
              }
              t2 != null && (r2.drShiftTo(c, t2), s != a && BigInteger.ZERO.subTo(t2, t2)), r2.t = c, r2.clamp(), u2 > 0 && r2.rShiftTo(u2, r2), s < 0 && BigInteger.ZERO.subTo(r2, r2);
            }
          }
        }, "bnpDivRemTo"), BigInteger.prototype.invDigit = /* @__PURE__ */ __name(function bnpInvDigit() {
          if (this.t < 1)
            return 0;
          var e2 = this[0];
          if ((1 & e2) == 0)
            return 0;
          var t2 = 3 & e2;
          return (t2 = (t2 = (t2 = (t2 = t2 * (2 - (15 & e2) * t2) & 15) * (2 - (255 & e2) * t2) & 255) * (2 - ((65535 & e2) * t2 & 65535)) & 65535) * (2 - e2 * t2 % this.DV) % this.DV) > 0 ? this.DV - t2 : -t2;
        }, "bnpInvDigit"), BigInteger.prototype.isEven = /* @__PURE__ */ __name(function bnpIsEven() {
          return (this.t > 0 ? 1 & this[0] : this.s) == 0;
        }, "bnpIsEven"), BigInteger.prototype.exp = /* @__PURE__ */ __name(function bnpExp(e2, t2) {
          if (e2 > 4294967295 || e2 < 1)
            return BigInteger.ONE;
          var r2 = nbi(), n2 = nbi(), i2 = t2.convert(this), o = nbits(e2) - 1;
          for (i2.copyTo(r2); --o >= 0; )
            if (t2.sqrTo(r2, n2), (e2 & 1 << o) > 0)
              t2.mulTo(n2, i2, r2);
            else {
              var s = r2;
              r2 = n2, n2 = s;
            }
          return t2.revert(r2);
        }, "bnpExp"), BigInteger.prototype.toString = /* @__PURE__ */ __name(function bnToString(e2) {
          if (this.s < 0)
            return "-" + this.negate().toString(e2);
          var t2;
          if (e2 == 16)
            t2 = 4;
          else if (e2 == 8)
            t2 = 3;
          else if (e2 == 2)
            t2 = 1;
          else if (e2 == 32)
            t2 = 5;
          else {
            if (e2 != 4)
              return this.toRadix(e2);
            t2 = 2;
          }
          var r2, n2 = (1 << t2) - 1, i2 = false, o = "", s = this.t, a = this.DB - s * this.DB % t2;
          if (s-- > 0)
            for (a < this.DB && (r2 = this[s] >> a) > 0 && (i2 = true, o = int2char(r2)); s >= 0; )
              a < t2 ? (r2 = (this[s] & (1 << a) - 1) << t2 - a, r2 |= this[--s] >> (a += this.DB - t2)) : (r2 = this[s] >> (a -= t2) & n2, a <= 0 && (a += this.DB, --s)), r2 > 0 && (i2 = true), i2 && (o += int2char(r2));
          return i2 ? o : "0";
        }, "bnToString"), BigInteger.prototype.negate = /* @__PURE__ */ __name(function bnNegate() {
          var e2 = nbi();
          return BigInteger.ZERO.subTo(this, e2), e2;
        }, "bnNegate"), BigInteger.prototype.abs = /* @__PURE__ */ __name(function bnAbs() {
          return this.s < 0 ? this.negate() : this;
        }, "bnAbs"), BigInteger.prototype.compareTo = /* @__PURE__ */ __name(function bnCompareTo(e2) {
          var t2 = this.s - e2.s;
          if (t2 != 0)
            return t2;
          var r2 = this.t;
          if ((t2 = r2 - e2.t) != 0)
            return this.s < 0 ? -t2 : t2;
          for (; --r2 >= 0; )
            if ((t2 = this[r2] - e2[r2]) != 0)
              return t2;
          return 0;
        }, "bnCompareTo"), BigInteger.prototype.bitLength = /* @__PURE__ */ __name(function bnBitLength() {
          return this.t <= 0 ? 0 : this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ this.s & this.DM);
        }, "bnBitLength"), BigInteger.prototype.mod = /* @__PURE__ */ __name(function bnMod(e2) {
          var t2 = nbi();
          return this.abs().divRemTo(e2, null, t2), this.s < 0 && t2.compareTo(BigInteger.ZERO) > 0 && e2.subTo(t2, t2), t2;
        }, "bnMod"), BigInteger.prototype.modPowInt = /* @__PURE__ */ __name(function bnModPowInt(e2, t2) {
          var r2;
          return r2 = e2 < 256 || t2.isEven() ? new Classic(t2) : new Montgomery(t2), this.exp(e2, r2);
        }, "bnModPowInt"), BigInteger.ZERO = nbv(0), BigInteger.ONE = nbv(1), NullExp.prototype.convert = nNop, NullExp.prototype.revert = nNop, NullExp.prototype.mulTo = /* @__PURE__ */ __name(function nMulTo(e2, t2, r2) {
          e2.multiplyTo(t2, r2);
        }, "nMulTo"), NullExp.prototype.sqrTo = /* @__PURE__ */ __name(function nSqrTo(e2, t2) {
          e2.squareTo(t2);
        }, "nSqrTo"), Barrett.prototype.convert = /* @__PURE__ */ __name(function barrettConvert(e2) {
          if (e2.s < 0 || e2.t > 2 * this.m.t)
            return e2.mod(this.m);
          if (e2.compareTo(this.m) < 0)
            return e2;
          var t2 = nbi();
          return e2.copyTo(t2), this.reduce(t2), t2;
        }, "barrettConvert"), Barrett.prototype.revert = /* @__PURE__ */ __name(function barrettRevert(e2) {
          return e2;
        }, "barrettRevert"), Barrett.prototype.reduce = /* @__PURE__ */ __name(function barrettReduce(e2) {
          for (e2.drShiftTo(this.m.t - 1, this.r2), e2.t > this.m.t + 1 && (e2.t = this.m.t + 1, e2.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); e2.compareTo(this.r2) < 0; )
            e2.dAddOffset(1, this.m.t + 1);
          for (e2.subTo(this.r2, e2); e2.compareTo(this.m) >= 0; )
            e2.subTo(this.m, e2);
        }, "barrettReduce"), Barrett.prototype.mulTo = /* @__PURE__ */ __name(function barrettMulTo(e2, t2, r2) {
          e2.multiplyTo(t2, r2), this.reduce(r2);
        }, "barrettMulTo"), Barrett.prototype.sqrTo = /* @__PURE__ */ __name(function barrettSqrTo(e2, t2) {
          e2.squareTo(t2), this.reduce(t2);
        }, "barrettSqrTo");
        var I = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997], R = (1 << 26) / I[I.length - 1];
        /*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
         */
        function Arcfour() {
          this.i = 0, this.j = 0, this.S = new Array();
        }
        __name(Arcfour, "Arcfour");
        BigInteger.prototype.chunkSize = /* @__PURE__ */ __name(function bnpChunkSize(e2) {
          return Math.floor(Math.LN2 * this.DB / Math.log(e2));
        }, "bnpChunkSize"), BigInteger.prototype.toRadix = /* @__PURE__ */ __name(function bnpToRadix(e2) {
          if (e2 == null && (e2 = 10), this.signum() == 0 || e2 < 2 || e2 > 36)
            return "0";
          var t2 = this.chunkSize(e2), r2 = Math.pow(e2, t2), n2 = nbv(r2), i2 = nbi(), o = nbi(), s = "";
          for (this.divRemTo(n2, i2, o); i2.signum() > 0; )
            s = (r2 + o.intValue()).toString(e2).substr(1) + s, i2.divRemTo(n2, i2, o);
          return o.intValue().toString(e2) + s;
        }, "bnpToRadix"), BigInteger.prototype.fromRadix = /* @__PURE__ */ __name(function bnpFromRadix(e2, t2) {
          this.fromInt(0), t2 == null && (t2 = 10);
          for (var r2 = this.chunkSize(t2), n2 = Math.pow(t2, r2), i2 = false, o = 0, s = 0, a = 0; a < e2.length; ++a) {
            var u2 = intAt(e2, a);
            u2 < 0 ? e2.charAt(a) == "-" && this.signum() == 0 && (i2 = true) : (s = t2 * s + u2, ++o >= r2 && (this.dMultiply(n2), this.dAddOffset(s, 0), o = 0, s = 0));
          }
          o > 0 && (this.dMultiply(Math.pow(t2, o)), this.dAddOffset(s, 0)), i2 && BigInteger.ZERO.subTo(this, this);
        }, "bnpFromRadix"), BigInteger.prototype.fromNumber = /* @__PURE__ */ __name(function bnpFromNumber(e2, t2, r2) {
          if (typeof t2 == "number")
            if (e2 < 2)
              this.fromInt(1);
            else
              for (this.fromNumber(e2, r2), this.testBit(e2 - 1) || this.bitwiseTo(BigInteger.ONE.shiftLeft(e2 - 1), op_or, this), this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(t2); )
                this.dAddOffset(2, 0), this.bitLength() > e2 && this.subTo(BigInteger.ONE.shiftLeft(e2 - 1), this);
          else {
            var n2 = new Array(), i2 = 7 & e2;
            n2.length = 1 + (e2 >> 3), t2.nextBytes(n2), i2 > 0 ? n2[0] &= (1 << i2) - 1 : n2[0] = 0, this.fromString(n2, 256);
          }
        }, "bnpFromNumber"), BigInteger.prototype.bitwiseTo = /* @__PURE__ */ __name(function bnpBitwiseTo(e2, t2, r2) {
          var n2, i2, o = Math.min(e2.t, this.t);
          for (n2 = 0; n2 < o; ++n2)
            r2[n2] = t2(this[n2], e2[n2]);
          if (e2.t < this.t) {
            for (i2 = e2.s & this.DM, n2 = o; n2 < this.t; ++n2)
              r2[n2] = t2(this[n2], i2);
            r2.t = this.t;
          } else {
            for (i2 = this.s & this.DM, n2 = o; n2 < e2.t; ++n2)
              r2[n2] = t2(i2, e2[n2]);
            r2.t = e2.t;
          }
          r2.s = t2(this.s, e2.s), r2.clamp();
        }, "bnpBitwiseTo"), BigInteger.prototype.changeBit = /* @__PURE__ */ __name(function bnpChangeBit(e2, t2) {
          var r2 = BigInteger.ONE.shiftLeft(e2);
          return this.bitwiseTo(r2, t2, r2), r2;
        }, "bnpChangeBit"), BigInteger.prototype.addTo = /* @__PURE__ */ __name(function bnpAddTo(e2, t2) {
          for (var r2 = 0, n2 = 0, i2 = Math.min(e2.t, this.t); r2 < i2; )
            n2 += this[r2] + e2[r2], t2[r2++] = n2 & this.DM, n2 >>= this.DB;
          if (e2.t < this.t) {
            for (n2 += e2.s; r2 < this.t; )
              n2 += this[r2], t2[r2++] = n2 & this.DM, n2 >>= this.DB;
            n2 += this.s;
          } else {
            for (n2 += this.s; r2 < e2.t; )
              n2 += e2[r2], t2[r2++] = n2 & this.DM, n2 >>= this.DB;
            n2 += e2.s;
          }
          t2.s = n2 < 0 ? -1 : 0, n2 > 0 ? t2[r2++] = n2 : n2 < -1 && (t2[r2++] = this.DV + n2), t2.t = r2, t2.clamp();
        }, "bnpAddTo"), BigInteger.prototype.dMultiply = /* @__PURE__ */ __name(function bnpDMultiply(e2) {
          this[this.t] = this.am(0, e2 - 1, this, 0, 0, this.t), ++this.t, this.clamp();
        }, "bnpDMultiply"), BigInteger.prototype.dAddOffset = /* @__PURE__ */ __name(function bnpDAddOffset(e2, t2) {
          if (e2 != 0) {
            for (; this.t <= t2; )
              this[this.t++] = 0;
            for (this[t2] += e2; this[t2] >= this.DV; )
              this[t2] -= this.DV, ++t2 >= this.t && (this[this.t++] = 0), ++this[t2];
          }
        }, "bnpDAddOffset"), BigInteger.prototype.multiplyLowerTo = /* @__PURE__ */ __name(function bnpMultiplyLowerTo(e2, t2, r2) {
          var n2, i2 = Math.min(this.t + e2.t, t2);
          for (r2.s = 0, r2.t = i2; i2 > 0; )
            r2[--i2] = 0;
          for (n2 = r2.t - this.t; i2 < n2; ++i2)
            r2[i2 + this.t] = this.am(0, e2[i2], r2, i2, 0, this.t);
          for (n2 = Math.min(e2.t, t2); i2 < n2; ++i2)
            this.am(0, e2[i2], r2, i2, 0, t2 - i2);
          r2.clamp();
        }, "bnpMultiplyLowerTo"), BigInteger.prototype.multiplyUpperTo = /* @__PURE__ */ __name(function bnpMultiplyUpperTo(e2, t2, r2) {
          --t2;
          var n2 = r2.t = this.t + e2.t - t2;
          for (r2.s = 0; --n2 >= 0; )
            r2[n2] = 0;
          for (n2 = Math.max(t2 - this.t, 0); n2 < e2.t; ++n2)
            r2[this.t + n2 - t2] = this.am(t2 - n2, e2[n2], r2, 0, 0, this.t + n2 - t2);
          r2.clamp(), r2.drShiftTo(1, r2);
        }, "bnpMultiplyUpperTo"), BigInteger.prototype.modInt = /* @__PURE__ */ __name(function bnpModInt(e2) {
          if (e2 <= 0)
            return 0;
          var t2 = this.DV % e2, r2 = this.s < 0 ? e2 - 1 : 0;
          if (this.t > 0)
            if (t2 == 0)
              r2 = this[0] % e2;
            else
              for (var n2 = this.t - 1; n2 >= 0; --n2)
                r2 = (t2 * r2 + this[n2]) % e2;
          return r2;
        }, "bnpModInt"), BigInteger.prototype.millerRabin = /* @__PURE__ */ __name(function bnpMillerRabin(e2) {
          var t2 = this.subtract(BigInteger.ONE), r2 = t2.getLowestSetBit();
          if (r2 <= 0)
            return false;
          var n2 = t2.shiftRight(r2);
          (e2 = e2 + 1 >> 1) > I.length && (e2 = I.length);
          for (var i2 = nbi(), o = 0; o < e2; ++o) {
            i2.fromInt(I[Math.floor(Math.random() * I.length)]);
            var s = i2.modPow(n2, this);
            if (s.compareTo(BigInteger.ONE) != 0 && s.compareTo(t2) != 0) {
              for (var a = 1; a++ < r2 && s.compareTo(t2) != 0; )
                if ((s = s.modPowInt(2, this)).compareTo(BigInteger.ONE) == 0)
                  return false;
              if (s.compareTo(t2) != 0)
                return false;
            }
          }
          return true;
        }, "bnpMillerRabin"), BigInteger.prototype.clone = /* @__PURE__ */ __name(function bnClone() {
          var e2 = nbi();
          return this.copyTo(e2), e2;
        }, "bnClone"), BigInteger.prototype.intValue = /* @__PURE__ */ __name(function bnIntValue() {
          if (this.s < 0) {
            if (this.t == 1)
              return this[0] - this.DV;
            if (this.t == 0)
              return -1;
          } else {
            if (this.t == 1)
              return this[0];
            if (this.t == 0)
              return 0;
          }
          return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0];
        }, "bnIntValue"), BigInteger.prototype.byteValue = /* @__PURE__ */ __name(function bnByteValue() {
          return this.t == 0 ? this.s : this[0] << 24 >> 24;
        }, "bnByteValue"), BigInteger.prototype.shortValue = /* @__PURE__ */ __name(function bnShortValue() {
          return this.t == 0 ? this.s : this[0] << 16 >> 16;
        }, "bnShortValue"), BigInteger.prototype.signum = /* @__PURE__ */ __name(function bnSigNum() {
          return this.s < 0 ? -1 : this.t <= 0 || this.t == 1 && this[0] <= 0 ? 0 : 1;
        }, "bnSigNum"), BigInteger.prototype.toByteArray = /* @__PURE__ */ __name(function bnToByteArray() {
          var e2 = this.t, t2 = new Array();
          t2[0] = this.s;
          var r2, n2 = this.DB - e2 * this.DB % 8, i2 = 0;
          if (e2-- > 0)
            for (n2 < this.DB && (r2 = this[e2] >> n2) != (this.s & this.DM) >> n2 && (t2[i2++] = r2 | this.s << this.DB - n2); e2 >= 0; )
              n2 < 8 ? (r2 = (this[e2] & (1 << n2) - 1) << 8 - n2, r2 |= this[--e2] >> (n2 += this.DB - 8)) : (r2 = this[e2] >> (n2 -= 8) & 255, n2 <= 0 && (n2 += this.DB, --e2)), (128 & r2) != 0 && (r2 |= -256), i2 == 0 && (128 & this.s) != (128 & r2) && ++i2, (i2 > 0 || r2 != this.s) && (t2[i2++] = r2);
          return t2;
        }, "bnToByteArray"), BigInteger.prototype.equals = /* @__PURE__ */ __name(function bnEquals(e2) {
          return this.compareTo(e2) == 0;
        }, "bnEquals"), BigInteger.prototype.min = /* @__PURE__ */ __name(function bnMin(e2) {
          return this.compareTo(e2) < 0 ? this : e2;
        }, "bnMin"), BigInteger.prototype.max = /* @__PURE__ */ __name(function bnMax(e2) {
          return this.compareTo(e2) > 0 ? this : e2;
        }, "bnMax"), BigInteger.prototype.and = /* @__PURE__ */ __name(function bnAnd(e2) {
          var t2 = nbi();
          return this.bitwiseTo(e2, op_and, t2), t2;
        }, "bnAnd"), BigInteger.prototype.or = /* @__PURE__ */ __name(function bnOr(e2) {
          var t2 = nbi();
          return this.bitwiseTo(e2, op_or, t2), t2;
        }, "bnOr"), BigInteger.prototype.xor = /* @__PURE__ */ __name(function bnXor(e2) {
          var t2 = nbi();
          return this.bitwiseTo(e2, op_xor, t2), t2;
        }, "bnXor"), BigInteger.prototype.andNot = /* @__PURE__ */ __name(function bnAndNot(e2) {
          var t2 = nbi();
          return this.bitwiseTo(e2, op_andnot, t2), t2;
        }, "bnAndNot"), BigInteger.prototype.not = /* @__PURE__ */ __name(function bnNot() {
          for (var e2 = nbi(), t2 = 0; t2 < this.t; ++t2)
            e2[t2] = this.DM & ~this[t2];
          return e2.t = this.t, e2.s = ~this.s, e2;
        }, "bnNot"), BigInteger.prototype.shiftLeft = /* @__PURE__ */ __name(function bnShiftLeft(e2) {
          var t2 = nbi();
          return e2 < 0 ? this.rShiftTo(-e2, t2) : this.lShiftTo(e2, t2), t2;
        }, "bnShiftLeft"), BigInteger.prototype.shiftRight = /* @__PURE__ */ __name(function bnShiftRight(e2) {
          var t2 = nbi();
          return e2 < 0 ? this.lShiftTo(-e2, t2) : this.rShiftTo(e2, t2), t2;
        }, "bnShiftRight"), BigInteger.prototype.getLowestSetBit = /* @__PURE__ */ __name(function bnGetLowestSetBit() {
          for (var e2 = 0; e2 < this.t; ++e2)
            if (this[e2] != 0)
              return e2 * this.DB + lbit(this[e2]);
          return this.s < 0 ? this.t * this.DB : -1;
        }, "bnGetLowestSetBit"), BigInteger.prototype.bitCount = /* @__PURE__ */ __name(function bnBitCount() {
          for (var e2 = 0, t2 = this.s & this.DM, r2 = 0; r2 < this.t; ++r2)
            e2 += cbit(this[r2] ^ t2);
          return e2;
        }, "bnBitCount"), BigInteger.prototype.testBit = /* @__PURE__ */ __name(function bnTestBit(e2) {
          var t2 = Math.floor(e2 / this.DB);
          return t2 >= this.t ? this.s != 0 : (this[t2] & 1 << e2 % this.DB) != 0;
        }, "bnTestBit"), BigInteger.prototype.setBit = /* @__PURE__ */ __name(function bnSetBit(e2) {
          return this.changeBit(e2, op_or);
        }, "bnSetBit"), BigInteger.prototype.clearBit = /* @__PURE__ */ __name(function bnClearBit(e2) {
          return this.changeBit(e2, op_andnot);
        }, "bnClearBit"), BigInteger.prototype.flipBit = /* @__PURE__ */ __name(function bnFlipBit(e2) {
          return this.changeBit(e2, op_xor);
        }, "bnFlipBit"), BigInteger.prototype.add = /* @__PURE__ */ __name(function bnAdd(e2) {
          var t2 = nbi();
          return this.addTo(e2, t2), t2;
        }, "bnAdd"), BigInteger.prototype.subtract = /* @__PURE__ */ __name(function bnSubtract(e2) {
          var t2 = nbi();
          return this.subTo(e2, t2), t2;
        }, "bnSubtract"), BigInteger.prototype.multiply = /* @__PURE__ */ __name(function bnMultiply(e2) {
          var t2 = nbi();
          return this.multiplyTo(e2, t2), t2;
        }, "bnMultiply"), BigInteger.prototype.divide = /* @__PURE__ */ __name(function bnDivide(e2) {
          var t2 = nbi();
          return this.divRemTo(e2, t2, null), t2;
        }, "bnDivide"), BigInteger.prototype.remainder = /* @__PURE__ */ __name(function bnRemainder(e2) {
          var t2 = nbi();
          return this.divRemTo(e2, null, t2), t2;
        }, "bnRemainder"), BigInteger.prototype.divideAndRemainder = /* @__PURE__ */ __name(function bnDivideAndRemainder(e2) {
          var t2 = nbi(), r2 = nbi();
          return this.divRemTo(e2, t2, r2), new Array(t2, r2);
        }, "bnDivideAndRemainder"), BigInteger.prototype.modPow = /* @__PURE__ */ __name(function bnModPow(e2, t2) {
          var r2, n2, i2 = e2.bitLength(), o = nbv(1);
          if (i2 <= 0)
            return o;
          r2 = i2 < 18 ? 1 : i2 < 48 ? 3 : i2 < 144 ? 4 : i2 < 768 ? 5 : 6, n2 = i2 < 8 ? new Classic(t2) : t2.isEven() ? new Barrett(t2) : new Montgomery(t2);
          var s = new Array(), a = 3, u2 = r2 - 1, c = (1 << r2) - 1;
          if (s[1] = n2.convert(this), r2 > 1) {
            var h = nbi();
            for (n2.sqrTo(s[1], h); a <= c; )
              s[a] = nbi(), n2.mulTo(h, s[a - 2], s[a]), a += 2;
          }
          var l, f, g = e2.t - 1, p2 = true, d = nbi();
          for (i2 = nbits(e2[g]) - 1; g >= 0; ) {
            for (i2 >= u2 ? l = e2[g] >> i2 - u2 & c : (l = (e2[g] & (1 << i2 + 1) - 1) << u2 - i2, g > 0 && (l |= e2[g - 1] >> this.DB + i2 - u2)), a = r2; (1 & l) == 0; )
              l >>= 1, --a;
            if ((i2 -= a) < 0 && (i2 += this.DB, --g), p2)
              s[l].copyTo(o), p2 = false;
            else {
              for (; a > 1; )
                n2.sqrTo(o, d), n2.sqrTo(d, o), a -= 2;
              a > 0 ? n2.sqrTo(o, d) : (f = o, o = d, d = f), n2.mulTo(d, s[l], o);
            }
            for (; g >= 0 && (e2[g] & 1 << i2) == 0; )
              n2.sqrTo(o, d), f = o, o = d, d = f, --i2 < 0 && (i2 = this.DB - 1, --g);
          }
          return n2.revert(o);
        }, "bnModPow"), BigInteger.prototype.modInverse = /* @__PURE__ */ __name(function bnModInverse(e2) {
          var t2 = e2.isEven();
          if (this.isEven() && t2 || e2.signum() == 0)
            return BigInteger.ZERO;
          for (var r2 = e2.clone(), n2 = this.clone(), i2 = nbv(1), o = nbv(0), s = nbv(0), a = nbv(1); r2.signum() != 0; ) {
            for (; r2.isEven(); )
              r2.rShiftTo(1, r2), t2 ? (i2.isEven() && o.isEven() || (i2.addTo(this, i2), o.subTo(e2, o)), i2.rShiftTo(1, i2)) : o.isEven() || o.subTo(e2, o), o.rShiftTo(1, o);
            for (; n2.isEven(); )
              n2.rShiftTo(1, n2), t2 ? (s.isEven() && a.isEven() || (s.addTo(this, s), a.subTo(e2, a)), s.rShiftTo(1, s)) : a.isEven() || a.subTo(e2, a), a.rShiftTo(1, a);
            r2.compareTo(n2) >= 0 ? (r2.subTo(n2, r2), t2 && i2.subTo(s, i2), o.subTo(a, o)) : (n2.subTo(r2, n2), t2 && s.subTo(i2, s), a.subTo(o, a));
          }
          return n2.compareTo(BigInteger.ONE) != 0 ? BigInteger.ZERO : a.compareTo(e2) >= 0 ? a.subtract(e2) : a.signum() < 0 ? (a.addTo(e2, a), a.signum() < 0 ? a.add(e2) : a) : a;
        }, "bnModInverse"), BigInteger.prototype.pow = /* @__PURE__ */ __name(function bnPow(e2) {
          return this.exp(e2, new NullExp());
        }, "bnPow"), BigInteger.prototype.gcd = /* @__PURE__ */ __name(function bnGCD(e2) {
          var t2 = this.s < 0 ? this.negate() : this.clone(), r2 = e2.s < 0 ? e2.negate() : e2.clone();
          if (t2.compareTo(r2) < 0) {
            var n2 = t2;
            t2 = r2, r2 = n2;
          }
          var i2 = t2.getLowestSetBit(), o = r2.getLowestSetBit();
          if (o < 0)
            return t2;
          for (i2 < o && (o = i2), o > 0 && (t2.rShiftTo(o, t2), r2.rShiftTo(o, r2)); t2.signum() > 0; )
            (i2 = t2.getLowestSetBit()) > 0 && t2.rShiftTo(i2, t2), (i2 = r2.getLowestSetBit()) > 0 && r2.rShiftTo(i2, r2), t2.compareTo(r2) >= 0 ? (t2.subTo(r2, t2), t2.rShiftTo(1, t2)) : (r2.subTo(t2, r2), r2.rShiftTo(1, r2));
          return o > 0 && r2.lShiftTo(o, r2), r2;
        }, "bnGCD"), BigInteger.prototype.isProbablePrime = /* @__PURE__ */ __name(function bnIsProbablePrime(e2) {
          var t2, r2 = this.abs();
          if (r2.t == 1 && r2[0] <= I[I.length - 1]) {
            for (t2 = 0; t2 < I.length; ++t2)
              if (r2[0] == I[t2])
                return true;
            return false;
          }
          if (r2.isEven())
            return false;
          for (t2 = 1; t2 < I.length; ) {
            for (var n2 = I[t2], i2 = t2 + 1; i2 < I.length && n2 < R; )
              n2 *= I[i2++];
            for (n2 = r2.modInt(n2); t2 < i2; )
              if (n2 % I[t2++] == 0)
                return false;
          }
          return r2.millerRabin(e2);
        }, "bnIsProbablePrime"), BigInteger.prototype.square = /* @__PURE__ */ __name(function bnSquare() {
          var e2 = nbi();
          return this.squareTo(e2), e2;
        }, "bnSquare"), Arcfour.prototype.init = /* @__PURE__ */ __name(function ARC4init(e2) {
          var t2, r2, n2;
          for (t2 = 0; t2 < 256; ++t2)
            this.S[t2] = t2;
          for (r2 = 0, t2 = 0; t2 < 256; ++t2)
            r2 = r2 + this.S[t2] + e2[t2 % e2.length] & 255, n2 = this.S[t2], this.S[t2] = this.S[r2], this.S[r2] = n2;
          this.i = 0, this.j = 0;
        }, "ARC4init"), Arcfour.prototype.next = /* @__PURE__ */ __name(function ARC4next() {
          var e2;
          return this.i = this.i + 1 & 255, this.j = this.j + this.S[this.i] & 255, e2 = this.S[this.i], this.S[this.i] = this.S[this.j], this.S[this.j] = e2, this.S[e2 + this.S[this.i] & 255];
        }, "ARC4next");
        var T, U, D, M = 256;
        /*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
         */
        function rng_seed_time() {
          !(/* @__PURE__ */ __name(function rng_seed_int(e2) {
            U[D++] ^= 255 & e2, U[D++] ^= e2 >> 8 & 255, U[D++] ^= e2 >> 16 & 255, U[D++] ^= e2 >> 24 & 255, D >= M && (D -= M);
          }, "rng_seed_int"))(new Date().getTime());
        }
        __name(rng_seed_time, "rng_seed_time");
        if (U == null) {
          var L;
          if (U = new Array(), D = 0, p !== void 0 && (p.crypto !== void 0 || p.msCrypto !== void 0)) {
            var N = p.crypto || p.msCrypto;
            if (N.getRandomValues) {
              var O = new Uint8Array(32);
              for (N.getRandomValues(O), L = 0; L < 32; ++L)
                U[D++] = O[L];
            } else if (u.appName == "Netscape" && u.appVersion < "5") {
              var H = p.crypto.random(32);
              for (L = 0; L < H.length; ++L)
                U[D++] = 255 & H.charCodeAt(L);
            }
          }
          for (; D < M; )
            L = Math.floor(65536 * Math.random()), U[D++] = L >>> 8, U[D++] = 255 & L;
          D = 0, rng_seed_time();
        }
        function rng_get_byte() {
          if (T == null) {
            for (rng_seed_time(), (T = (/* @__PURE__ */ __name(function prng_newstate() {
              return new Arcfour();
            }, "prng_newstate"))()).init(U), D = 0; D < U.length; ++D)
              U[D] = 0;
            D = 0;
          }
          return T.next();
        }
        __name(rng_get_byte, "rng_get_byte");
        function SecureRandom() {
        }
        __name(SecureRandom, "SecureRandom");
        /*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
         */
        function parseBigInt(e2, t2) {
          return new BigInteger(e2, t2);
        }
        __name(parseBigInt, "parseBigInt");
        function oaep_mgf1_arr(e2, t2, r2) {
          for (var n2 = "", i2 = 0; n2.length < t2; )
            n2 += r2(String.fromCharCode.apply(String, e2.concat([(4278190080 & i2) >> 24, (16711680 & i2) >> 16, (65280 & i2) >> 8, 255 & i2]))), i2 += 1;
          return n2;
        }
        __name(oaep_mgf1_arr, "oaep_mgf1_arr");
        function RSAKey() {
          this.n = null, this.e = 0, this.d = null, this.p = null, this.q = null, this.dmp1 = null, this.dmq1 = null, this.coeff = null;
        }
        __name(RSAKey, "RSAKey");
        /*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
         */
        function ECFieldElementFp(e2, t2) {
          this.x = t2, this.q = e2;
        }
        __name(ECFieldElementFp, "ECFieldElementFp");
        function ECPointFp(e2, t2, r2, n2) {
          this.curve = e2, this.x = t2, this.y = r2, this.z = n2 == null ? BigInteger.ONE : n2, this.zinv = null;
        }
        __name(ECPointFp, "ECPointFp");
        function ECCurveFp(e2, t2, r2) {
          this.q = e2, this.a = this.fromBigInteger(t2), this.b = this.fromBigInteger(r2), this.infinity = new ECPointFp(this, null, null);
        }
        __name(ECCurveFp, "ECCurveFp");
        SecureRandom.prototype.nextBytes = /* @__PURE__ */ __name(function rng_get_bytes(e2) {
          var t2;
          for (t2 = 0; t2 < e2.length; ++t2)
            e2[t2] = rng_get_byte();
        }, "rng_get_bytes"), RSAKey.prototype.doPublic = /* @__PURE__ */ __name(function RSADoPublic(e2) {
          return e2.modPowInt(this.e, this.n);
        }, "RSADoPublic"), RSAKey.prototype.setPublic = /* @__PURE__ */ __name(function RSASetPublic(e2, t2) {
          if (this.isPublic = true, this.isPrivate = false, typeof e2 != "string")
            this.n = e2, this.e = t2;
          else {
            if (!(e2 != null && t2 != null && e2.length > 0 && t2.length > 0))
              throw "Invalid RSA public key";
            this.n = parseBigInt(e2, 16), this.e = parseInt(t2, 16);
          }
        }, "RSASetPublic"), RSAKey.prototype.encrypt = /* @__PURE__ */ __name(function RSAEncrypt(e2) {
          var t2 = (/* @__PURE__ */ __name(function pkcs1pad2(e3, t3) {
            if (t3 < e3.length + 11)
              throw "Message too long for RSA";
            for (var r3 = new Array(), n3 = e3.length - 1; n3 >= 0 && t3 > 0; ) {
              var i2 = e3.charCodeAt(n3--);
              i2 < 128 ? r3[--t3] = i2 : i2 > 127 && i2 < 2048 ? (r3[--t3] = 63 & i2 | 128, r3[--t3] = i2 >> 6 | 192) : (r3[--t3] = 63 & i2 | 128, r3[--t3] = i2 >> 6 & 63 | 128, r3[--t3] = i2 >> 12 | 224);
            }
            r3[--t3] = 0;
            for (var o = new SecureRandom(), s = new Array(); t3 > 2; ) {
              for (s[0] = 0; s[0] == 0; )
                o.nextBytes(s);
              r3[--t3] = s[0];
            }
            return r3[--t3] = 2, r3[--t3] = 0, new BigInteger(r3);
          }, "pkcs1pad2"))(e2, this.n.bitLength() + 7 >> 3);
          if (t2 == null)
            return null;
          var r2 = this.doPublic(t2);
          if (r2 == null)
            return null;
          var n2 = r2.toString(16);
          return (1 & n2.length) == 0 ? n2 : "0" + n2;
        }, "RSAEncrypt"), RSAKey.prototype.encryptOAEP = /* @__PURE__ */ __name(function RSAEncryptOAEP(e2, t2, r2) {
          var n2 = (/* @__PURE__ */ __name(function oaep_pad(e3, t3, r3, n3) {
            var i3 = V.crypto.MessageDigest, o2 = V.crypto.Util, s = null;
            if (r3 || (r3 = "sha1"), typeof r3 == "string" && (s = i3.getCanonicalAlgName(r3), n3 = i3.getHashLength(s), r3 = /* @__PURE__ */ __name(function f(e4) {
              return hextorstr(o2.hashHex(rstrtohex(e4), s));
            }, "f")), e3.length + 2 * n3 + 2 > t3)
              throw "Message too long for RSA";
            var a, u2 = "";
            for (a = 0; a < t3 - e3.length - 2 * n3 - 2; a += 1)
              u2 += "\0";
            var c = r3("") + u2 + "" + e3, h = new Array(n3);
            new SecureRandom().nextBytes(h);
            var l = oaep_mgf1_arr(h, c.length, r3), g = [];
            for (a = 0; a < c.length; a += 1)
              g[a] = c.charCodeAt(a) ^ l.charCodeAt(a);
            var p2 = oaep_mgf1_arr(g, h.length, r3), d = [0];
            for (a = 0; a < h.length; a += 1)
              d[a + 1] = h[a] ^ p2.charCodeAt(a);
            return new BigInteger(d.concat(g));
          }, "oaep_pad"))(e2, this.n.bitLength() + 7 >> 3, t2, r2);
          if (n2 == null)
            return null;
          var i2 = this.doPublic(n2);
          if (i2 == null)
            return null;
          var o = i2.toString(16);
          return (1 & o.length) == 0 ? o : "0" + o;
        }, "RSAEncryptOAEP"), RSAKey.prototype.type = "RSA", ECFieldElementFp.prototype.equals = /* @__PURE__ */ __name(function feFpEquals(e2) {
          return e2 == this || this.q.equals(e2.q) && this.x.equals(e2.x);
        }, "feFpEquals"), ECFieldElementFp.prototype.toBigInteger = /* @__PURE__ */ __name(function feFpToBigInteger() {
          return this.x;
        }, "feFpToBigInteger"), ECFieldElementFp.prototype.negate = /* @__PURE__ */ __name(function feFpNegate() {
          return new ECFieldElementFp(this.q, this.x.negate().mod(this.q));
        }, "feFpNegate"), ECFieldElementFp.prototype.add = /* @__PURE__ */ __name(function feFpAdd(e2) {
          return new ECFieldElementFp(this.q, this.x.add(e2.toBigInteger()).mod(this.q));
        }, "feFpAdd"), ECFieldElementFp.prototype.subtract = /* @__PURE__ */ __name(function feFpSubtract(e2) {
          return new ECFieldElementFp(this.q, this.x.subtract(e2.toBigInteger()).mod(this.q));
        }, "feFpSubtract"), ECFieldElementFp.prototype.multiply = /* @__PURE__ */ __name(function feFpMultiply(e2) {
          return new ECFieldElementFp(this.q, this.x.multiply(e2.toBigInteger()).mod(this.q));
        }, "feFpMultiply"), ECFieldElementFp.prototype.square = /* @__PURE__ */ __name(function feFpSquare() {
          return new ECFieldElementFp(this.q, this.x.square().mod(this.q));
        }, "feFpSquare"), ECFieldElementFp.prototype.divide = /* @__PURE__ */ __name(function feFpDivide(e2) {
          return new ECFieldElementFp(this.q, this.x.multiply(e2.toBigInteger().modInverse(this.q)).mod(this.q));
        }, "feFpDivide"), ECPointFp.prototype.getX = /* @__PURE__ */ __name(function pointFpGetX() {
          return this.zinv == null && (this.zinv = this.z.modInverse(this.curve.q)), this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q));
        }, "pointFpGetX"), ECPointFp.prototype.getY = /* @__PURE__ */ __name(function pointFpGetY() {
          return this.zinv == null && (this.zinv = this.z.modInverse(this.curve.q)), this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q));
        }, "pointFpGetY"), ECPointFp.prototype.equals = /* @__PURE__ */ __name(function pointFpEquals(e2) {
          return e2 == this || (this.isInfinity() ? e2.isInfinity() : e2.isInfinity() ? this.isInfinity() : !!e2.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e2.z)).mod(this.curve.q).equals(BigInteger.ZERO) && e2.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e2.z)).mod(this.curve.q).equals(BigInteger.ZERO));
        }, "pointFpEquals"), ECPointFp.prototype.isInfinity = /* @__PURE__ */ __name(function pointFpIsInfinity() {
          return this.x == null && this.y == null || this.z.equals(BigInteger.ZERO) && !this.y.toBigInteger().equals(BigInteger.ZERO);
        }, "pointFpIsInfinity"), ECPointFp.prototype.negate = /* @__PURE__ */ __name(function pointFpNegate() {
          return new ECPointFp(this.curve, this.x, this.y.negate(), this.z);
        }, "pointFpNegate"), ECPointFp.prototype.add = /* @__PURE__ */ __name(function pointFpAdd(e2) {
          if (this.isInfinity())
            return e2;
          if (e2.isInfinity())
            return this;
          var t2 = e2.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e2.z)).mod(this.curve.q), r2 = e2.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e2.z)).mod(this.curve.q);
          if (BigInteger.ZERO.equals(r2))
            return BigInteger.ZERO.equals(t2) ? this.twice() : this.curve.getInfinity();
          var n2 = new BigInteger("3"), i2 = this.x.toBigInteger(), o = this.y.toBigInteger(), s = (e2.x.toBigInteger(), e2.y.toBigInteger(), r2.square()), a = s.multiply(r2), u2 = i2.multiply(s), c = t2.square().multiply(this.z), h = c.subtract(u2.shiftLeft(1)).multiply(e2.z).subtract(a).multiply(r2).mod(this.curve.q), l = u2.multiply(n2).multiply(t2).subtract(o.multiply(a)).subtract(c.multiply(t2)).multiply(e2.z).add(t2.multiply(a)).mod(this.curve.q), f = a.multiply(this.z).multiply(e2.z).mod(this.curve.q);
          return new ECPointFp(this.curve, this.curve.fromBigInteger(h), this.curve.fromBigInteger(l), f);
        }, "pointFpAdd"), ECPointFp.prototype.twice = /* @__PURE__ */ __name(function pointFpTwice() {
          if (this.isInfinity())
            return this;
          if (this.y.toBigInteger().signum() == 0)
            return this.curve.getInfinity();
          var e2 = new BigInteger("3"), t2 = this.x.toBigInteger(), r2 = this.y.toBigInteger(), n2 = r2.multiply(this.z), i2 = n2.multiply(r2).mod(this.curve.q), o = this.curve.a.toBigInteger(), s = t2.square().multiply(e2);
          BigInteger.ZERO.equals(o) || (s = s.add(this.z.square().multiply(o)));
          var a = (s = s.mod(this.curve.q)).square().subtract(t2.shiftLeft(3).multiply(i2)).shiftLeft(1).multiply(n2).mod(this.curve.q), u2 = s.multiply(e2).multiply(t2).subtract(i2.shiftLeft(1)).shiftLeft(2).multiply(i2).subtract(s.square().multiply(s)).mod(this.curve.q), c = n2.square().multiply(n2).shiftLeft(3).mod(this.curve.q);
          return new ECPointFp(this.curve, this.curve.fromBigInteger(a), this.curve.fromBigInteger(u2), c);
        }, "pointFpTwice"), ECPointFp.prototype.multiply = /* @__PURE__ */ __name(function pointFpMultiply(e2) {
          if (this.isInfinity())
            return this;
          if (e2.signum() == 0)
            return this.curve.getInfinity();
          var t2, r2 = e2, n2 = r2.multiply(new BigInteger("3")), i2 = this.negate(), o = this;
          for (t2 = n2.bitLength() - 2; t2 > 0; --t2) {
            o = o.twice();
            var s = n2.testBit(t2);
            s != r2.testBit(t2) && (o = o.add(s ? this : i2));
          }
          return o;
        }, "pointFpMultiply"), ECPointFp.prototype.multiplyTwo = /* @__PURE__ */ __name(function pointFpMultiplyTwo(e2, t2, r2) {
          var n2;
          n2 = e2.bitLength() > r2.bitLength() ? e2.bitLength() - 1 : r2.bitLength() - 1;
          for (var i2 = this.curve.getInfinity(), o = this.add(t2); n2 >= 0; )
            i2 = i2.twice(), e2.testBit(n2) ? i2 = r2.testBit(n2) ? i2.add(o) : i2.add(this) : r2.testBit(n2) && (i2 = i2.add(t2)), --n2;
          return i2;
        }, "pointFpMultiplyTwo"), ECCurveFp.prototype.getQ = /* @__PURE__ */ __name(function curveFpGetQ() {
          return this.q;
        }, "curveFpGetQ"), ECCurveFp.prototype.getA = /* @__PURE__ */ __name(function curveFpGetA() {
          return this.a;
        }, "curveFpGetA"), ECCurveFp.prototype.getB = /* @__PURE__ */ __name(function curveFpGetB() {
          return this.b;
        }, "curveFpGetB"), ECCurveFp.prototype.equals = /* @__PURE__ */ __name(function curveFpEquals(e2) {
          return e2 == this || this.q.equals(e2.q) && this.a.equals(e2.a) && this.b.equals(e2.b);
        }, "curveFpEquals"), ECCurveFp.prototype.getInfinity = /* @__PURE__ */ __name(function curveFpGetInfinity() {
          return this.infinity;
        }, "curveFpGetInfinity"), ECCurveFp.prototype.fromBigInteger = /* @__PURE__ */ __name(function curveFpFromBigInteger(e2) {
          return new ECFieldElementFp(this.q, e2);
        }, "curveFpFromBigInteger"), ECCurveFp.prototype.decodePointHex = /* @__PURE__ */ __name(function curveFpDecodePointHex(e2) {
          switch (parseInt(e2.substr(0, 2), 16)) {
            case 0:
              return this.infinity;
            case 2:
            case 3:
              return null;
            case 4:
            case 6:
            case 7:
              var t2 = (e2.length - 2) / 2, r2 = e2.substr(2, t2), n2 = e2.substr(t2 + 2, t2);
              return new ECPointFp(this, this.fromBigInteger(new BigInteger(r2, 16)), this.fromBigInteger(new BigInteger(n2, 16)));
            default:
              return null;
          }
        }, "curveFpDecodePointHex"), ECFieldElementFp.prototype.getByteLength = function() {
          return Math.floor((this.toBigInteger().bitLength() + 7) / 8);
        }, ECPointFp.prototype.getEncoded = function(e2) {
          var t2 = /* @__PURE__ */ __name(function d(e3, t3) {
            var r3 = e3.toByteArrayUnsigned();
            if (t3 < r3.length)
              r3 = r3.slice(r3.length - t3);
            else
              for (; t3 > r3.length; )
                r3.unshift(0);
            return r3;
          }, "d"), r2 = this.getX().toBigInteger(), n2 = this.getY().toBigInteger(), i2 = t2(r2, 32);
          return e2 ? n2.isEven() ? i2.unshift(2) : i2.unshift(3) : (i2.unshift(4), i2 = i2.concat(t2(n2, 32))), i2;
        }, ECPointFp.decodeFrom = function(e2, t2) {
          t2[0];
          var r2 = t2.length - 1, n2 = t2.slice(1, 1 + r2 / 2), i2 = t2.slice(1 + r2 / 2, 1 + r2);
          n2.unshift(0), i2.unshift(0);
          var o = new BigInteger(n2), s = new BigInteger(i2);
          return new ECPointFp(e2, e2.fromBigInteger(o), e2.fromBigInteger(s));
        }, ECPointFp.decodeFromHex = function(e2, t2) {
          t2.substr(0, 2);
          var r2 = t2.length - 2, n2 = t2.substr(2, r2 / 2), i2 = t2.substr(2 + r2 / 2, r2 / 2), o = new BigInteger(n2, 16), s = new BigInteger(i2, 16);
          return new ECPointFp(e2, e2.fromBigInteger(o), e2.fromBigInteger(s));
        }, ECPointFp.prototype.add2D = function(e2) {
          if (this.isInfinity())
            return e2;
          if (e2.isInfinity())
            return this;
          if (this.x.equals(e2.x))
            return this.y.equals(e2.y) ? this.twice() : this.curve.getInfinity();
          var t2 = e2.x.subtract(this.x), r2 = e2.y.subtract(this.y).divide(t2), n2 = r2.square().subtract(this.x).subtract(e2.x), i2 = r2.multiply(this.x.subtract(n2)).subtract(this.y);
          return new ECPointFp(this.curve, n2, i2);
        }, ECPointFp.prototype.twice2D = function() {
          if (this.isInfinity())
            return this;
          if (this.y.toBigInteger().signum() == 0)
            return this.curve.getInfinity();
          var e2 = this.curve.fromBigInteger(BigInteger.valueOf(2)), t2 = this.curve.fromBigInteger(BigInteger.valueOf(3)), r2 = this.x.square().multiply(t2).add(this.curve.a).divide(this.y.multiply(e2)), n2 = r2.square().subtract(this.x.multiply(e2)), i2 = r2.multiply(this.x.subtract(n2)).subtract(this.y);
          return new ECPointFp(this.curve, n2, i2);
        }, ECPointFp.prototype.multiply2D = function(e2) {
          if (this.isInfinity())
            return this;
          if (e2.signum() == 0)
            return this.curve.getInfinity();
          var t2, r2 = e2, n2 = r2.multiply(new BigInteger("3")), i2 = this.negate(), o = this;
          for (t2 = n2.bitLength() - 2; t2 > 0; --t2) {
            o = o.twice();
            var s = n2.testBit(t2);
            s != r2.testBit(t2) && (o = o.add2D(s ? this : i2));
          }
          return o;
        }, ECPointFp.prototype.isOnCurve = function() {
          var e2 = this.getX().toBigInteger(), t2 = this.getY().toBigInteger(), r2 = this.curve.getA().toBigInteger(), n2 = this.curve.getB().toBigInteger(), i2 = this.curve.getQ(), o = t2.multiply(t2).mod(i2), s = e2.multiply(e2).multiply(e2).add(r2.multiply(e2)).add(n2).mod(i2);
          return o.equals(s);
        }, ECPointFp.prototype.toString = function() {
          return "(" + this.getX().toBigInteger().toString() + "," + this.getY().toBigInteger().toString() + ")";
        }, ECPointFp.prototype.validate = function() {
          var e2 = this.curve.getQ();
          if (this.isInfinity())
            throw new Error("Point is at infinity.");
          var t2 = this.getX().toBigInteger(), r2 = this.getY().toBigInteger();
          if (t2.compareTo(BigInteger.ONE) < 0 || t2.compareTo(e2.subtract(BigInteger.ONE)) > 0)
            throw new Error("x coordinate out of bounds");
          if (r2.compareTo(BigInteger.ONE) < 0 || r2.compareTo(e2.subtract(BigInteger.ONE)) > 0)
            throw new Error("y coordinate out of bounds");
          if (!this.isOnCurve())
            throw new Error("Point is not on the curve.");
          if (this.multiply(e2).isInfinity())
            throw new Error("Point is not a scalar multiple of G.");
          return true;
        };
        /*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
         */
        var K = function() {
          var e2 = new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))', "g"), t2 = new RegExp("\\\\(?:([^u])|u(.{4}))", "g"), r2 = {'"': '"', "/": "/", "\\": "\\", b: "\b", f: "\f", n: "\n", r: "\r", t: "	"};
          function h(e3, t3, n3) {
            return t3 ? r2[t3] : String.fromCharCode(parseInt(n3, 16));
          }
          __name(h, "h");
          var n2 = new String(""), o = (Object, Array, Object.hasOwnProperty);
          return function(r3, a) {
            var u2, c, l = r3.match(e2), f = l[0], g = false;
            f === "{" ? u2 = {} : f === "[" ? u2 = [] : (u2 = [], g = true);
            for (var p2 = [u2], d = 1 - g, v2 = l.length; d < v2; ++d) {
              var y2;
              switch ((f = l[d]).charCodeAt(0)) {
                default:
                  (y2 = p2[0])[c || y2.length] = +f, c = void 0;
                  break;
                case 34:
                  if ((f = f.substring(1, f.length - 1)).indexOf("\\") !== -1 && (f = f.replace(t2, h)), y2 = p2[0], !c) {
                    if (!(y2 instanceof Array)) {
                      c = f || n2;
                      break;
                    }
                    c = y2.length;
                  }
                  y2[c] = f, c = void 0;
                  break;
                case 91:
                  y2 = p2[0], p2.unshift(y2[c || y2.length] = []), c = void 0;
                  break;
                case 93:
                  p2.shift();
                  break;
                case 102:
                  (y2 = p2[0])[c || y2.length] = false, c = void 0;
                  break;
                case 110:
                  (y2 = p2[0])[c || y2.length] = null, c = void 0;
                  break;
                case 116:
                  (y2 = p2[0])[c || y2.length] = true, c = void 0;
                  break;
                case 123:
                  y2 = p2[0], p2.unshift(y2[c || y2.length] = {}), c = void 0;
                  break;
                case 125:
                  p2.shift();
              }
            }
            if (g) {
              if (p2.length !== 1)
                throw new Error();
              u2 = u2[0];
            } else if (p2.length)
              throw new Error();
            if (a) {
              u2 = (/* @__PURE__ */ __name(function s(e3, t3) {
                var r4 = e3[t3];
                if (r4 && (r4 === void 0 ? "undefined" : i(r4)) === "object") {
                  var n3 = null;
                  for (var u3 in r4)
                    if (o.call(r4, u3) && r4 !== e3) {
                      var c2 = s(r4, u3);
                      c2 !== void 0 ? r4[u3] = c2 : (n3 || (n3 = []), n3.push(u3));
                    }
                  if (n3)
                    for (var h2 = n3.length; --h2 >= 0; )
                      delete r4[n3[h2]];
                }
                return a.call(e3, t3, r4);
              }, "s"))({"": u2}, "");
            }
            return u2;
          };
        }();
        V !== void 0 && V || (V = {}), V.asn1 !== void 0 && V.asn1 || (V.asn1 = {}), V.asn1.ASN1Util = new function() {
          this.integerToByteHex = function(e2) {
            var t2 = e2.toString(16);
            return t2.length % 2 == 1 && (t2 = "0" + t2), t2;
          }, this.bigIntToMinTwosComplementsHex = function(e2) {
            var t2 = e2.toString(16);
            if (t2.substr(0, 1) != "-")
              t2.length % 2 == 1 ? t2 = "0" + t2 : t2.match(/^[0-7]/) || (t2 = "00" + t2);
            else {
              var r2 = t2.substr(1).length;
              r2 % 2 == 1 ? r2 += 1 : t2.match(/^[0-7]/) || (r2 += 2);
              for (var n2 = "", i2 = 0; i2 < r2; i2++)
                n2 += "f";
              t2 = new BigInteger(n2, 16).xor(e2).add(BigInteger.ONE).toString(16).replace(/^-/, "");
            }
            return t2;
          }, this.getPEMStringFromHex = function(e2, t2) {
            return hextopem(e2, t2);
          }, this.newObject = function(e2) {
            var t2 = V.asn1, r2 = t2.DERBoolean, n2 = t2.DERInteger, i2 = t2.DERBitString, o = t2.DEROctetString, s = t2.DERNull, a = t2.DERObjectIdentifier, u2 = t2.DEREnumerated, c = t2.DERUTF8String, h = t2.DERNumericString, l = t2.DERPrintableString, f = t2.DERTeletexString, g = t2.DERIA5String, p2 = t2.DERUTCTime, d = t2.DERGeneralizedTime, v2 = t2.DERSequence, y2 = t2.DERSet, m = t2.DERTaggedObject, _2 = t2.ASN1Util.newObject, S2 = Object.keys(e2);
            if (S2.length != 1)
              throw "key of param shall be only one.";
            var b = S2[0];
            if (":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":" + b + ":") == -1)
              throw "undefined key: " + b;
            if (b == "bool")
              return new r2(e2[b]);
            if (b == "int")
              return new n2(e2[b]);
            if (b == "bitstr")
              return new i2(e2[b]);
            if (b == "octstr")
              return new o(e2[b]);
            if (b == "null")
              return new s(e2[b]);
            if (b == "oid")
              return new a(e2[b]);
            if (b == "enum")
              return new u2(e2[b]);
            if (b == "utf8str")
              return new c(e2[b]);
            if (b == "numstr")
              return new h(e2[b]);
            if (b == "prnstr")
              return new l(e2[b]);
            if (b == "telstr")
              return new f(e2[b]);
            if (b == "ia5str")
              return new g(e2[b]);
            if (b == "utctime")
              return new p2(e2[b]);
            if (b == "gentime")
              return new d(e2[b]);
            if (b == "seq") {
              for (var F2 = e2[b], w2 = [], E2 = 0; E2 < F2.length; E2++) {
                var x = _2(F2[E2]);
                w2.push(x);
              }
              return new v2({array: w2});
            }
            if (b == "set") {
              for (F2 = e2[b], w2 = [], E2 = 0; E2 < F2.length; E2++) {
                x = _2(F2[E2]);
                w2.push(x);
              }
              return new y2({array: w2});
            }
            if (b == "tag") {
              var C2 = e2[b];
              if (Object.prototype.toString.call(C2) === "[object Array]" && C2.length == 3) {
                var k = _2(C2[2]);
                return new m({tag: C2[0], explicit: C2[1], obj: k});
              }
              var A = {};
              if (C2.explicit !== void 0 && (A.explicit = C2.explicit), C2.tag !== void 0 && (A.tag = C2.tag), C2.obj === void 0)
                throw "obj shall be specified for 'tag'.";
              return A.obj = _2(C2.obj), new m(A);
            }
          }, this.jsonToASN1HEX = function(e2) {
            return this.newObject(e2).getEncodedHex();
          };
        }(), V.asn1.ASN1Util.oidHexToInt = function(e2) {
          for (var t2 = "", r2 = parseInt(e2.substr(0, 2), 16), n2 = (t2 = Math.floor(r2 / 40) + "." + r2 % 40, ""), i2 = 2; i2 < e2.length; i2 += 2) {
            var o = ("00000000" + parseInt(e2.substr(i2, 2), 16).toString(2)).slice(-8);
            if (n2 += o.substr(1, 7), o.substr(0, 1) == "0")
              t2 = t2 + "." + new BigInteger(n2, 2).toString(10), n2 = "";
          }
          return t2;
        }, V.asn1.ASN1Util.oidIntToHex = function(e2) {
          var t2 = /* @__PURE__ */ __name(function e3(t3) {
            var r3 = t3.toString(16);
            return r3.length == 1 && (r3 = "0" + r3), r3;
          }, "e"), r2 = /* @__PURE__ */ __name(function d(e3) {
            var r3 = "", n3 = new BigInteger(e3, 10).toString(2), i3 = 7 - n3.length % 7;
            i3 == 7 && (i3 = 0);
            for (var o2 = "", s2 = 0; s2 < i3; s2++)
              o2 += "0";
            n3 = o2 + n3;
            for (s2 = 0; s2 < n3.length - 1; s2 += 7) {
              var a = n3.substr(s2, 7);
              s2 != n3.length - 7 && (a = "1" + a), r3 += t2(parseInt(a, 2));
            }
            return r3;
          }, "d");
          if (!e2.match(/^[0-9.]+$/))
            throw "malformed oid string: " + e2;
          var n2 = "", i2 = e2.split("."), o = 40 * parseInt(i2[0]) + parseInt(i2[1]);
          n2 += t2(o), i2.splice(0, 2);
          for (var s = 0; s < i2.length; s++)
            n2 += r2(i2[s]);
          return n2;
        }, V.asn1.ASN1Object = function() {
          this.getLengthHexFromValue = function() {
            if (this.hV === void 0 || this.hV == null)
              throw "this.hV is null or undefined.";
            if (this.hV.length % 2 == 1)
              throw "value hex must be even length: n=" + "".length + ",v=" + this.hV;
            var e2 = this.hV.length / 2, t2 = e2.toString(16);
            if (t2.length % 2 == 1 && (t2 = "0" + t2), e2 < 128)
              return t2;
            var r2 = t2.length / 2;
            if (r2 > 15)
              throw "ASN.1 length too long to represent by 8x: n = " + e2.toString(16);
            return (128 + r2).toString(16) + t2;
          }, this.getEncodedHex = function() {
            return (this.hTLV == null || this.isModified) && (this.hV = this.getFreshValueHex(), this.hL = this.getLengthHexFromValue(), this.hTLV = this.hT + this.hL + this.hV, this.isModified = false), this.hTLV;
          }, this.getValueHex = function() {
            return this.getEncodedHex(), this.hV;
          }, this.getFreshValueHex = function() {
            return "";
          };
        }, V.asn1.DERAbstractString = function(e2) {
          V.asn1.DERAbstractString.superclass.constructor.call(this);
          this.getString = function() {
            return this.s;
          }, this.setString = function(e3) {
            this.hTLV = null, this.isModified = true, this.s = e3, this.hV = utf8tohex(this.s).toLowerCase();
          }, this.setStringHex = function(e3) {
            this.hTLV = null, this.isModified = true, this.s = null, this.hV = e3;
          }, this.getFreshValueHex = function() {
            return this.hV;
          }, e2 !== void 0 && (typeof e2 == "string" ? this.setString(e2) : e2.str !== void 0 ? this.setString(e2.str) : e2.hex !== void 0 && this.setStringHex(e2.hex));
        }, v.lang.extend(V.asn1.DERAbstractString, V.asn1.ASN1Object), V.asn1.DERAbstractTime = function(e2) {
          V.asn1.DERAbstractTime.superclass.constructor.call(this);
          this.localDateToUTC = function(e3) {
            return utc = e3.getTime() + 6e4 * e3.getTimezoneOffset(), new Date(utc);
          }, this.formatDate = function(e3, t2, r2) {
            var n2 = this.zeroPadding, i2 = this.localDateToUTC(e3), o = String(i2.getFullYear());
            t2 == "utc" && (o = o.substr(2, 2));
            var s = o + n2(String(i2.getMonth() + 1), 2) + n2(String(i2.getDate()), 2) + n2(String(i2.getHours()), 2) + n2(String(i2.getMinutes()), 2) + n2(String(i2.getSeconds()), 2);
            if (r2 === true) {
              var a = i2.getMilliseconds();
              if (a != 0) {
                var u2 = n2(String(a), 3);
                s = s + "." + (u2 = u2.replace(/[0]+$/, ""));
              }
            }
            return s + "Z";
          }, this.zeroPadding = function(e3, t2) {
            return e3.length >= t2 ? e3 : new Array(t2 - e3.length + 1).join("0") + e3;
          }, this.getString = function() {
            return this.s;
          }, this.setString = function(e3) {
            this.hTLV = null, this.isModified = true, this.s = e3, this.hV = stohex(e3);
          }, this.setByDateValue = function(e3, t2, r2, n2, i2, o) {
            var s = new Date(Date.UTC(e3, t2 - 1, r2, n2, i2, o, 0));
            this.setByDate(s);
          }, this.getFreshValueHex = function() {
            return this.hV;
          };
        }, v.lang.extend(V.asn1.DERAbstractTime, V.asn1.ASN1Object), V.asn1.DERAbstractStructured = function(e2) {
          V.asn1.DERAbstractString.superclass.constructor.call(this);
          this.setByASN1ObjectArray = function(e3) {
            this.hTLV = null, this.isModified = true, this.asn1Array = e3;
          }, this.appendASN1Object = function(e3) {
            this.hTLV = null, this.isModified = true, this.asn1Array.push(e3);
          }, this.asn1Array = new Array(), e2 !== void 0 && e2.array !== void 0 && (this.asn1Array = e2.array);
        }, v.lang.extend(V.asn1.DERAbstractStructured, V.asn1.ASN1Object), V.asn1.DERBoolean = function() {
          V.asn1.DERBoolean.superclass.constructor.call(this), this.hT = "01", this.hTLV = "0101ff";
        }, v.lang.extend(V.asn1.DERBoolean, V.asn1.ASN1Object), V.asn1.DERInteger = function(e2) {
          V.asn1.DERInteger.superclass.constructor.call(this), this.hT = "02", this.setByBigInteger = function(e3) {
            this.hTLV = null, this.isModified = true, this.hV = V.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e3);
          }, this.setByInteger = function(e3) {
            var t2 = new BigInteger(String(e3), 10);
            this.setByBigInteger(t2);
          }, this.setValueHex = function(e3) {
            this.hV = e3;
          }, this.getFreshValueHex = function() {
            return this.hV;
          }, e2 !== void 0 && (e2.bigint !== void 0 ? this.setByBigInteger(e2.bigint) : e2.int !== void 0 ? this.setByInteger(e2.int) : typeof e2 == "number" ? this.setByInteger(e2) : e2.hex !== void 0 && this.setValueHex(e2.hex));
        }, v.lang.extend(V.asn1.DERInteger, V.asn1.ASN1Object), V.asn1.DERBitString = function(e2) {
          if (e2 !== void 0 && e2.obj !== void 0) {
            var t2 = V.asn1.ASN1Util.newObject(e2.obj);
            e2.hex = "00" + t2.getEncodedHex();
          }
          V.asn1.DERBitString.superclass.constructor.call(this), this.hT = "03", this.setHexValueIncludingUnusedBits = function(e3) {
            this.hTLV = null, this.isModified = true, this.hV = e3;
          }, this.setUnusedBitsAndHexValue = function(e3, t3) {
            if (e3 < 0 || 7 < e3)
              throw "unused bits shall be from 0 to 7: u = " + e3;
            var r2 = "0" + e3;
            this.hTLV = null, this.isModified = true, this.hV = r2 + t3;
          }, this.setByBinaryString = function(e3) {
            var t3 = 8 - (e3 = e3.replace(/0+$/, "")).length % 8;
            t3 == 8 && (t3 = 0);
            for (var r2 = 0; r2 <= t3; r2++)
              e3 += "0";
            var n2 = "";
            for (r2 = 0; r2 < e3.length - 1; r2 += 8) {
              var i2 = e3.substr(r2, 8), o = parseInt(i2, 2).toString(16);
              o.length == 1 && (o = "0" + o), n2 += o;
            }
            this.hTLV = null, this.isModified = true, this.hV = "0" + t3 + n2;
          }, this.setByBooleanArray = function(e3) {
            for (var t3 = "", r2 = 0; r2 < e3.length; r2++)
              e3[r2] == 1 ? t3 += "1" : t3 += "0";
            this.setByBinaryString(t3);
          }, this.newFalseArray = function(e3) {
            for (var t3 = new Array(e3), r2 = 0; r2 < e3; r2++)
              t3[r2] = false;
            return t3;
          }, this.getFreshValueHex = function() {
            return this.hV;
          }, e2 !== void 0 && (typeof e2 == "string" && e2.toLowerCase().match(/^[0-9a-f]+$/) ? this.setHexValueIncludingUnusedBits(e2) : e2.hex !== void 0 ? this.setHexValueIncludingUnusedBits(e2.hex) : e2.bin !== void 0 ? this.setByBinaryString(e2.bin) : e2.array !== void 0 && this.setByBooleanArray(e2.array));
        }, v.lang.extend(V.asn1.DERBitString, V.asn1.ASN1Object), V.asn1.DEROctetString = function(e2) {
          if (e2 !== void 0 && e2.obj !== void 0) {
            var t2 = V.asn1.ASN1Util.newObject(e2.obj);
            e2.hex = t2.getEncodedHex();
          }
          V.asn1.DEROctetString.superclass.constructor.call(this, e2), this.hT = "04";
        }, v.lang.extend(V.asn1.DEROctetString, V.asn1.DERAbstractString), V.asn1.DERNull = function() {
          V.asn1.DERNull.superclass.constructor.call(this), this.hT = "05", this.hTLV = "0500";
        }, v.lang.extend(V.asn1.DERNull, V.asn1.ASN1Object), V.asn1.DERObjectIdentifier = function(e2) {
          var t2 = /* @__PURE__ */ __name(function b(e3) {
            var t3 = e3.toString(16);
            return t3.length == 1 && (t3 = "0" + t3), t3;
          }, "b"), r2 = /* @__PURE__ */ __name(function a(e3) {
            var r3 = "", n2 = new BigInteger(e3, 10).toString(2), i2 = 7 - n2.length % 7;
            i2 == 7 && (i2 = 0);
            for (var o = "", s = 0; s < i2; s++)
              o += "0";
            n2 = o + n2;
            for (s = 0; s < n2.length - 1; s += 7) {
              var u2 = n2.substr(s, 7);
              s != n2.length - 7 && (u2 = "1" + u2), r3 += t2(parseInt(u2, 2));
            }
            return r3;
          }, "a");
          V.asn1.DERObjectIdentifier.superclass.constructor.call(this), this.hT = "06", this.setValueHex = function(e3) {
            this.hTLV = null, this.isModified = true, this.s = null, this.hV = e3;
          }, this.setValueOidString = function(e3) {
            if (!e3.match(/^[0-9.]+$/))
              throw "malformed oid string: " + e3;
            var n2 = "", i2 = e3.split("."), o = 40 * parseInt(i2[0]) + parseInt(i2[1]);
            n2 += t2(o), i2.splice(0, 2);
            for (var s = 0; s < i2.length; s++)
              n2 += r2(i2[s]);
            this.hTLV = null, this.isModified = true, this.s = null, this.hV = n2;
          }, this.setValueName = function(e3) {
            var t3 = V.asn1.x509.OID.name2oid(e3);
            if (t3 === "")
              throw "DERObjectIdentifier oidName undefined: " + e3;
            this.setValueOidString(t3);
          }, this.getFreshValueHex = function() {
            return this.hV;
          }, e2 !== void 0 && (typeof e2 == "string" ? e2.match(/^[0-2].[0-9.]+$/) ? this.setValueOidString(e2) : this.setValueName(e2) : e2.oid !== void 0 ? this.setValueOidString(e2.oid) : e2.hex !== void 0 ? this.setValueHex(e2.hex) : e2.name !== void 0 && this.setValueName(e2.name));
        }, v.lang.extend(V.asn1.DERObjectIdentifier, V.asn1.ASN1Object), V.asn1.DEREnumerated = function(e2) {
          V.asn1.DEREnumerated.superclass.constructor.call(this), this.hT = "0a", this.setByBigInteger = function(e3) {
            this.hTLV = null, this.isModified = true, this.hV = V.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e3);
          }, this.setByInteger = function(e3) {
            var t2 = new BigInteger(String(e3), 10);
            this.setByBigInteger(t2);
          }, this.setValueHex = function(e3) {
            this.hV = e3;
          }, this.getFreshValueHex = function() {
            return this.hV;
          }, e2 !== void 0 && (e2.int !== void 0 ? this.setByInteger(e2.int) : typeof e2 == "number" ? this.setByInteger(e2) : e2.hex !== void 0 && this.setValueHex(e2.hex));
        }, v.lang.extend(V.asn1.DEREnumerated, V.asn1.ASN1Object), V.asn1.DERUTF8String = function(e2) {
          V.asn1.DERUTF8String.superclass.constructor.call(this, e2), this.hT = "0c";
        }, v.lang.extend(V.asn1.DERUTF8String, V.asn1.DERAbstractString), V.asn1.DERNumericString = function(e2) {
          V.asn1.DERNumericString.superclass.constructor.call(this, e2), this.hT = "12";
        }, v.lang.extend(V.asn1.DERNumericString, V.asn1.DERAbstractString), V.asn1.DERPrintableString = function(e2) {
          V.asn1.DERPrintableString.superclass.constructor.call(this, e2), this.hT = "13";
        }, v.lang.extend(V.asn1.DERPrintableString, V.asn1.DERAbstractString), V.asn1.DERTeletexString = function(e2) {
          V.asn1.DERTeletexString.superclass.constructor.call(this, e2), this.hT = "14";
        }, v.lang.extend(V.asn1.DERTeletexString, V.asn1.DERAbstractString), V.asn1.DERIA5String = function(e2) {
          V.asn1.DERIA5String.superclass.constructor.call(this, e2), this.hT = "16";
        }, v.lang.extend(V.asn1.DERIA5String, V.asn1.DERAbstractString), V.asn1.DERUTCTime = function(e2) {
          V.asn1.DERUTCTime.superclass.constructor.call(this, e2), this.hT = "17", this.setByDate = function(e3) {
            this.hTLV = null, this.isModified = true, this.date = e3, this.s = this.formatDate(this.date, "utc"), this.hV = stohex(this.s);
          }, this.getFreshValueHex = function() {
            return this.date === void 0 && this.s === void 0 && (this.date = new Date(), this.s = this.formatDate(this.date, "utc"), this.hV = stohex(this.s)), this.hV;
          }, e2 !== void 0 && (e2.str !== void 0 ? this.setString(e2.str) : typeof e2 == "string" && e2.match(/^[0-9]{12}Z$/) ? this.setString(e2) : e2.hex !== void 0 ? this.setStringHex(e2.hex) : e2.date !== void 0 && this.setByDate(e2.date));
        }, v.lang.extend(V.asn1.DERUTCTime, V.asn1.DERAbstractTime), V.asn1.DERGeneralizedTime = function(e2) {
          V.asn1.DERGeneralizedTime.superclass.constructor.call(this, e2), this.hT = "18", this.withMillis = false, this.setByDate = function(e3) {
            this.hTLV = null, this.isModified = true, this.date = e3, this.s = this.formatDate(this.date, "gen", this.withMillis), this.hV = stohex(this.s);
          }, this.getFreshValueHex = function() {
            return this.date === void 0 && this.s === void 0 && (this.date = new Date(), this.s = this.formatDate(this.date, "gen", this.withMillis), this.hV = stohex(this.s)), this.hV;
          }, e2 !== void 0 && (e2.str !== void 0 ? this.setString(e2.str) : typeof e2 == "string" && e2.match(/^[0-9]{14}Z$/) ? this.setString(e2) : e2.hex !== void 0 ? this.setStringHex(e2.hex) : e2.date !== void 0 && this.setByDate(e2.date), e2.millis === true && (this.withMillis = true));
        }, v.lang.extend(V.asn1.DERGeneralizedTime, V.asn1.DERAbstractTime), V.asn1.DERSequence = function(e2) {
          V.asn1.DERSequence.superclass.constructor.call(this, e2), this.hT = "30", this.getFreshValueHex = function() {
            for (var e3 = "", t2 = 0; t2 < this.asn1Array.length; t2++) {
              e3 += this.asn1Array[t2].getEncodedHex();
            }
            return this.hV = e3, this.hV;
          };
        }, v.lang.extend(V.asn1.DERSequence, V.asn1.DERAbstractStructured), V.asn1.DERSet = function(e2) {
          V.asn1.DERSet.superclass.constructor.call(this, e2), this.hT = "31", this.sortFlag = true, this.getFreshValueHex = function() {
            for (var e3 = new Array(), t2 = 0; t2 < this.asn1Array.length; t2++) {
              var r2 = this.asn1Array[t2];
              e3.push(r2.getEncodedHex());
            }
            return this.sortFlag == 1 && e3.sort(), this.hV = e3.join(""), this.hV;
          }, e2 !== void 0 && e2.sortflag !== void 0 && e2.sortflag == 0 && (this.sortFlag = false);
        }, v.lang.extend(V.asn1.DERSet, V.asn1.DERAbstractStructured), V.asn1.DERTaggedObject = function(e2) {
          V.asn1.DERTaggedObject.superclass.constructor.call(this), this.hT = "a0", this.hV = "", this.isExplicit = true, this.asn1Object = null, this.setASN1Object = function(e3, t2, r2) {
            this.hT = t2, this.isExplicit = e3, this.asn1Object = r2, this.isExplicit ? (this.hV = this.asn1Object.getEncodedHex(), this.hTLV = null, this.isModified = true) : (this.hV = null, this.hTLV = r2.getEncodedHex(), this.hTLV = this.hTLV.replace(/^../, t2), this.isModified = false);
          }, this.getFreshValueHex = function() {
            return this.hV;
          }, e2 !== void 0 && (e2.tag !== void 0 && (this.hT = e2.tag), e2.explicit !== void 0 && (this.isExplicit = e2.explicit), e2.obj !== void 0 && (this.asn1Object = e2.obj, this.setASN1Object(this.isExplicit, this.hT, this.asn1Object)));
        }, v.lang.extend(V.asn1.DERTaggedObject, V.asn1.ASN1Object);
        var V, q, W, J = new function() {
        }();
        function stoBA(e2) {
          for (var t2 = new Array(), r2 = 0; r2 < e2.length; r2++)
            t2[r2] = e2.charCodeAt(r2);
          return t2;
        }
        __name(stoBA, "stoBA");
        function BAtos(e2) {
          for (var t2 = "", r2 = 0; r2 < e2.length; r2++)
            t2 += String.fromCharCode(e2[r2]);
          return t2;
        }
        __name(BAtos, "BAtos");
        function BAtohex(e2) {
          for (var t2 = "", r2 = 0; r2 < e2.length; r2++) {
            var n2 = e2[r2].toString(16);
            n2.length == 1 && (n2 = "0" + n2), t2 += n2;
          }
          return t2;
        }
        __name(BAtohex, "BAtohex");
        function stohex(e2) {
          return BAtohex(stoBA(e2));
        }
        __name(stohex, "stohex");
        function b64tob64u(e2) {
          return e2 = (e2 = (e2 = e2.replace(/\=/g, "")).replace(/\+/g, "-")).replace(/\//g, "_");
        }
        __name(b64tob64u, "b64tob64u");
        function b64utob64(e2) {
          return e2.length % 4 == 2 ? e2 += "==" : e2.length % 4 == 3 && (e2 += "="), e2 = (e2 = e2.replace(/-/g, "+")).replace(/_/g, "/");
        }
        __name(b64utob64, "b64utob64");
        function hextob64u(e2) {
          return e2.length % 2 == 1 && (e2 = "0" + e2), b64tob64u(hex2b64(e2));
        }
        __name(hextob64u, "hextob64u");
        function b64utohex(e2) {
          return b64tohex(b64utob64(e2));
        }
        __name(b64utohex, "b64utohex");
        function utf8tohex(e2) {
          return uricmptohex(encodeURIComponentAll(e2));
        }
        __name(utf8tohex, "utf8tohex");
        function hextoutf8(e2) {
          return decodeURIComponent(hextouricmp(e2));
        }
        __name(hextoutf8, "hextoutf8");
        function hextorstr(e2) {
          for (var t2 = "", r2 = 0; r2 < e2.length - 1; r2 += 2)
            t2 += String.fromCharCode(parseInt(e2.substr(r2, 2), 16));
          return t2;
        }
        __name(hextorstr, "hextorstr");
        function rstrtohex(e2) {
          for (var t2 = "", r2 = 0; r2 < e2.length; r2++)
            t2 += ("0" + e2.charCodeAt(r2).toString(16)).slice(-2);
          return t2;
        }
        __name(rstrtohex, "rstrtohex");
        function hextob64(e2) {
          return hex2b64(e2);
        }
        __name(hextob64, "hextob64");
        function hextob64nl(e2) {
          var t2 = hextob64(e2).replace(/(.{64})/g, "$1\r\n");
          return t2 = t2.replace(/\r\n$/, "");
        }
        __name(hextob64nl, "hextob64nl");
        function b64nltohex(e2) {
          return b64tohex(e2.replace(/[^0-9A-Za-z\/+=]*/g, ""));
        }
        __name(b64nltohex, "b64nltohex");
        function hextopem(e2, t2) {
          return "-----BEGIN " + t2 + "-----\r\n" + hextob64nl(e2) + "\r\n-----END " + t2 + "-----\r\n";
        }
        __name(hextopem, "hextopem");
        function pemtohex(e2, t2) {
          if (e2.indexOf("-----BEGIN ") == -1)
            throw "can't find PEM header: " + t2;
          return b64nltohex(e2 = t2 !== void 0 ? (e2 = e2.replace("-----BEGIN " + t2 + "-----", "")).replace("-----END " + t2 + "-----", "") : (e2 = e2.replace(/-----BEGIN [^-]+-----/, "")).replace(/-----END [^-]+-----/, ""));
        }
        __name(pemtohex, "pemtohex");
        function zulutomsec(e2) {
          var t2, r2, n2, i2, o, s, a, u2, c, h, l;
          if (l = e2.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))
            return u2 = l[1], t2 = parseInt(u2), u2.length === 2 && (50 <= t2 && t2 < 100 ? t2 = 1900 + t2 : 0 <= t2 && t2 < 50 && (t2 = 2e3 + t2)), r2 = parseInt(l[2]) - 1, n2 = parseInt(l[3]), i2 = parseInt(l[4]), o = parseInt(l[5]), s = parseInt(l[6]), a = 0, (c = l[7]) !== "" && (h = (c.substr(1) + "00").substr(0, 3), a = parseInt(h)), Date.UTC(t2, r2, n2, i2, o, s, a);
          throw "unsupported zulu format: " + e2;
        }
        __name(zulutomsec, "zulutomsec");
        function zulutosec(e2) {
          return ~~(zulutomsec(e2) / 1e3);
        }
        __name(zulutosec, "zulutosec");
        function uricmptohex(e2) {
          return e2.replace(/%/g, "");
        }
        __name(uricmptohex, "uricmptohex");
        function hextouricmp(e2) {
          return e2.replace(/(..)/g, "%$1");
        }
        __name(hextouricmp, "hextouricmp");
        function ipv6tohex(e2) {
          var t2 = "malformed IPv6 address";
          if (!e2.match(/^[0-9A-Fa-f:]+$/))
            throw t2;
          var r2 = (e2 = e2.toLowerCase()).split(":").length - 1;
          if (r2 < 2)
            throw t2;
          var n2 = ":".repeat(7 - r2 + 2), i2 = (e2 = e2.replace("::", n2)).split(":");
          if (i2.length != 8)
            throw t2;
          for (var o = 0; o < 8; o++)
            i2[o] = ("0000" + i2[o]).slice(-4);
          return i2.join("");
        }
        __name(ipv6tohex, "ipv6tohex");
        function hextoipv6(e2) {
          if (!e2.match(/^[0-9A-Fa-f]{32}$/))
            throw "malformed IPv6 address octet";
          for (var t2 = (e2 = e2.toLowerCase()).match(/.{1,4}/g), r2 = 0; r2 < 8; r2++)
            t2[r2] = t2[r2].replace(/^0+/, ""), t2[r2] == "" && (t2[r2] = "0");
          var n2 = (e2 = ":" + t2.join(":") + ":").match(/:(0:){2,}/g);
          if (n2 === null)
            return e2.slice(1, -1);
          var i2 = "";
          for (r2 = 0; r2 < n2.length; r2++)
            n2[r2].length > i2.length && (i2 = n2[r2]);
          return (e2 = e2.replace(i2, "::")).slice(1, -1);
        }
        __name(hextoipv6, "hextoipv6");
        function hextoip(e2) {
          var t2 = "malformed hex value";
          if (!e2.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))
            throw t2;
          if (e2.length != 8)
            return e2.length == 32 ? hextoipv6(e2) : e2;
          try {
            return parseInt(e2.substr(0, 2), 16) + "." + parseInt(e2.substr(2, 2), 16) + "." + parseInt(e2.substr(4, 2), 16) + "." + parseInt(e2.substr(6, 2), 16);
          } catch (e3) {
            throw t2;
          }
        }
        __name(hextoip, "hextoip");
        function encodeURIComponentAll(e2) {
          for (var t2 = encodeURIComponent(e2), r2 = "", n2 = 0; n2 < t2.length; n2++)
            t2[n2] == "%" ? (r2 += t2.substr(n2, 3), n2 += 2) : r2 = r2 + "%" + stohex(t2[n2]);
          return r2;
        }
        __name(encodeURIComponentAll, "encodeURIComponentAll");
        function hextoposhex(e2) {
          return e2.length % 2 == 1 ? "0" + e2 : e2.substr(0, 1) > "7" ? "00" + e2 : e2;
        }
        __name(hextoposhex, "hextoposhex");
        J.getLblen = function(e2, t2) {
          if (e2.substr(t2 + 2, 1) != "8")
            return 1;
          var r2 = parseInt(e2.substr(t2 + 3, 1));
          return r2 == 0 ? -1 : 0 < r2 && r2 < 10 ? r2 + 1 : -2;
        }, J.getL = function(e2, t2) {
          var r2 = J.getLblen(e2, t2);
          return r2 < 1 ? "" : e2.substr(t2 + 2, 2 * r2);
        }, J.getVblen = function(e2, t2) {
          var r2;
          return (r2 = J.getL(e2, t2)) == "" ? -1 : (r2.substr(0, 1) === "8" ? new BigInteger(r2.substr(2), 16) : new BigInteger(r2, 16)).intValue();
        }, J.getVidx = function(e2, t2) {
          var r2 = J.getLblen(e2, t2);
          return r2 < 0 ? r2 : t2 + 2 * (r2 + 1);
        }, J.getV = function(e2, t2) {
          var r2 = J.getVidx(e2, t2), n2 = J.getVblen(e2, t2);
          return e2.substr(r2, 2 * n2);
        }, J.getTLV = function(e2, t2) {
          return e2.substr(t2, 2) + J.getL(e2, t2) + J.getV(e2, t2);
        }, J.getNextSiblingIdx = function(e2, t2) {
          return J.getVidx(e2, t2) + 2 * J.getVblen(e2, t2);
        }, J.getChildIdx = function(e2, t2) {
          var r2 = J, n2 = new Array(), i2 = r2.getVidx(e2, t2);
          e2.substr(t2, 2) == "03" ? n2.push(i2 + 2) : n2.push(i2);
          for (var o = r2.getVblen(e2, t2), s = i2, a = 0; ; ) {
            var u2 = r2.getNextSiblingIdx(e2, s);
            if (u2 == null || u2 - i2 >= 2 * o)
              break;
            if (a >= 200)
              break;
            n2.push(u2), s = u2, a++;
          }
          return n2;
        }, J.getNthChildIdx = function(e2, t2, r2) {
          return J.getChildIdx(e2, t2)[r2];
        }, J.getIdxbyList = function(e2, t2, r2, n2) {
          var i2, o, s = J;
          if (r2.length == 0) {
            if (n2 !== void 0 && e2.substr(t2, 2) !== n2)
              throw "checking tag doesn't match: " + e2.substr(t2, 2) + "!=" + n2;
            return t2;
          }
          return i2 = r2.shift(), o = s.getChildIdx(e2, t2), s.getIdxbyList(e2, o[i2], r2, n2);
        }, J.getTLVbyList = function(e2, t2, r2, n2) {
          var i2 = J, o = i2.getIdxbyList(e2, t2, r2);
          if (o === void 0)
            throw "can't find nthList object";
          if (n2 !== void 0 && e2.substr(o, 2) != n2)
            throw "checking tag doesn't match: " + e2.substr(o, 2) + "!=" + n2;
          return i2.getTLV(e2, o);
        }, J.getVbyList = function(e2, t2, r2, n2, i2) {
          var o, s, a = J;
          if ((o = a.getIdxbyList(e2, t2, r2, n2)) === void 0)
            throw "can't find nthList object";
          return s = a.getV(e2, o), i2 === true && (s = s.substr(2)), s;
        }, J.hextooidstr = function(e2) {
          var t2 = /* @__PURE__ */ __name(function h2(e3, t3) {
            return e3.length >= t3 ? e3 : new Array(t3 - e3.length + 1).join("0") + e3;
          }, "h"), r2 = [], n2 = e2.substr(0, 2), i2 = parseInt(n2, 16);
          r2[0] = new String(Math.floor(i2 / 40)), r2[1] = new String(i2 % 40);
          for (var o = e2.substr(2), s = [], a = 0; a < o.length / 2; a++)
            s.push(parseInt(o.substr(2 * a, 2), 16));
          var u2 = [], c = "";
          for (a = 0; a < s.length; a++)
            128 & s[a] ? c += t2((127 & s[a]).toString(2), 7) : (c += t2((127 & s[a]).toString(2), 7), u2.push(new String(parseInt(c, 2))), c = "");
          var h = r2.join(".");
          return u2.length > 0 && (h = h + "." + u2.join(".")), h;
        }, J.dump = function(e2, t2, r2, n2) {
          var i2 = J, o = i2.getV, s = i2.dump, a = i2.getChildIdx, u2 = e2;
          e2 instanceof V.asn1.ASN1Object && (u2 = e2.getEncodedHex());
          var c = /* @__PURE__ */ __name(function q2(e3, t3) {
            return e3.length <= 2 * t3 ? e3 : e3.substr(0, t3) + "..(total " + e3.length / 2 + "bytes).." + e3.substr(e3.length - t3, t3);
          }, "q");
          t2 === void 0 && (t2 = {ommit_long_octet: 32}), r2 === void 0 && (r2 = 0), n2 === void 0 && (n2 = "");
          var h = t2.ommit_long_octet;
          if (u2.substr(r2, 2) == "01")
            return (l = o(u2, r2)) == "00" ? n2 + "BOOLEAN FALSE\n" : n2 + "BOOLEAN TRUE\n";
          if (u2.substr(r2, 2) == "02")
            return n2 + "INTEGER " + c(l = o(u2, r2), h) + "\n";
          if (u2.substr(r2, 2) == "03")
            return n2 + "BITSTRING " + c(l = o(u2, r2), h) + "\n";
          if (u2.substr(r2, 2) == "04") {
            var l = o(u2, r2);
            if (i2.isASN1HEX(l)) {
              var f = n2 + "OCTETSTRING, encapsulates\n";
              return f += s(l, t2, 0, n2 + "  ");
            }
            return n2 + "OCTETSTRING " + c(l, h) + "\n";
          }
          if (u2.substr(r2, 2) == "05")
            return n2 + "NULL\n";
          if (u2.substr(r2, 2) == "06") {
            var g = o(u2, r2), p2 = V.asn1.ASN1Util.oidHexToInt(g), d = V.asn1.x509.OID.oid2name(p2), v2 = p2.replace(/\./g, " ");
            return d != "" ? n2 + "ObjectIdentifier " + d + " (" + v2 + ")\n" : n2 + "ObjectIdentifier (" + v2 + ")\n";
          }
          if (u2.substr(r2, 2) == "0c")
            return n2 + "UTF8String '" + hextoutf8(o(u2, r2)) + "'\n";
          if (u2.substr(r2, 2) == "13")
            return n2 + "PrintableString '" + hextoutf8(o(u2, r2)) + "'\n";
          if (u2.substr(r2, 2) == "14")
            return n2 + "TeletexString '" + hextoutf8(o(u2, r2)) + "'\n";
          if (u2.substr(r2, 2) == "16")
            return n2 + "IA5String '" + hextoutf8(o(u2, r2)) + "'\n";
          if (u2.substr(r2, 2) == "17")
            return n2 + "UTCTime " + hextoutf8(o(u2, r2)) + "\n";
          if (u2.substr(r2, 2) == "18")
            return n2 + "GeneralizedTime " + hextoutf8(o(u2, r2)) + "\n";
          if (u2.substr(r2, 2) == "30") {
            if (u2.substr(r2, 4) == "3000")
              return n2 + "SEQUENCE {}\n";
            f = n2 + "SEQUENCE\n";
            var y2 = t2;
            if (((S2 = a(u2, r2)).length == 2 || S2.length == 3) && u2.substr(S2[0], 2) == "06" && u2.substr(S2[S2.length - 1], 2) == "04") {
              d = i2.oidname(o(u2, S2[0]));
              var m = JSON.parse(JSON.stringify(t2));
              m.x509ExtName = d, y2 = m;
            }
            for (var _2 = 0; _2 < S2.length; _2++)
              f += s(u2, y2, S2[_2], n2 + "  ");
            return f;
          }
          if (u2.substr(r2, 2) == "31") {
            f = n2 + "SET\n";
            var S2 = a(u2, r2);
            for (_2 = 0; _2 < S2.length; _2++)
              f += s(u2, t2, S2[_2], n2 + "  ");
            return f;
          }
          var b = parseInt(u2.substr(r2, 2), 16);
          if ((128 & b) != 0) {
            var F2 = 31 & b;
            if ((32 & b) != 0) {
              var f = n2 + "[" + F2 + "]\n";
              for (S2 = a(u2, r2), _2 = 0; _2 < S2.length; _2++)
                f += s(u2, t2, S2[_2], n2 + "  ");
              return f;
            }
            return (l = o(u2, r2)).substr(0, 8) == "68747470" && (l = hextoutf8(l)), t2.x509ExtName === "subjectAltName" && F2 == 2 && (l = hextoutf8(l)), f = n2 + "[" + F2 + "] " + l + "\n";
          }
          return n2 + "UNKNOWN(" + u2.substr(r2, 2) + ") " + o(u2, r2) + "\n";
        }, J.isASN1HEX = function(e2) {
          var t2 = J;
          if (e2.length % 2 == 1)
            return false;
          var r2 = t2.getVblen(e2, 0), n2 = e2.substr(0, 2), i2 = t2.getL(e2, 0);
          return e2.length - n2.length - i2.length == 2 * r2;
        }, J.oidname = function(e2) {
          var t2 = V.asn1;
          V.lang.String.isHex(e2) && (e2 = t2.ASN1Util.oidHexToInt(e2));
          var r2 = t2.x509.OID.oid2name(e2);
          return r2 === "" && (r2 = e2), r2;
        }, V !== void 0 && V || (V = {}), V.lang !== void 0 && V.lang || (V.lang = {}), V.lang.String = function() {
        }, typeof n == "function" ? (q = /* @__PURE__ */ __name(function utf8tob64u(e2) {
          return b64tob64u(new n(e2, "utf8").toString("base64"));
        }, "utf8tob64u"), W = /* @__PURE__ */ __name(function b64utoutf8(e2) {
          return new n(b64utob64(e2), "base64").toString("utf8");
        }, "b64utoutf8")) : (q = /* @__PURE__ */ __name(function utf8tob64u(e2) {
          return hextob64u(uricmptohex(encodeURIComponentAll(e2)));
        }, "utf8tob64u"), W = /* @__PURE__ */ __name(function b64utoutf8(e2) {
          return decodeURIComponent(hextouricmp(b64utohex(e2)));
        }, "b64utoutf8")), V.lang.String.isInteger = function(e2) {
          return !!e2.match(/^[0-9]+$/) || !!e2.match(/^-[0-9]+$/);
        }, V.lang.String.isHex = function(e2) {
          return !(e2.length % 2 != 0 || !e2.match(/^[0-9a-f]+$/) && !e2.match(/^[0-9A-F]+$/));
        }, V.lang.String.isBase64 = function(e2) {
          return !(!(e2 = e2.replace(/\s+/g, "")).match(/^[0-9A-Za-z+\/]+={0,3}$/) || e2.length % 4 != 0);
        }, V.lang.String.isBase64URL = function(e2) {
          return !e2.match(/[+/=]/) && (e2 = b64utob64(e2), V.lang.String.isBase64(e2));
        }, V.lang.String.isIntegerArray = function(e2) {
          return !!(e2 = e2.replace(/\s+/g, "")).match(/^\[[0-9,]+\]$/);
        };
        V !== void 0 && V || (V = {}), V.crypto !== void 0 && V.crypto || (V.crypto = {}), V.crypto.Util = new function() {
          this.DIGESTINFOHEAD = {sha1: "3021300906052b0e03021a05000414", sha224: "302d300d06096086480165030402040500041c", sha256: "3031300d060960864801650304020105000420", sha384: "3041300d060960864801650304020205000430", sha512: "3051300d060960864801650304020305000440", md2: "3020300c06082a864886f70d020205000410", md5: "3020300c06082a864886f70d020505000410", ripemd160: "3021300906052b2403020105000414"}, this.DEFAULTPROVIDER = {md5: "cryptojs", sha1: "cryptojs", sha224: "cryptojs", sha256: "cryptojs", sha384: "cryptojs", sha512: "cryptojs", ripemd160: "cryptojs", hmacmd5: "cryptojs", hmacsha1: "cryptojs", hmacsha224: "cryptojs", hmacsha256: "cryptojs", hmacsha384: "cryptojs", hmacsha512: "cryptojs", hmacripemd160: "cryptojs", MD5withRSA: "cryptojs/jsrsa", SHA1withRSA: "cryptojs/jsrsa", SHA224withRSA: "cryptojs/jsrsa", SHA256withRSA: "cryptojs/jsrsa", SHA384withRSA: "cryptojs/jsrsa", SHA512withRSA: "cryptojs/jsrsa", RIPEMD160withRSA: "cryptojs/jsrsa", MD5withECDSA: "cryptojs/jsrsa", SHA1withECDSA: "cryptojs/jsrsa", SHA224withECDSA: "cryptojs/jsrsa", SHA256withECDSA: "cryptojs/jsrsa", SHA384withECDSA: "cryptojs/jsrsa", SHA512withECDSA: "cryptojs/jsrsa", RIPEMD160withECDSA: "cryptojs/jsrsa", SHA1withDSA: "cryptojs/jsrsa", SHA224withDSA: "cryptojs/jsrsa", SHA256withDSA: "cryptojs/jsrsa", MD5withRSAandMGF1: "cryptojs/jsrsa", SHA1withRSAandMGF1: "cryptojs/jsrsa", SHA224withRSAandMGF1: "cryptojs/jsrsa", SHA256withRSAandMGF1: "cryptojs/jsrsa", SHA384withRSAandMGF1: "cryptojs/jsrsa", SHA512withRSAandMGF1: "cryptojs/jsrsa", RIPEMD160withRSAandMGF1: "cryptojs/jsrsa"}, this.CRYPTOJSMESSAGEDIGESTNAME = {md5: y.algo.MD5, sha1: y.algo.SHA1, sha224: y.algo.SHA224, sha256: y.algo.SHA256, sha384: y.algo.SHA384, sha512: y.algo.SHA512, ripemd160: y.algo.RIPEMD160}, this.getDigestInfoHex = function(e2, t2) {
            if (this.DIGESTINFOHEAD[t2] === void 0)
              throw "alg not supported in Util.DIGESTINFOHEAD: " + t2;
            return this.DIGESTINFOHEAD[t2] + e2;
          }, this.getPaddedDigestInfoHex = function(e2, t2, r2) {
            var n2 = this.getDigestInfoHex(e2, t2), i2 = r2 / 4;
            if (n2.length + 22 > i2)
              throw "key is too short for SigAlg: keylen=" + r2 + "," + t2;
            for (var o = "0001", s = "00" + n2, a = "", u2 = i2 - o.length - s.length, c = 0; c < u2; c += 2)
              a += "ff";
            return o + a + s;
          }, this.hashString = function(e2, t2) {
            return new V.crypto.MessageDigest({alg: t2}).digestString(e2);
          }, this.hashHex = function(e2, t2) {
            return new V.crypto.MessageDigest({alg: t2}).digestHex(e2);
          }, this.sha1 = function(e2) {
            return new V.crypto.MessageDigest({alg: "sha1", prov: "cryptojs"}).digestString(e2);
          }, this.sha256 = function(e2) {
            return new V.crypto.MessageDigest({alg: "sha256", prov: "cryptojs"}).digestString(e2);
          }, this.sha256Hex = function(e2) {
            return new V.crypto.MessageDigest({alg: "sha256", prov: "cryptojs"}).digestHex(e2);
          }, this.sha512 = function(e2) {
            return new V.crypto.MessageDigest({alg: "sha512", prov: "cryptojs"}).digestString(e2);
          }, this.sha512Hex = function(e2) {
            return new V.crypto.MessageDigest({alg: "sha512", prov: "cryptojs"}).digestHex(e2);
          };
        }(), V.crypto.Util.md5 = function(e2) {
          return new V.crypto.MessageDigest({alg: "md5", prov: "cryptojs"}).digestString(e2);
        }, V.crypto.Util.ripemd160 = function(e2) {
          return new V.crypto.MessageDigest({alg: "ripemd160", prov: "cryptojs"}).digestString(e2);
        }, V.crypto.Util.SECURERANDOMGEN = new SecureRandom(), V.crypto.Util.getRandomHexOfNbytes = function(e2) {
          var t2 = new Array(e2);
          return V.crypto.Util.SECURERANDOMGEN.nextBytes(t2), BAtohex(t2);
        }, V.crypto.Util.getRandomBigIntegerOfNbytes = function(e2) {
          return new BigInteger(V.crypto.Util.getRandomHexOfNbytes(e2), 16);
        }, V.crypto.Util.getRandomHexOfNbits = function(e2) {
          var t2 = e2 % 8, r2 = new Array((e2 - t2) / 8 + 1);
          return V.crypto.Util.SECURERANDOMGEN.nextBytes(r2), r2[0] = (255 << t2 & 255 ^ 255) & r2[0], BAtohex(r2);
        }, V.crypto.Util.getRandomBigIntegerOfNbits = function(e2) {
          return new BigInteger(V.crypto.Util.getRandomHexOfNbits(e2), 16);
        }, V.crypto.Util.getRandomBigIntegerZeroToMax = function(e2) {
          for (var t2 = e2.bitLength(); ; ) {
            var r2 = V.crypto.Util.getRandomBigIntegerOfNbits(t2);
            if (e2.compareTo(r2) != -1)
              return r2;
          }
        }, V.crypto.Util.getRandomBigIntegerMinToMax = function(e2, t2) {
          var r2 = e2.compareTo(t2);
          if (r2 == 1)
            throw "biMin is greater than biMax";
          if (r2 == 0)
            return e2;
          var n2 = t2.subtract(e2);
          return V.crypto.Util.getRandomBigIntegerZeroToMax(n2).add(e2);
        }, V.crypto.MessageDigest = function(e2) {
          this.setAlgAndProvider = function(e3, t2) {
            if ((e3 = V.crypto.MessageDigest.getCanonicalAlgName(e3)) !== null && t2 === void 0 && (t2 = V.crypto.Util.DEFAULTPROVIDER[e3]), ":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e3) != -1 && t2 == "cryptojs") {
              try {
                this.md = V.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e3].create();
              } catch (t3) {
                throw "setAlgAndProvider hash alg set fail alg=" + e3 + "/" + t3;
              }
              this.updateString = function(e4) {
                this.md.update(e4);
              }, this.updateHex = function(e4) {
                var t3 = y.enc.Hex.parse(e4);
                this.md.update(t3);
              }, this.digest = function() {
                return this.md.finalize().toString(y.enc.Hex);
              }, this.digestString = function(e4) {
                return this.updateString(e4), this.digest();
              }, this.digestHex = function(e4) {
                return this.updateHex(e4), this.digest();
              };
            }
            if (":sha256:".indexOf(e3) != -1 && t2 == "sjcl") {
              try {
                this.md = new sjcl.hash.sha256();
              } catch (t3) {
                throw "setAlgAndProvider hash alg set fail alg=" + e3 + "/" + t3;
              }
              this.updateString = function(e4) {
                this.md.update(e4);
              }, this.updateHex = function(e4) {
                var t3 = sjcl.codec.hex.toBits(e4);
                this.md.update(t3);
              }, this.digest = function() {
                var e4 = this.md.finalize();
                return sjcl.codec.hex.fromBits(e4);
              }, this.digestString = function(e4) {
                return this.updateString(e4), this.digest();
              }, this.digestHex = function(e4) {
                return this.updateHex(e4), this.digest();
              };
            }
          }, this.updateString = function(e3) {
            throw "updateString(str) not supported for this alg/prov: " + this.algName + "/" + this.provName;
          }, this.updateHex = function(e3) {
            throw "updateHex(hex) not supported for this alg/prov: " + this.algName + "/" + this.provName;
          }, this.digest = function() {
            throw "digest() not supported for this alg/prov: " + this.algName + "/" + this.provName;
          }, this.digestString = function(e3) {
            throw "digestString(str) not supported for this alg/prov: " + this.algName + "/" + this.provName;
          }, this.digestHex = function(e3) {
            throw "digestHex(hex) not supported for this alg/prov: " + this.algName + "/" + this.provName;
          }, e2 !== void 0 && e2.alg !== void 0 && (this.algName = e2.alg, e2.prov === void 0 && (this.provName = V.crypto.Util.DEFAULTPROVIDER[this.algName]), this.setAlgAndProvider(this.algName, this.provName));
        }, V.crypto.MessageDigest.getCanonicalAlgName = function(e2) {
          return typeof e2 == "string" && (e2 = (e2 = e2.toLowerCase()).replace(/-/, "")), e2;
        }, V.crypto.MessageDigest.getHashLength = function(e2) {
          var t2 = V.crypto.MessageDigest, r2 = t2.getCanonicalAlgName(e2);
          if (t2.HASHLENGTH[r2] === void 0)
            throw "not supported algorithm: " + e2;
          return t2.HASHLENGTH[r2];
        }, V.crypto.MessageDigest.HASHLENGTH = {md5: 16, sha1: 20, sha224: 28, sha256: 32, sha384: 48, sha512: 64, ripemd160: 20}, V.crypto.Mac = function(e2) {
          this.setAlgAndProvider = function(e3, t2) {
            if ((e3 = e3.toLowerCase()) == null && (e3 = "hmacsha1"), (e3 = e3.toLowerCase()).substr(0, 4) != "hmac")
              throw "setAlgAndProvider unsupported HMAC alg: " + e3;
            t2 === void 0 && (t2 = V.crypto.Util.DEFAULTPROVIDER[e3]), this.algProv = e3 + "/" + t2;
            var r2 = e3.substr(4);
            if (":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r2) != -1 && t2 == "cryptojs") {
              try {
                var n2 = V.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r2];
                this.mac = y.algo.HMAC.create(n2, this.pass);
              } catch (e4) {
                throw "setAlgAndProvider hash alg set fail hashAlg=" + r2 + "/" + e4;
              }
              this.updateString = function(e4) {
                this.mac.update(e4);
              }, this.updateHex = function(e4) {
                var t3 = y.enc.Hex.parse(e4);
                this.mac.update(t3);
              }, this.doFinal = function() {
                return this.mac.finalize().toString(y.enc.Hex);
              }, this.doFinalString = function(e4) {
                return this.updateString(e4), this.doFinal();
              }, this.doFinalHex = function(e4) {
                return this.updateHex(e4), this.doFinal();
              };
            }
          }, this.updateString = function(e3) {
            throw "updateString(str) not supported for this alg/prov: " + this.algProv;
          }, this.updateHex = function(e3) {
            throw "updateHex(hex) not supported for this alg/prov: " + this.algProv;
          }, this.doFinal = function() {
            throw "digest() not supported for this alg/prov: " + this.algProv;
          }, this.doFinalString = function(e3) {
            throw "digestString(str) not supported for this alg/prov: " + this.algProv;
          }, this.doFinalHex = function(e3) {
            throw "digestHex(hex) not supported for this alg/prov: " + this.algProv;
          }, this.setPassword = function(e3) {
            if (typeof e3 == "string") {
              var t2 = e3;
              return e3.length % 2 != 1 && e3.match(/^[0-9A-Fa-f]+$/) || (t2 = rstrtohex(e3)), void (this.pass = y.enc.Hex.parse(t2));
            }
            if ((e3 === void 0 ? "undefined" : i(e3)) != "object")
              throw "KJUR.crypto.Mac unsupported password type: " + e3;
            t2 = null;
            if (e3.hex !== void 0) {
              if (e3.hex.length % 2 != 0 || !e3.hex.match(/^[0-9A-Fa-f]+$/))
                throw "Mac: wrong hex password: " + e3.hex;
              t2 = e3.hex;
            }
            if (e3.utf8 !== void 0 && (t2 = utf8tohex(e3.utf8)), e3.rstr !== void 0 && (t2 = rstrtohex(e3.rstr)), e3.b64 !== void 0 && (t2 = b64tohex(e3.b64)), e3.b64u !== void 0 && (t2 = b64utohex(e3.b64u)), t2 == null)
              throw "KJUR.crypto.Mac unsupported password type: " + e3;
            this.pass = y.enc.Hex.parse(t2);
          }, e2 !== void 0 && (e2.pass !== void 0 && this.setPassword(e2.pass), e2.alg !== void 0 && (this.algName = e2.alg, e2.prov === void 0 && (this.provName = V.crypto.Util.DEFAULTPROVIDER[this.algName]), this.setAlgAndProvider(this.algName, this.provName)));
        }, V.crypto.Signature = function(e2) {
          var t2 = null;
          if (this._setAlgNames = function() {
            var e3 = this.algName.match(/^(.+)with(.+)$/);
            e3 && (this.mdAlgName = e3[1].toLowerCase(), this.pubkeyAlgName = e3[2].toLowerCase());
          }, this._zeroPaddingOfSignature = function(e3, t3) {
            for (var r2 = "", n2 = t3 / 4 - e3.length, i2 = 0; i2 < n2; i2++)
              r2 += "0";
            return r2 + e3;
          }, this.setAlgAndProvider = function(e3, t3) {
            if (this._setAlgNames(), t3 != "cryptojs/jsrsa")
              throw "provider not supported: " + t3;
            if (":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName) != -1) {
              try {
                this.md = new V.crypto.MessageDigest({alg: this.mdAlgName});
              } catch (e4) {
                throw "setAlgAndProvider hash alg set fail alg=" + this.mdAlgName + "/" + e4;
              }
              this.init = function(e4, t4) {
                var r2 = null;
                try {
                  r2 = t4 === void 0 ? z.getKey(e4) : z.getKey(e4, t4);
                } catch (e5) {
                  throw "init failed:" + e5;
                }
                if (r2.isPrivate === true)
                  this.prvKey = r2, this.state = "SIGN";
                else {
                  if (r2.isPublic !== true)
                    throw "init failed.:" + r2;
                  this.pubKey = r2, this.state = "VERIFY";
                }
              }, this.updateString = function(e4) {
                this.md.updateString(e4);
              }, this.updateHex = function(e4) {
                this.md.updateHex(e4);
              }, this.sign = function() {
                if (this.sHashHex = this.md.digest(), this.ecprvhex !== void 0 && this.eccurvename !== void 0) {
                  var e4 = new V.crypto.ECDSA({curve: this.eccurvename});
                  this.hSign = e4.signHex(this.sHashHex, this.ecprvhex);
                } else if (this.prvKey instanceof RSAKey && this.pubkeyAlgName === "rsaandmgf1")
                  this.hSign = this.prvKey.signWithMessageHashPSS(this.sHashHex, this.mdAlgName, this.pssSaltLen);
                else if (this.prvKey instanceof RSAKey && this.pubkeyAlgName === "rsa")
                  this.hSign = this.prvKey.signWithMessageHash(this.sHashHex, this.mdAlgName);
                else if (this.prvKey instanceof V.crypto.ECDSA)
                  this.hSign = this.prvKey.signWithMessageHash(this.sHashHex);
                else {
                  if (!(this.prvKey instanceof V.crypto.DSA))
                    throw "Signature: unsupported private key alg: " + this.pubkeyAlgName;
                  this.hSign = this.prvKey.signWithMessageHash(this.sHashHex);
                }
                return this.hSign;
              }, this.signString = function(e4) {
                return this.updateString(e4), this.sign();
              }, this.signHex = function(e4) {
                return this.updateHex(e4), this.sign();
              }, this.verify = function(e4) {
                if (this.sHashHex = this.md.digest(), this.ecpubhex !== void 0 && this.eccurvename !== void 0)
                  return new V.crypto.ECDSA({curve: this.eccurvename}).verifyHex(this.sHashHex, e4, this.ecpubhex);
                if (this.pubKey instanceof RSAKey && this.pubkeyAlgName === "rsaandmgf1")
                  return this.pubKey.verifyWithMessageHashPSS(this.sHashHex, e4, this.mdAlgName, this.pssSaltLen);
                if (this.pubKey instanceof RSAKey && this.pubkeyAlgName === "rsa")
                  return this.pubKey.verifyWithMessageHash(this.sHashHex, e4);
                if (V.crypto.ECDSA !== void 0 && this.pubKey instanceof V.crypto.ECDSA)
                  return this.pubKey.verifyWithMessageHash(this.sHashHex, e4);
                if (V.crypto.DSA !== void 0 && this.pubKey instanceof V.crypto.DSA)
                  return this.pubKey.verifyWithMessageHash(this.sHashHex, e4);
                throw "Signature: unsupported public key alg: " + this.pubkeyAlgName;
              };
            }
          }, this.init = function(e3, t3) {
            throw "init(key, pass) not supported for this alg:prov=" + this.algProvName;
          }, this.updateString = function(e3) {
            throw "updateString(str) not supported for this alg:prov=" + this.algProvName;
          }, this.updateHex = function(e3) {
            throw "updateHex(hex) not supported for this alg:prov=" + this.algProvName;
          }, this.sign = function() {
            throw "sign() not supported for this alg:prov=" + this.algProvName;
          }, this.signString = function(e3) {
            throw "digestString(str) not supported for this alg:prov=" + this.algProvName;
          }, this.signHex = function(e3) {
            throw "digestHex(hex) not supported for this alg:prov=" + this.algProvName;
          }, this.verify = function(e3) {
            throw "verify(hSigVal) not supported for this alg:prov=" + this.algProvName;
          }, this.initParams = e2, e2 !== void 0 && (e2.alg !== void 0 && (this.algName = e2.alg, e2.prov === void 0 ? this.provName = V.crypto.Util.DEFAULTPROVIDER[this.algName] : this.provName = e2.prov, this.algProvName = this.algName + ":" + this.provName, this.setAlgAndProvider(this.algName, this.provName), this._setAlgNames()), e2.psssaltlen !== void 0 && (this.pssSaltLen = e2.psssaltlen), e2.prvkeypem !== void 0)) {
            if (e2.prvkeypas !== void 0)
              throw "both prvkeypem and prvkeypas parameters not supported";
            try {
              t2 = z.getKey(e2.prvkeypem);
              this.init(t2);
            } catch (e3) {
              throw "fatal error to load pem private key: " + e3;
            }
          }
        }, V.crypto.Cipher = function(e2) {
        }, V.crypto.Cipher.encrypt = function(e2, t2, r2) {
          if (t2 instanceof RSAKey && t2.isPublic) {
            var n2 = V.crypto.Cipher.getAlgByKeyAndName(t2, r2);
            if (n2 === "RSA")
              return t2.encrypt(e2);
            if (n2 === "RSAOAEP")
              return t2.encryptOAEP(e2, "sha1");
            var i2 = n2.match(/^RSAOAEP(\d+)$/);
            if (i2 !== null)
              return t2.encryptOAEP(e2, "sha" + i2[1]);
            throw "Cipher.encrypt: unsupported algorithm for RSAKey: " + r2;
          }
          throw "Cipher.encrypt: unsupported key or algorithm";
        }, V.crypto.Cipher.decrypt = function(e2, t2, r2) {
          if (t2 instanceof RSAKey && t2.isPrivate) {
            var n2 = V.crypto.Cipher.getAlgByKeyAndName(t2, r2);
            if (n2 === "RSA")
              return t2.decrypt(e2);
            if (n2 === "RSAOAEP")
              return t2.decryptOAEP(e2, "sha1");
            var i2 = n2.match(/^RSAOAEP(\d+)$/);
            if (i2 !== null)
              return t2.decryptOAEP(e2, "sha" + i2[1]);
            throw "Cipher.decrypt: unsupported algorithm for RSAKey: " + r2;
          }
          throw "Cipher.decrypt: unsupported key or algorithm";
        }, V.crypto.Cipher.getAlgByKeyAndName = function(e2, t2) {
          if (e2 instanceof RSAKey) {
            if (":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t2) != -1)
              return t2;
            if (t2 === null || t2 === void 0)
              return "RSA";
            throw "getAlgByKeyAndName: not supported algorithm name for RSAKey: " + t2;
          }
          throw "getAlgByKeyAndName: not supported algorithm name: " + t2;
        }, V.crypto.OID = new function() {
          this.oidhex2name = {"2a864886f70d010101": "rsaEncryption", "2a8648ce3d0201": "ecPublicKey", "2a8648ce380401": "dsa", "2a8648ce3d030107": "secp256r1", "2b8104001f": "secp192k1", "2b81040021": "secp224r1", "2b8104000a": "secp256k1", "2b81040023": "secp521r1", "2b81040022": "secp384r1", "2a8648ce380403": "SHA1withDSA", "608648016503040301": "SHA224withDSA", "608648016503040302": "SHA256withDSA"};
        }(), V !== void 0 && V || (V = {}), V.crypto !== void 0 && V.crypto || (V.crypto = {}), V.crypto.ECDSA = function(e2) {
          var t2 = new SecureRandom();
          this.type = "EC", this.isPrivate = false, this.isPublic = false, this.getBigRandom = function(e3) {
            return new BigInteger(e3.bitLength(), t2).mod(e3.subtract(BigInteger.ONE)).add(BigInteger.ONE);
          }, this.setNamedCurve = function(e3) {
            this.ecparams = V.crypto.ECParameterDB.getByName(e3), this.prvKeyHex = null, this.pubKeyHex = null, this.curveName = e3;
          }, this.setPrivateKeyHex = function(e3) {
            this.isPrivate = true, this.prvKeyHex = e3;
          }, this.setPublicKeyHex = function(e3) {
            this.isPublic = true, this.pubKeyHex = e3;
          }, this.getPublicKeyXYHex = function() {
            var e3 = this.pubKeyHex;
            if (e3.substr(0, 2) !== "04")
              throw "this method supports uncompressed format(04) only";
            var t3 = this.ecparams.keylen / 4;
            if (e3.length !== 2 + 2 * t3)
              throw "malformed public key hex length";
            var r2 = {};
            return r2.x = e3.substr(2, t3), r2.y = e3.substr(2 + t3), r2;
          }, this.getShortNISTPCurveName = function() {
            var e3 = this.curveName;
            return e3 === "secp256r1" || e3 === "NIST P-256" || e3 === "P-256" || e3 === "prime256v1" ? "P-256" : e3 === "secp384r1" || e3 === "NIST P-384" || e3 === "P-384" ? "P-384" : null;
          }, this.generateKeyPairHex = function() {
            var e3 = this.ecparams.n, t3 = this.getBigRandom(e3), r2 = this.ecparams.G.multiply(t3), n2 = r2.getX().toBigInteger(), i2 = r2.getY().toBigInteger(), o = this.ecparams.keylen / 4, s = ("0000000000" + t3.toString(16)).slice(-o), a = "04" + ("0000000000" + n2.toString(16)).slice(-o) + ("0000000000" + i2.toString(16)).slice(-o);
            return this.setPrivateKeyHex(s), this.setPublicKeyHex(a), {ecprvhex: s, ecpubhex: a};
          }, this.signWithMessageHash = function(e3) {
            return this.signHex(e3, this.prvKeyHex);
          }, this.signHex = function(e3, t3) {
            var r2 = new BigInteger(t3, 16), n2 = this.ecparams.n, i2 = new BigInteger(e3, 16);
            do {
              var o = this.getBigRandom(n2), s = this.ecparams.G.multiply(o).getX().toBigInteger().mod(n2);
            } while (s.compareTo(BigInteger.ZERO) <= 0);
            var a = o.modInverse(n2).multiply(i2.add(r2.multiply(s))).mod(n2);
            return V.crypto.ECDSA.biRSSigToASN1Sig(s, a);
          }, this.sign = function(e3, t3) {
            var r2 = t3, n2 = this.ecparams.n, i2 = BigInteger.fromByteArrayUnsigned(e3);
            do {
              var o = this.getBigRandom(n2), s = this.ecparams.G.multiply(o).getX().toBigInteger().mod(n2);
            } while (s.compareTo(BigInteger.ZERO) <= 0);
            var a = o.modInverse(n2).multiply(i2.add(r2.multiply(s))).mod(n2);
            return this.serializeSig(s, a);
          }, this.verifyWithMessageHash = function(e3, t3) {
            return this.verifyHex(e3, t3, this.pubKeyHex);
          }, this.verifyHex = function(e3, t3, r2) {
            var n2, i2, o, s = V.crypto.ECDSA.parseSigHex(t3);
            n2 = s.r, i2 = s.s, o = ECPointFp.decodeFromHex(this.ecparams.curve, r2);
            var a = new BigInteger(e3, 16);
            return this.verifyRaw(a, n2, i2, o);
          }, this.verify = function(e3, t3, r2) {
            var n2, o, s;
            if (Bitcoin.Util.isArray(t3)) {
              var a = this.parseSig(t3);
              n2 = a.r, o = a.s;
            } else {
              if ((t3 === void 0 ? "undefined" : i(t3)) !== "object" || !t3.r || !t3.s)
                throw "Invalid value for signature";
              n2 = t3.r, o = t3.s;
            }
            if (r2 instanceof ECPointFp)
              s = r2;
            else {
              if (!Bitcoin.Util.isArray(r2))
                throw "Invalid format for pubkey value, must be byte array or ECPointFp";
              s = ECPointFp.decodeFrom(this.ecparams.curve, r2);
            }
            var u2 = BigInteger.fromByteArrayUnsigned(e3);
            return this.verifyRaw(u2, n2, o, s);
          }, this.verifyRaw = function(e3, t3, r2, n2) {
            var i2 = this.ecparams.n, o = this.ecparams.G;
            if (t3.compareTo(BigInteger.ONE) < 0 || t3.compareTo(i2) >= 0)
              return false;
            if (r2.compareTo(BigInteger.ONE) < 0 || r2.compareTo(i2) >= 0)
              return false;
            var s = r2.modInverse(i2), a = e3.multiply(s).mod(i2), u2 = t3.multiply(s).mod(i2);
            return o.multiply(a).add(n2.multiply(u2)).getX().toBigInteger().mod(i2).equals(t3);
          }, this.serializeSig = function(e3, t3) {
            var r2 = e3.toByteArraySigned(), n2 = t3.toByteArraySigned(), i2 = [];
            return i2.push(2), i2.push(r2.length), (i2 = i2.concat(r2)).push(2), i2.push(n2.length), (i2 = i2.concat(n2)).unshift(i2.length), i2.unshift(48), i2;
          }, this.parseSig = function(e3) {
            var t3;
            if (e3[0] != 48)
              throw new Error("Signature not a valid DERSequence");
            if (e3[t3 = 2] != 2)
              throw new Error("First element in signature must be a DERInteger");
            var r2 = e3.slice(t3 + 2, t3 + 2 + e3[t3 + 1]);
            if (e3[t3 += 2 + e3[t3 + 1]] != 2)
              throw new Error("Second element in signature must be a DERInteger");
            var n2 = e3.slice(t3 + 2, t3 + 2 + e3[t3 + 1]);
            return t3 += 2 + e3[t3 + 1], {r: BigInteger.fromByteArrayUnsigned(r2), s: BigInteger.fromByteArrayUnsigned(n2)};
          }, this.parseSigCompact = function(e3) {
            if (e3.length !== 65)
              throw "Signature has the wrong length";
            var t3 = e3[0] - 27;
            if (t3 < 0 || t3 > 7)
              throw "Invalid signature type";
            var r2 = this.ecparams.n;
            return {r: BigInteger.fromByteArrayUnsigned(e3.slice(1, 33)).mod(r2), s: BigInteger.fromByteArrayUnsigned(e3.slice(33, 65)).mod(r2), i: t3};
          }, this.readPKCS5PrvKeyHex = function(e3) {
            var t3, r2, n2, i2 = J, o = V.crypto.ECDSA.getName, s = i2.getVbyList;
            if (i2.isASN1HEX(e3) === false)
              throw "not ASN.1 hex string";
            try {
              t3 = s(e3, 0, [2, 0], "06"), r2 = s(e3, 0, [1], "04");
              try {
                n2 = s(e3, 0, [3, 0], "03").substr(2);
              } catch (e4) {
              }
            } catch (e4) {
              throw "malformed PKCS#1/5 plain ECC private key";
            }
            if (this.curveName = o(t3), this.curveName === void 0)
              throw "unsupported curve name";
            this.setNamedCurve(this.curveName), this.setPublicKeyHex(n2), this.setPrivateKeyHex(r2), this.isPublic = false;
          }, this.readPKCS8PrvKeyHex = function(e3) {
            var t3, r2, n2, i2 = J, o = V.crypto.ECDSA.getName, s = i2.getVbyList;
            if (i2.isASN1HEX(e3) === false)
              throw "not ASN.1 hex string";
            try {
              s(e3, 0, [1, 0], "06"), t3 = s(e3, 0, [1, 1], "06"), r2 = s(e3, 0, [2, 0, 1], "04");
              try {
                n2 = s(e3, 0, [2, 0, 2, 0], "03").substr(2);
              } catch (e4) {
              }
            } catch (e4) {
              throw "malformed PKCS#8 plain ECC private key";
            }
            if (this.curveName = o(t3), this.curveName === void 0)
              throw "unsupported curve name";
            this.setNamedCurve(this.curveName), this.setPublicKeyHex(n2), this.setPrivateKeyHex(r2), this.isPublic = false;
          }, this.readPKCS8PubKeyHex = function(e3) {
            var t3, r2, n2 = J, i2 = V.crypto.ECDSA.getName, o = n2.getVbyList;
            if (n2.isASN1HEX(e3) === false)
              throw "not ASN.1 hex string";
            try {
              o(e3, 0, [0, 0], "06"), t3 = o(e3, 0, [0, 1], "06"), r2 = o(e3, 0, [1], "03").substr(2);
            } catch (e4) {
              throw "malformed PKCS#8 ECC public key";
            }
            if (this.curveName = i2(t3), this.curveName === null)
              throw "unsupported curve name";
            this.setNamedCurve(this.curveName), this.setPublicKeyHex(r2);
          }, this.readCertPubKeyHex = function(e3, t3) {
            t3 !== 5 && (t3 = 6);
            var r2, n2, i2 = J, o = V.crypto.ECDSA.getName, s = i2.getVbyList;
            if (i2.isASN1HEX(e3) === false)
              throw "not ASN.1 hex string";
            try {
              r2 = s(e3, 0, [0, t3, 0, 1], "06"), n2 = s(e3, 0, [0, t3, 1], "03").substr(2);
            } catch (e4) {
              throw "malformed X.509 certificate ECC public key";
            }
            if (this.curveName = o(r2), this.curveName === null)
              throw "unsupported curve name";
            this.setNamedCurve(this.curveName), this.setPublicKeyHex(n2);
          }, e2 !== void 0 && e2.curve !== void 0 && (this.curveName = e2.curve), this.curveName === void 0 && (this.curveName = "secp256r1"), this.setNamedCurve(this.curveName), e2 !== void 0 && (e2.prv !== void 0 && this.setPrivateKeyHex(e2.prv), e2.pub !== void 0 && this.setPublicKeyHex(e2.pub));
        }, V.crypto.ECDSA.parseSigHex = function(e2) {
          var t2 = V.crypto.ECDSA.parseSigHexInHexRS(e2);
          return {r: new BigInteger(t2.r, 16), s: new BigInteger(t2.s, 16)};
        }, V.crypto.ECDSA.parseSigHexInHexRS = function(e2) {
          var t2 = J, r2 = t2.getChildIdx, n2 = t2.getV;
          if (e2.substr(0, 2) != "30")
            throw "signature is not a ASN.1 sequence";
          var i2 = r2(e2, 0);
          if (i2.length != 2)
            throw "number of signature ASN.1 sequence elements seem wrong";
          var o = i2[0], s = i2[1];
          if (e2.substr(o, 2) != "02")
            throw "1st item of sequene of signature is not ASN.1 integer";
          if (e2.substr(s, 2) != "02")
            throw "2nd item of sequene of signature is not ASN.1 integer";
          return {r: n2(e2, o), s: n2(e2, s)};
        }, V.crypto.ECDSA.asn1SigToConcatSig = function(e2) {
          var t2 = V.crypto.ECDSA.parseSigHexInHexRS(e2), r2 = t2.r, n2 = t2.s;
          if (r2.substr(0, 2) == "00" && r2.length % 32 == 2 && (r2 = r2.substr(2)), n2.substr(0, 2) == "00" && n2.length % 32 == 2 && (n2 = n2.substr(2)), r2.length % 32 == 30 && (r2 = "00" + r2), n2.length % 32 == 30 && (n2 = "00" + n2), r2.length % 32 != 0)
            throw "unknown ECDSA sig r length error";
          if (n2.length % 32 != 0)
            throw "unknown ECDSA sig s length error";
          return r2 + n2;
        }, V.crypto.ECDSA.concatSigToASN1Sig = function(e2) {
          if (e2.length / 2 * 8 % 128 != 0)
            throw "unknown ECDSA concatinated r-s sig  length error";
          var t2 = e2.substr(0, e2.length / 2), r2 = e2.substr(e2.length / 2);
          return V.crypto.ECDSA.hexRSSigToASN1Sig(t2, r2);
        }, V.crypto.ECDSA.hexRSSigToASN1Sig = function(e2, t2) {
          var r2 = new BigInteger(e2, 16), n2 = new BigInteger(t2, 16);
          return V.crypto.ECDSA.biRSSigToASN1Sig(r2, n2);
        }, V.crypto.ECDSA.biRSSigToASN1Sig = function(e2, t2) {
          var r2 = V.asn1, n2 = new r2.DERInteger({bigint: e2}), i2 = new r2.DERInteger({bigint: t2});
          return new r2.DERSequence({array: [n2, i2]}).getEncodedHex();
        }, V.crypto.ECDSA.getName = function(e2) {
          return e2 === "2a8648ce3d030107" ? "secp256r1" : e2 === "2b8104000a" ? "secp256k1" : e2 === "2b81040022" ? "secp384r1" : "|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e2) !== -1 ? "secp256r1" : "|secp256k1|".indexOf(e2) !== -1 ? "secp256k1" : "|secp384r1|NIST P-384|P-384|".indexOf(e2) !== -1 ? "secp384r1" : null;
        }, V !== void 0 && V || (V = {}), V.crypto !== void 0 && V.crypto || (V.crypto = {}), V.crypto.ECParameterDB = new function() {
          var e2 = {}, t2 = {};
          function a(e3) {
            return new BigInteger(e3, 16);
          }
          __name(a, "a");
          this.getByName = function(r2) {
            var n2 = r2;
            if (t2[n2] !== void 0 && (n2 = t2[r2]), e2[n2] !== void 0)
              return e2[n2];
            throw "unregistered EC curve name: " + n2;
          }, this.regist = function(r2, n2, i2, o, s, u2, c, h, l, f, g, p2) {
            e2[r2] = {};
            var d = a(i2), v2 = a(o), y2 = a(s), m = a(u2), _2 = a(c), S2 = new ECCurveFp(d, v2, y2), b = S2.decodePointHex("04" + h + l);
            e2[r2].name = r2, e2[r2].keylen = n2, e2[r2].curve = S2, e2[r2].G = b, e2[r2].n = m, e2[r2].h = _2, e2[r2].oid = g, e2[r2].info = p2;
            for (var F2 = 0; F2 < f.length; F2++)
              t2[f[F2]] = r2;
          };
        }(), V.crypto.ECParameterDB.regist("secp128r1", 128, "FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF", "FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC", "E87579C11079F43DD824993C2CEE5ED3", "FFFFFFFE0000000075A30D1B9038A115", "1", "161FF7528B899B2D0C28607CA52C5B86", "CF5AC8395BAFEB13C02DA292DDED7A83", [], "", "secp128r1 : SECG curve over a 128 bit prime field"), V.crypto.ECParameterDB.regist("secp160k1", 160, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73", "0", "7", "0100000000000000000001B8FA16DFAB9ACA16B6B3", "1", "3B4C382CE37AA192A4019E763036F4F5DD4D7EBB", "938CF935318FDCED6BC28286531733C3F03C4FEE", [], "", "secp160k1 : SECG curve over a 160 bit prime field"), V.crypto.ECParameterDB.regist("secp160r1", 160, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF", "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC", "1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45", "0100000000000000000001F4C8F927AED3CA752257", "1", "4A96B5688EF573284664698968C38BB913CBFC82", "23A628553168947D59DCC912042351377AC5FB32", [], "", "secp160r1 : SECG curve over a 160 bit prime field"), V.crypto.ECParameterDB.regist("secp192k1", 192, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37", "0", "3", "FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D", "1", "DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D", "9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D", []), V.crypto.ECParameterDB.regist("secp192r1", 192, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF", "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC", "64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1", "FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831", "1", "188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012", "07192B95FFC8DA78631011ED6B24CDD573F977A11E794811", []), V.crypto.ECParameterDB.regist("secp224r1", 224, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001", "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE", "B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4", "FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D", "1", "B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21", "BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34", []), V.crypto.ECParameterDB.regist("secp256k1", 256, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F", "0", "7", "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141", "1", "79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798", "483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8", []), V.crypto.ECParameterDB.regist("secp256r1", 256, "FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF", "FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC", "5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B", "FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551", "1", "6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296", "4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5", ["NIST P-256", "P-256", "prime256v1"]), V.crypto.ECParameterDB.regist("secp384r1", 384, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF", "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC", "B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF", "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973", "1", "AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7", "3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f", ["NIST P-384", "P-384"]), V.crypto.ECParameterDB.regist("secp521r1", 521, "1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF", "1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC", "051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00", "1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409", "1", "C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66", "011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650", ["NIST P-521", "P-521"]);
        var z = function() {
          var t2 = /* @__PURE__ */ __name(function d(e2, t3, n3) {
            return r2(y.AES, e2, t3, n3);
          }, "d"), r2 = /* @__PURE__ */ __name(function k(e2, t3, r3, n3) {
            var i3 = y.enc.Hex.parse(t3), o = y.enc.Hex.parse(r3), s2 = y.enc.Hex.parse(n3), a = {};
            a.key = o, a.iv = s2, a.ciphertext = i3;
            var u3 = e2.decrypt(a, o, {iv: s2});
            return y.enc.Hex.stringify(u3);
          }, "k"), n2 = /* @__PURE__ */ __name(function l(e2, t3, r3) {
            return i2(y.AES, e2, t3, r3);
          }, "l"), i2 = /* @__PURE__ */ __name(function g2(e2, t3, r3, n3) {
            var i3 = y.enc.Hex.parse(t3), o = y.enc.Hex.parse(r3), s2 = y.enc.Hex.parse(n3), a = e2.encrypt(i3, o, {iv: s2}), u3 = y.enc.Hex.parse(a.toString());
            return y.enc.Base64.stringify(u3);
          }, "g"), s = {"AES-256-CBC": {proc: t2, eproc: n2, keylen: 32, ivlen: 16}, "AES-192-CBC": {proc: t2, eproc: n2, keylen: 24, ivlen: 16}, "AES-128-CBC": {proc: t2, eproc: n2, keylen: 16, ivlen: 16}, "DES-EDE3-CBC": {proc: /* @__PURE__ */ __name(function e2(t3, n3, i3) {
            return r2(y.TripleDES, t3, n3, i3);
          }, "e"), eproc: /* @__PURE__ */ __name(function o(e2, t3, r3) {
            return i2(y.TripleDES, e2, t3, r3);
          }, "o"), keylen: 24, ivlen: 8}, "DES-CBC": {proc: /* @__PURE__ */ __name(function a(e2, t3, n3) {
            return r2(y.DES, e2, t3, n3);
          }, "a"), eproc: /* @__PURE__ */ __name(function f(e2, t3, r3) {
            return i2(y.DES, e2, t3, r3);
          }, "f"), keylen: 8, ivlen: 8}}, u2 = /* @__PURE__ */ __name(function n3(e2) {
            var t3 = {}, r3 = e2.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)", "m"));
            r3 && (t3.cipher = r3[1], t3.ivsalt = r3[2]);
            var i3 = e2.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));
            i3 && (t3.type = i3[1]);
            var o = -1, s2 = 0;
            e2.indexOf("\r\n\r\n") != -1 && (o = e2.indexOf("\r\n\r\n"), s2 = 2), e2.indexOf("\n\n") != -1 && (o = e2.indexOf("\n\n"), s2 = 1);
            var a = e2.indexOf("-----END");
            if (o != -1 && a != -1) {
              var u3 = e2.substring(o + 2 * s2, a - s2);
              u3 = u3.replace(/\s+/g, ""), t3.data = u3;
            }
            return t3;
          }, "n"), c = /* @__PURE__ */ __name(function j(e2, t3, r3) {
            for (var n3 = r3.substring(0, 16), i3 = y.enc.Hex.parse(n3), o = y.enc.Utf8.parse(t3), a = s[e2].keylen + s[e2].ivlen, u3 = "", c2 = null; ; ) {
              var h = y.algo.MD5.create();
              if (c2 != null && h.update(c2), h.update(o), h.update(i3), c2 = h.finalize(), (u3 += y.enc.Hex.stringify(c2)).length >= 2 * a)
                break;
            }
            var l = {};
            return l.keyhex = u3.substr(0, 2 * s[e2].keylen), l.ivhex = u3.substr(2 * s[e2].keylen, 2 * s[e2].ivlen), l;
          }, "j"), g = /* @__PURE__ */ __name(function b(e2, t3, r3, n3) {
            var i3 = y.enc.Base64.parse(e2), o = y.enc.Hex.stringify(i3);
            return (0, s[t3].proc)(o, r3, n3);
          }, "b");
          return {version: "1.0.0", parsePKCS5PEM: /* @__PURE__ */ __name(function parsePKCS5PEM(e2) {
            return u2(e2);
          }, "parsePKCS5PEM"), getKeyAndUnusedIvByPasscodeAndIvsalt: /* @__PURE__ */ __name(function getKeyAndUnusedIvByPasscodeAndIvsalt(e2, t3, r3) {
            return c(e2, t3, r3);
          }, "getKeyAndUnusedIvByPasscodeAndIvsalt"), decryptKeyB64: /* @__PURE__ */ __name(function decryptKeyB64(e2, t3, r3, n3) {
            return g(e2, t3, r3, n3);
          }, "decryptKeyB64"), getDecryptedKeyHex: /* @__PURE__ */ __name(function getDecryptedKeyHex(e2, t3) {
            var r3 = u2(e2), n3 = (r3.type, r3.cipher), i3 = r3.ivsalt, o = r3.data, s2 = c(n3, t3, i3).keyhex;
            return g(o, n3, s2, i3);
          }, "getDecryptedKeyHex"), getEncryptedPKCS5PEMFromPrvKeyHex: /* @__PURE__ */ __name(function getEncryptedPKCS5PEMFromPrvKeyHex(e2, t3, r3, n3, i3) {
            var o = "";
            if (n3 !== void 0 && n3 != null || (n3 = "AES-256-CBC"), s[n3] === void 0)
              throw "KEYUTIL unsupported algorithm: " + n3;
            i3 !== void 0 && i3 != null || (i3 = (/* @__PURE__ */ __name(function m(e3) {
              var t4 = y.lib.WordArray.random(e3);
              return y.enc.Hex.stringify(t4);
            }, "m"))(s[n3].ivlen).toUpperCase());
            var a = (/* @__PURE__ */ __name(function h(e3, t4, r4, n4) {
              return (0, s[t4].eproc)(e3, r4, n4);
            }, "h"))(t3, n3, c(n3, r3, i3).keyhex, i3);
            o = "-----BEGIN " + e2 + " PRIVATE KEY-----\r\n";
            return o += "Proc-Type: 4,ENCRYPTED\r\n", o += "DEK-Info: " + n3 + "," + i3 + "\r\n", o += "\r\n", o += a.replace(/(.{64})/g, "$1\r\n"), o += "\r\n-----END " + e2 + " PRIVATE KEY-----\r\n";
          }, "getEncryptedPKCS5PEMFromPrvKeyHex"), parseHexOfEncryptedPKCS8: /* @__PURE__ */ __name(function parseHexOfEncryptedPKCS8(e2) {
            var t3 = J, r3 = t3.getChildIdx, n3 = t3.getV, i3 = {}, o = r3(e2, 0);
            if (o.length != 2)
              throw "malformed format: SEQUENCE(0).items != 2: " + o.length;
            i3.ciphertext = n3(e2, o[1]);
            var s2 = r3(e2, o[0]);
            if (s2.length != 2)
              throw "malformed format: SEQUENCE(0.0).items != 2: " + s2.length;
            if (n3(e2, s2[0]) != "2a864886f70d01050d")
              throw "this only supports pkcs5PBES2";
            var a = r3(e2, s2[1]);
            if (s2.length != 2)
              throw "malformed format: SEQUENCE(0.0.1).items != 2: " + a.length;
            var u3 = r3(e2, a[1]);
            if (u3.length != 2)
              throw "malformed format: SEQUENCE(0.0.1.1).items != 2: " + u3.length;
            if (n3(e2, u3[0]) != "2a864886f70d0307")
              throw "this only supports TripleDES";
            i3.encryptionSchemeAlg = "TripleDES", i3.encryptionSchemeIV = n3(e2, u3[1]);
            var c2 = r3(e2, a[0]);
            if (c2.length != 2)
              throw "malformed format: SEQUENCE(0.0.1.0).items != 2: " + c2.length;
            if (n3(e2, c2[0]) != "2a864886f70d01050c")
              throw "this only supports pkcs5PBKDF2";
            var h = r3(e2, c2[1]);
            if (h.length < 2)
              throw "malformed format: SEQUENCE(0.0.1.0.1).items < 2: " + h.length;
            i3.pbkdf2Salt = n3(e2, h[0]);
            var l = n3(e2, h[1]);
            try {
              i3.pbkdf2Iter = parseInt(l, 16);
            } catch (e3) {
              throw "malformed format pbkdf2Iter: " + l;
            }
            return i3;
          }, "parseHexOfEncryptedPKCS8"), getPBKDF2KeyHexFromParam: /* @__PURE__ */ __name(function getPBKDF2KeyHexFromParam(e2, t3) {
            var r3 = y.enc.Hex.parse(e2.pbkdf2Salt), n3 = e2.pbkdf2Iter, i3 = y.PBKDF2(t3, r3, {keySize: 6, iterations: n3});
            return y.enc.Hex.stringify(i3);
          }, "getPBKDF2KeyHexFromParam"), _getPlainPKCS8HexFromEncryptedPKCS8PEM: /* @__PURE__ */ __name(function _getPlainPKCS8HexFromEncryptedPKCS8PEM(e2, t3) {
            var r3 = pemtohex(e2, "ENCRYPTED PRIVATE KEY"), n3 = this.parseHexOfEncryptedPKCS8(r3), i3 = z.getPBKDF2KeyHexFromParam(n3, t3), o = {};
            o.ciphertext = y.enc.Hex.parse(n3.ciphertext);
            var s2 = y.enc.Hex.parse(i3), a = y.enc.Hex.parse(n3.encryptionSchemeIV), u3 = y.TripleDES.decrypt(o, s2, {iv: a});
            return y.enc.Hex.stringify(u3);
          }, "_getPlainPKCS8HexFromEncryptedPKCS8PEM"), getKeyFromEncryptedPKCS8PEM: /* @__PURE__ */ __name(function getKeyFromEncryptedPKCS8PEM(e2, t3) {
            var r3 = this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e2, t3);
            return this.getKeyFromPlainPrivatePKCS8Hex(r3);
          }, "getKeyFromEncryptedPKCS8PEM"), parsePlainPrivatePKCS8Hex: /* @__PURE__ */ __name(function parsePlainPrivatePKCS8Hex(e2) {
            var t3 = J, r3 = t3.getChildIdx, n3 = t3.getV, i3 = {algparam: null};
            if (e2.substr(0, 2) != "30")
              throw "malformed plain PKCS8 private key(code:001)";
            var o = r3(e2, 0);
            if (o.length != 3)
              throw "malformed plain PKCS8 private key(code:002)";
            if (e2.substr(o[1], 2) != "30")
              throw "malformed PKCS8 private key(code:003)";
            var s2 = r3(e2, o[1]);
            if (s2.length != 2)
              throw "malformed PKCS8 private key(code:004)";
            if (e2.substr(s2[0], 2) != "06")
              throw "malformed PKCS8 private key(code:005)";
            if (i3.algoid = n3(e2, s2[0]), e2.substr(s2[1], 2) == "06" && (i3.algparam = n3(e2, s2[1])), e2.substr(o[2], 2) != "04")
              throw "malformed PKCS8 private key(code:006)";
            return i3.keyidx = t3.getVidx(e2, o[2]), i3;
          }, "parsePlainPrivatePKCS8Hex"), getKeyFromPlainPrivatePKCS8PEM: /* @__PURE__ */ __name(function getKeyFromPlainPrivatePKCS8PEM(e2) {
            var t3 = pemtohex(e2, "PRIVATE KEY");
            return this.getKeyFromPlainPrivatePKCS8Hex(t3);
          }, "getKeyFromPlainPrivatePKCS8PEM"), getKeyFromPlainPrivatePKCS8Hex: /* @__PURE__ */ __name(function getKeyFromPlainPrivatePKCS8Hex(e2) {
            var t3, r3 = this.parsePlainPrivatePKCS8Hex(e2);
            if (r3.algoid == "2a864886f70d010101")
              t3 = new RSAKey();
            else if (r3.algoid == "2a8648ce380401")
              t3 = new V.crypto.DSA();
            else {
              if (r3.algoid != "2a8648ce3d0201")
                throw "unsupported private key algorithm";
              t3 = new V.crypto.ECDSA();
            }
            return t3.readPKCS8PrvKeyHex(e2), t3;
          }, "getKeyFromPlainPrivatePKCS8Hex"), _getKeyFromPublicPKCS8Hex: /* @__PURE__ */ __name(function _getKeyFromPublicPKCS8Hex(e2) {
            var t3, r3 = J.getVbyList(e2, 0, [0, 0], "06");
            if (r3 === "2a864886f70d010101")
              t3 = new RSAKey();
            else if (r3 === "2a8648ce380401")
              t3 = new V.crypto.DSA();
            else {
              if (r3 !== "2a8648ce3d0201")
                throw "unsupported PKCS#8 public key hex";
              t3 = new V.crypto.ECDSA();
            }
            return t3.readPKCS8PubKeyHex(e2), t3;
          }, "_getKeyFromPublicPKCS8Hex"), parsePublicRawRSAKeyHex: /* @__PURE__ */ __name(function parsePublicRawRSAKeyHex(e2) {
            var t3 = J, r3 = t3.getChildIdx, n3 = t3.getV, i3 = {};
            if (e2.substr(0, 2) != "30")
              throw "malformed RSA key(code:001)";
            var o = r3(e2, 0);
            if (o.length != 2)
              throw "malformed RSA key(code:002)";
            if (e2.substr(o[0], 2) != "02")
              throw "malformed RSA key(code:003)";
            if (i3.n = n3(e2, o[0]), e2.substr(o[1], 2) != "02")
              throw "malformed RSA key(code:004)";
            return i3.e = n3(e2, o[1]), i3;
          }, "parsePublicRawRSAKeyHex"), parsePublicPKCS8Hex: /* @__PURE__ */ __name(function parsePublicPKCS8Hex(e2) {
            var t3 = J, r3 = t3.getChildIdx, n3 = t3.getV, i3 = {algparam: null}, o = r3(e2, 0);
            if (o.length != 2)
              throw "outer DERSequence shall have 2 elements: " + o.length;
            var s2 = o[0];
            if (e2.substr(s2, 2) != "30")
              throw "malformed PKCS8 public key(code:001)";
            var a = r3(e2, s2);
            if (a.length != 2)
              throw "malformed PKCS8 public key(code:002)";
            if (e2.substr(a[0], 2) != "06")
              throw "malformed PKCS8 public key(code:003)";
            if (i3.algoid = n3(e2, a[0]), e2.substr(a[1], 2) == "06" ? i3.algparam = n3(e2, a[1]) : e2.substr(a[1], 2) == "30" && (i3.algparam = {}, i3.algparam.p = t3.getVbyList(e2, a[1], [0], "02"), i3.algparam.q = t3.getVbyList(e2, a[1], [1], "02"), i3.algparam.g = t3.getVbyList(e2, a[1], [2], "02")), e2.substr(o[1], 2) != "03")
              throw "malformed PKCS8 public key(code:004)";
            return i3.key = n3(e2, o[1]).substr(2), i3;
          }, "parsePublicPKCS8Hex")};
        }();
        z.getKey = function(e2, t2, r2) {
          var n2 = (v2 = J).getChildIdx, i2 = (v2.getV, v2.getVbyList), o = V.crypto, s = o.ECDSA, a = o.DSA, u2 = RSAKey, c = pemtohex, h = z;
          if (u2 !== void 0 && e2 instanceof u2)
            return e2;
          if (s !== void 0 && e2 instanceof s)
            return e2;
          if (a !== void 0 && e2 instanceof a)
            return e2;
          if (e2.curve !== void 0 && e2.xy !== void 0 && e2.d === void 0)
            return new s({pub: e2.xy, curve: e2.curve});
          if (e2.curve !== void 0 && e2.d !== void 0)
            return new s({prv: e2.d, curve: e2.curve});
          if (e2.kty === void 0 && e2.n !== void 0 && e2.e !== void 0 && e2.d === void 0)
            return (k = new u2()).setPublic(e2.n, e2.e), k;
          if (e2.kty === void 0 && e2.n !== void 0 && e2.e !== void 0 && e2.d !== void 0 && e2.p !== void 0 && e2.q !== void 0 && e2.dp !== void 0 && e2.dq !== void 0 && e2.co !== void 0 && e2.qi === void 0)
            return (k = new u2()).setPrivateEx(e2.n, e2.e, e2.d, e2.p, e2.q, e2.dp, e2.dq, e2.co), k;
          if (e2.kty === void 0 && e2.n !== void 0 && e2.e !== void 0 && e2.d !== void 0 && e2.p === void 0)
            return (k = new u2()).setPrivate(e2.n, e2.e, e2.d), k;
          if (e2.p !== void 0 && e2.q !== void 0 && e2.g !== void 0 && e2.y !== void 0 && e2.x === void 0)
            return (k = new a()).setPublic(e2.p, e2.q, e2.g, e2.y), k;
          if (e2.p !== void 0 && e2.q !== void 0 && e2.g !== void 0 && e2.y !== void 0 && e2.x !== void 0)
            return (k = new a()).setPrivate(e2.p, e2.q, e2.g, e2.y, e2.x), k;
          if (e2.kty === "RSA" && e2.n !== void 0 && e2.e !== void 0 && e2.d === void 0)
            return (k = new u2()).setPublic(b64utohex(e2.n), b64utohex(e2.e)), k;
          if (e2.kty === "RSA" && e2.n !== void 0 && e2.e !== void 0 && e2.d !== void 0 && e2.p !== void 0 && e2.q !== void 0 && e2.dp !== void 0 && e2.dq !== void 0 && e2.qi !== void 0)
            return (k = new u2()).setPrivateEx(b64utohex(e2.n), b64utohex(e2.e), b64utohex(e2.d), b64utohex(e2.p), b64utohex(e2.q), b64utohex(e2.dp), b64utohex(e2.dq), b64utohex(e2.qi)), k;
          if (e2.kty === "RSA" && e2.n !== void 0 && e2.e !== void 0 && e2.d !== void 0)
            return (k = new u2()).setPrivate(b64utohex(e2.n), b64utohex(e2.e), b64utohex(e2.d)), k;
          if (e2.kty === "EC" && e2.crv !== void 0 && e2.x !== void 0 && e2.y !== void 0 && e2.d === void 0) {
            var l = (C2 = new s({curve: e2.crv})).ecparams.keylen / 4, f = "04" + ("0000000000" + b64utohex(e2.x)).slice(-l) + ("0000000000" + b64utohex(e2.y)).slice(-l);
            return C2.setPublicKeyHex(f), C2;
          }
          if (e2.kty === "EC" && e2.crv !== void 0 && e2.x !== void 0 && e2.y !== void 0 && e2.d !== void 0) {
            l = (C2 = new s({curve: e2.crv})).ecparams.keylen / 4, f = "04" + ("0000000000" + b64utohex(e2.x)).slice(-l) + ("0000000000" + b64utohex(e2.y)).slice(-l);
            var g = ("0000000000" + b64utohex(e2.d)).slice(-l);
            return C2.setPublicKeyHex(f), C2.setPrivateKeyHex(g), C2;
          }
          if (r2 === "pkcs5prv") {
            var p2, d = e2, v2 = J;
            if ((p2 = n2(d, 0)).length === 9)
              (k = new u2()).readPKCS5PrvKeyHex(d);
            else if (p2.length === 6)
              (k = new a()).readPKCS5PrvKeyHex(d);
            else {
              if (!(p2.length > 2 && d.substr(p2[1], 2) === "04"))
                throw "unsupported PKCS#1/5 hexadecimal key";
              (k = new s()).readPKCS5PrvKeyHex(d);
            }
            return k;
          }
          if (r2 === "pkcs8prv")
            return k = h.getKeyFromPlainPrivatePKCS8Hex(e2);
          if (r2 === "pkcs8pub")
            return h._getKeyFromPublicPKCS8Hex(e2);
          if (r2 === "x509pub")
            return X509.getPublicKeyFromCertHex(e2);
          if (e2.indexOf("-END CERTIFICATE-", 0) != -1 || e2.indexOf("-END X509 CERTIFICATE-", 0) != -1 || e2.indexOf("-END TRUSTED CERTIFICATE-", 0) != -1)
            return X509.getPublicKeyFromCertPEM(e2);
          if (e2.indexOf("-END PUBLIC KEY-") != -1) {
            var y2 = pemtohex(e2, "PUBLIC KEY");
            return h._getKeyFromPublicPKCS8Hex(y2);
          }
          if (e2.indexOf("-END RSA PRIVATE KEY-") != -1 && e2.indexOf("4,ENCRYPTED") == -1) {
            var m = c(e2, "RSA PRIVATE KEY");
            return h.getKey(m, null, "pkcs5prv");
          }
          if (e2.indexOf("-END DSA PRIVATE KEY-") != -1 && e2.indexOf("4,ENCRYPTED") == -1) {
            var _2 = i2(I2 = c(e2, "DSA PRIVATE KEY"), 0, [1], "02"), S2 = i2(I2, 0, [2], "02"), b = i2(I2, 0, [3], "02"), F2 = i2(I2, 0, [4], "02"), w2 = i2(I2, 0, [5], "02");
            return (k = new a()).setPrivate(new BigInteger(_2, 16), new BigInteger(S2, 16), new BigInteger(b, 16), new BigInteger(F2, 16), new BigInteger(w2, 16)), k;
          }
          if (e2.indexOf("-END PRIVATE KEY-") != -1)
            return h.getKeyFromPlainPrivatePKCS8PEM(e2);
          if (e2.indexOf("-END RSA PRIVATE KEY-") != -1 && e2.indexOf("4,ENCRYPTED") != -1) {
            var E2 = h.getDecryptedKeyHex(e2, t2), x = new RSAKey();
            return x.readPKCS5PrvKeyHex(E2), x;
          }
          if (e2.indexOf("-END EC PRIVATE KEY-") != -1 && e2.indexOf("4,ENCRYPTED") != -1) {
            var C2, k = i2(I2 = h.getDecryptedKeyHex(e2, t2), 0, [1], "04"), A = i2(I2, 0, [2, 0], "06"), P2 = i2(I2, 0, [3, 0], "03").substr(2);
            if (V.crypto.OID.oidhex2name[A] === void 0)
              throw "undefined OID(hex) in KJUR.crypto.OID: " + A;
            return (C2 = new s({curve: V.crypto.OID.oidhex2name[A]})).setPublicKeyHex(P2), C2.setPrivateKeyHex(k), C2.isPublic = false, C2;
          }
          if (e2.indexOf("-END DSA PRIVATE KEY-") != -1 && e2.indexOf("4,ENCRYPTED") != -1) {
            var I2;
            _2 = i2(I2 = h.getDecryptedKeyHex(e2, t2), 0, [1], "02"), S2 = i2(I2, 0, [2], "02"), b = i2(I2, 0, [3], "02"), F2 = i2(I2, 0, [4], "02"), w2 = i2(I2, 0, [5], "02");
            return (k = new a()).setPrivate(new BigInteger(_2, 16), new BigInteger(S2, 16), new BigInteger(b, 16), new BigInteger(F2, 16), new BigInteger(w2, 16)), k;
          }
          if (e2.indexOf("-END ENCRYPTED PRIVATE KEY-") != -1)
            return h.getKeyFromEncryptedPKCS8PEM(e2, t2);
          throw "not supported argument";
        }, z.generateKeypair = function(e2, t2) {
          if (e2 == "RSA") {
            var r2 = t2;
            (s = new RSAKey()).generate(r2, "10001"), s.isPrivate = true, s.isPublic = true;
            var n2 = new RSAKey(), i2 = s.n.toString(16), o = s.e.toString(16);
            return n2.setPublic(i2, o), n2.isPrivate = false, n2.isPublic = true, (a = {}).prvKeyObj = s, a.pubKeyObj = n2, a;
          }
          if (e2 == "EC") {
            var s, a, u2 = t2, c = new V.crypto.ECDSA({curve: u2}).generateKeyPairHex();
            return (s = new V.crypto.ECDSA({curve: u2})).setPublicKeyHex(c.ecpubhex), s.setPrivateKeyHex(c.ecprvhex), s.isPrivate = true, s.isPublic = false, (n2 = new V.crypto.ECDSA({curve: u2})).setPublicKeyHex(c.ecpubhex), n2.isPrivate = false, n2.isPublic = true, (a = {}).prvKeyObj = s, a.pubKeyObj = n2, a;
          }
          throw "unknown algorithm: " + e2;
        }, z.getPEM = function(e2, t2, r2, n2, i2, s) {
          var a = V, u2 = a.asn1, c = u2.DERObjectIdentifier, h = u2.DERInteger, l = u2.ASN1Util.newObject, f = u2.x509.SubjectPublicKeyInfo, g = a.crypto, p2 = g.DSA, d = g.ECDSA, v2 = RSAKey;
          function A(e3) {
            return l({seq: [{int: 0}, {int: {bigint: e3.n}}, {int: e3.e}, {int: {bigint: e3.d}}, {int: {bigint: e3.p}}, {int: {bigint: e3.q}}, {int: {bigint: e3.dmp1}}, {int: {bigint: e3.dmq1}}, {int: {bigint: e3.coeff}}]});
          }
          __name(A, "A");
          function B(e3) {
            return l({seq: [{int: 1}, {octstr: {hex: e3.prvKeyHex}}, {tag: ["a0", true, {oid: {name: e3.curveName}}]}, {tag: ["a1", true, {bitstr: {hex: "00" + e3.pubKeyHex}}]}]});
          }
          __name(B, "B");
          function x(e3) {
            return l({seq: [{int: 0}, {int: {bigint: e3.p}}, {int: {bigint: e3.q}}, {int: {bigint: e3.g}}, {int: {bigint: e3.y}}, {int: {bigint: e3.x}}]});
          }
          __name(x, "x");
          if ((v2 !== void 0 && e2 instanceof v2 || p2 !== void 0 && e2 instanceof p2 || d !== void 0 && e2 instanceof d) && e2.isPublic == 1 && (t2 === void 0 || t2 == "PKCS8PUB"))
            return hextopem(b = new f(e2).getEncodedHex(), "PUBLIC KEY");
          if (t2 == "PKCS1PRV" && v2 !== void 0 && e2 instanceof v2 && (r2 === void 0 || r2 == null) && e2.isPrivate == 1)
            return hextopem(b = A(e2).getEncodedHex(), "RSA PRIVATE KEY");
          if (t2 == "PKCS1PRV" && d !== void 0 && e2 instanceof d && (r2 === void 0 || r2 == null) && e2.isPrivate == 1) {
            var m = new c({name: e2.curveName}).getEncodedHex(), _2 = B(e2).getEncodedHex(), S2 = "";
            return S2 += hextopem(m, "EC PARAMETERS"), S2 += hextopem(_2, "EC PRIVATE KEY");
          }
          if (t2 == "PKCS1PRV" && p2 !== void 0 && e2 instanceof p2 && (r2 === void 0 || r2 == null) && e2.isPrivate == 1)
            return hextopem(b = x(e2).getEncodedHex(), "DSA PRIVATE KEY");
          if (t2 == "PKCS5PRV" && v2 !== void 0 && e2 instanceof v2 && r2 !== void 0 && r2 != null && e2.isPrivate == 1) {
            var b = A(e2).getEncodedHex();
            return n2 === void 0 && (n2 = "DES-EDE3-CBC"), this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA", b, r2, n2, s);
          }
          if (t2 == "PKCS5PRV" && d !== void 0 && e2 instanceof d && r2 !== void 0 && r2 != null && e2.isPrivate == 1) {
            b = B(e2).getEncodedHex();
            return n2 === void 0 && (n2 = "DES-EDE3-CBC"), this.getEncryptedPKCS5PEMFromPrvKeyHex("EC", b, r2, n2, s);
          }
          if (t2 == "PKCS5PRV" && p2 !== void 0 && e2 instanceof p2 && r2 !== void 0 && r2 != null && e2.isPrivate == 1) {
            b = x(e2).getEncodedHex();
            return n2 === void 0 && (n2 = "DES-EDE3-CBC"), this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA", b, r2, n2, s);
          }
          var F2 = /* @__PURE__ */ __name(function o(e3, t3) {
            var r3 = w2(e3, t3);
            return new l({seq: [{seq: [{oid: {name: "pkcs5PBES2"}}, {seq: [{seq: [{oid: {name: "pkcs5PBKDF2"}}, {seq: [{octstr: {hex: r3.pbkdf2Salt}}, {int: r3.pbkdf2Iter}]}]}, {seq: [{oid: {name: "des-EDE3-CBC"}}, {octstr: {hex: r3.encryptionSchemeIV}}]}]}]}, {octstr: {hex: r3.ciphertext}}]}).getEncodedHex();
          }, "o"), w2 = /* @__PURE__ */ __name(function c2(e3, t3) {
            var r3 = y.lib.WordArray.random(8), n3 = y.lib.WordArray.random(8), i3 = y.PBKDF2(t3, r3, {keySize: 6, iterations: 100}), o = y.enc.Hex.parse(e3), s2 = y.TripleDES.encrypt(o, i3, {iv: n3}) + "", a2 = {};
            return a2.ciphertext = s2, a2.pbkdf2Salt = y.enc.Hex.stringify(r3), a2.pbkdf2Iter = 100, a2.encryptionSchemeAlg = "DES-EDE3-CBC", a2.encryptionSchemeIV = y.enc.Hex.stringify(n3), a2;
          }, "c");
          if (t2 == "PKCS8PRV" && v2 != void 0 && e2 instanceof v2 && e2.isPrivate == 1) {
            var E2 = A(e2).getEncodedHex();
            b = l({seq: [{int: 0}, {seq: [{oid: {name: "rsaEncryption"}}, {null: true}]}, {octstr: {hex: E2}}]}).getEncodedHex();
            return r2 === void 0 || r2 == null ? hextopem(b, "PRIVATE KEY") : hextopem(_2 = F2(b, r2), "ENCRYPTED PRIVATE KEY");
          }
          if (t2 == "PKCS8PRV" && d !== void 0 && e2 instanceof d && e2.isPrivate == 1) {
            E2 = new l({seq: [{int: 1}, {octstr: {hex: e2.prvKeyHex}}, {tag: ["a1", true, {bitstr: {hex: "00" + e2.pubKeyHex}}]}]}).getEncodedHex(), b = l({seq: [{int: 0}, {seq: [{oid: {name: "ecPublicKey"}}, {oid: {name: e2.curveName}}]}, {octstr: {hex: E2}}]}).getEncodedHex();
            return r2 === void 0 || r2 == null ? hextopem(b, "PRIVATE KEY") : hextopem(_2 = F2(b, r2), "ENCRYPTED PRIVATE KEY");
          }
          if (t2 == "PKCS8PRV" && p2 !== void 0 && e2 instanceof p2 && e2.isPrivate == 1) {
            E2 = new h({bigint: e2.x}).getEncodedHex(), b = l({seq: [{int: 0}, {seq: [{oid: {name: "dsa"}}, {seq: [{int: {bigint: e2.p}}, {int: {bigint: e2.q}}, {int: {bigint: e2.g}}]}]}, {octstr: {hex: E2}}]}).getEncodedHex();
            return r2 === void 0 || r2 == null ? hextopem(b, "PRIVATE KEY") : hextopem(_2 = F2(b, r2), "ENCRYPTED PRIVATE KEY");
          }
          throw "unsupported object nor format";
        }, z.getKeyFromCSRPEM = function(e2) {
          var t2 = pemtohex(e2, "CERTIFICATE REQUEST");
          return z.getKeyFromCSRHex(t2);
        }, z.getKeyFromCSRHex = function(e2) {
          var t2 = z.parseCSRHex(e2);
          return z.getKey(t2.p8pubkeyhex, null, "pkcs8pub");
        }, z.parseCSRHex = function(e2) {
          var t2 = J, r2 = t2.getChildIdx, n2 = t2.getTLV, i2 = {}, o = e2;
          if (o.substr(0, 2) != "30")
            throw "malformed CSR(code:001)";
          var s = r2(o, 0);
          if (s.length < 1)
            throw "malformed CSR(code:002)";
          if (o.substr(s[0], 2) != "30")
            throw "malformed CSR(code:003)";
          var a = r2(o, s[0]);
          if (a.length < 3)
            throw "malformed CSR(code:004)";
          return i2.p8pubkeyhex = n2(o, a[2]), i2;
        }, z.getJWKFromKey = function(e2) {
          var t2 = {};
          if (e2 instanceof RSAKey && e2.isPrivate)
            return t2.kty = "RSA", t2.n = hextob64u(e2.n.toString(16)), t2.e = hextob64u(e2.e.toString(16)), t2.d = hextob64u(e2.d.toString(16)), t2.p = hextob64u(e2.p.toString(16)), t2.q = hextob64u(e2.q.toString(16)), t2.dp = hextob64u(e2.dmp1.toString(16)), t2.dq = hextob64u(e2.dmq1.toString(16)), t2.qi = hextob64u(e2.coeff.toString(16)), t2;
          if (e2 instanceof RSAKey && e2.isPublic)
            return t2.kty = "RSA", t2.n = hextob64u(e2.n.toString(16)), t2.e = hextob64u(e2.e.toString(16)), t2;
          if (e2 instanceof V.crypto.ECDSA && e2.isPrivate) {
            if ((n2 = e2.getShortNISTPCurveName()) !== "P-256" && n2 !== "P-384")
              throw "unsupported curve name for JWT: " + n2;
            var r2 = e2.getPublicKeyXYHex();
            return t2.kty = "EC", t2.crv = n2, t2.x = hextob64u(r2.x), t2.y = hextob64u(r2.y), t2.d = hextob64u(e2.prvKeyHex), t2;
          }
          if (e2 instanceof V.crypto.ECDSA && e2.isPublic) {
            var n2;
            if ((n2 = e2.getShortNISTPCurveName()) !== "P-256" && n2 !== "P-384")
              throw "unsupported curve name for JWT: " + n2;
            r2 = e2.getPublicKeyXYHex();
            return t2.kty = "EC", t2.crv = n2, t2.x = hextob64u(r2.x), t2.y = hextob64u(r2.y), t2;
          }
          throw "not supported key object";
        }, RSAKey.getPosArrayOfChildrenFromHex = function(e2) {
          return J.getChildIdx(e2, 0);
        }, RSAKey.getHexValueArrayOfChildrenFromHex = function(e2) {
          var t2, r2 = J.getV, n2 = r2(e2, (t2 = RSAKey.getPosArrayOfChildrenFromHex(e2))[0]), i2 = r2(e2, t2[1]), o = r2(e2, t2[2]), s = r2(e2, t2[3]), a = r2(e2, t2[4]), u2 = r2(e2, t2[5]), c = r2(e2, t2[6]), h = r2(e2, t2[7]), l = r2(e2, t2[8]);
          return (t2 = new Array()).push(n2, i2, o, s, a, u2, c, h, l), t2;
        }, RSAKey.prototype.readPrivateKeyFromPEMString = function(e2) {
          var t2 = pemtohex(e2), r2 = RSAKey.getHexValueArrayOfChildrenFromHex(t2);
          this.setPrivateEx(r2[1], r2[2], r2[3], r2[4], r2[5], r2[6], r2[7], r2[8]);
        }, RSAKey.prototype.readPKCS5PrvKeyHex = function(e2) {
          var t2 = RSAKey.getHexValueArrayOfChildrenFromHex(e2);
          this.setPrivateEx(t2[1], t2[2], t2[3], t2[4], t2[5], t2[6], t2[7], t2[8]);
        }, RSAKey.prototype.readPKCS8PrvKeyHex = function(e2) {
          var t2, r2, n2, i2, o, s, a, u2, c = J, h = c.getVbyList;
          if (c.isASN1HEX(e2) === false)
            throw "not ASN.1 hex string";
          try {
            t2 = h(e2, 0, [2, 0, 1], "02"), r2 = h(e2, 0, [2, 0, 2], "02"), n2 = h(e2, 0, [2, 0, 3], "02"), i2 = h(e2, 0, [2, 0, 4], "02"), o = h(e2, 0, [2, 0, 5], "02"), s = h(e2, 0, [2, 0, 6], "02"), a = h(e2, 0, [2, 0, 7], "02"), u2 = h(e2, 0, [2, 0, 8], "02");
          } catch (e3) {
            throw "malformed PKCS#8 plain RSA private key";
          }
          this.setPrivateEx(t2, r2, n2, i2, o, s, a, u2);
        }, RSAKey.prototype.readPKCS5PubKeyHex = function(e2) {
          var t2 = J, r2 = t2.getV;
          if (t2.isASN1HEX(e2) === false)
            throw "keyHex is not ASN.1 hex string";
          var n2 = t2.getChildIdx(e2, 0);
          if (n2.length !== 2 || e2.substr(n2[0], 2) !== "02" || e2.substr(n2[1], 2) !== "02")
            throw "wrong hex for PKCS#5 public key";
          var i2 = r2(e2, n2[0]), o = r2(e2, n2[1]);
          this.setPublic(i2, o);
        }, RSAKey.prototype.readPKCS8PubKeyHex = function(e2) {
          var t2 = J;
          if (t2.isASN1HEX(e2) === false)
            throw "not ASN.1 hex string";
          if (t2.getTLVbyList(e2, 0, [0, 0]) !== "06092a864886f70d010101")
            throw "not PKCS8 RSA public key";
          var r2 = t2.getTLVbyList(e2, 0, [1, 0]);
          this.readPKCS5PubKeyHex(r2);
        }, RSAKey.prototype.readCertPubKeyHex = function(e2, t2) {
          var r2, n2;
          (r2 = new X509()).readCertHex(e2), n2 = r2.getPublicKeyHex(), this.readPKCS8PubKeyHex(n2);
        };
        var Y = new RegExp("");
        function _zeroPaddingOfSignature(e2, t2) {
          for (var r2 = "", n2 = t2 / 4 - e2.length, i2 = 0; i2 < n2; i2++)
            r2 += "0";
          return r2 + e2;
        }
        __name(_zeroPaddingOfSignature, "_zeroPaddingOfSignature");
        function pss_mgf1_str(e2, t2, r2) {
          for (var n2 = "", i2 = 0; n2.length < t2; )
            n2 += hextorstr(r2(rstrtohex(e2 + String.fromCharCode.apply(String, [(4278190080 & i2) >> 24, (16711680 & i2) >> 16, (65280 & i2) >> 8, 255 & i2])))), i2 += 1;
          return n2;
        }
        __name(pss_mgf1_str, "pss_mgf1_str");
        function _rsasign_getAlgNameAndHashFromHexDisgestInfo(e2) {
          for (var t2 in V.crypto.Util.DIGESTINFOHEAD) {
            var r2 = V.crypto.Util.DIGESTINFOHEAD[t2], n2 = r2.length;
            if (e2.substring(0, n2) == r2)
              return [t2, e2.substring(n2)];
          }
          return [];
        }
        __name(_rsasign_getAlgNameAndHashFromHexDisgestInfo, "_rsasign_getAlgNameAndHashFromHexDisgestInfo");
        function X509() {
          var e2 = J, t2 = e2.getChildIdx, r2 = e2.getV, n2 = e2.getTLV, i2 = e2.getVbyList, o = e2.getTLVbyList, s = e2.getIdxbyList, a = e2.getVidx, u2 = e2.oidname, c = X509, h = pemtohex;
          this.hex = null, this.version = 0, this.foffset = 0, this.aExtInfo = null, this.getVersion = function() {
            return this.hex === null || this.version !== 0 ? this.version : o(this.hex, 0, [0, 0]) !== "a003020102" ? (this.version = 1, this.foffset = -1, 1) : (this.version = 3, 3);
          }, this.getSerialNumberHex = function() {
            return i2(this.hex, 0, [0, 1 + this.foffset], "02");
          }, this.getSignatureAlgorithmField = function() {
            return u2(i2(this.hex, 0, [0, 2 + this.foffset, 0], "06"));
          }, this.getIssuerHex = function() {
            return o(this.hex, 0, [0, 3 + this.foffset], "30");
          }, this.getIssuerString = function() {
            return c.hex2dn(this.getIssuerHex());
          }, this.getSubjectHex = function() {
            return o(this.hex, 0, [0, 5 + this.foffset], "30");
          }, this.getSubjectString = function() {
            return c.hex2dn(this.getSubjectHex());
          }, this.getNotBefore = function() {
            var e3 = i2(this.hex, 0, [0, 4 + this.foffset, 0]);
            return e3 = e3.replace(/(..)/g, "%$1"), e3 = decodeURIComponent(e3);
          }, this.getNotAfter = function() {
            var e3 = i2(this.hex, 0, [0, 4 + this.foffset, 1]);
            return e3 = e3.replace(/(..)/g, "%$1"), e3 = decodeURIComponent(e3);
          }, this.getPublicKeyHex = function() {
            return e2.getTLVbyList(this.hex, 0, [0, 6 + this.foffset], "30");
          }, this.getPublicKeyIdx = function() {
            return s(this.hex, 0, [0, 6 + this.foffset], "30");
          }, this.getPublicKeyContentIdx = function() {
            var e3 = this.getPublicKeyIdx();
            return s(this.hex, e3, [1, 0], "30");
          }, this.getPublicKey = function() {
            return z.getKey(this.getPublicKeyHex(), null, "pkcs8pub");
          }, this.getSignatureAlgorithmName = function() {
            return u2(i2(this.hex, 0, [1, 0], "06"));
          }, this.getSignatureValueHex = function() {
            return i2(this.hex, 0, [2], "03", true);
          }, this.verifySignature = function(e3) {
            var t3 = this.getSignatureAlgorithmName(), r3 = this.getSignatureValueHex(), n3 = o(this.hex, 0, [0], "30"), i3 = new V.crypto.Signature({alg: t3});
            return i3.init(e3), i3.updateHex(n3), i3.verify(r3);
          }, this.parseExt = function() {
            if (this.version !== 3)
              return -1;
            var r3 = s(this.hex, 0, [0, 7, 0], "30"), n3 = t2(this.hex, r3);
            this.aExtInfo = new Array();
            for (var o2 = 0; o2 < n3.length; o2++) {
              var u3 = {critical: false}, c2 = 0;
              t2(this.hex, n3[o2]).length === 3 && (u3.critical = true, c2 = 1), u3.oid = e2.hextooidstr(i2(this.hex, n3[o2], [0], "06"));
              var h2 = s(this.hex, n3[o2], [1 + c2]);
              u3.vidx = a(this.hex, h2), this.aExtInfo.push(u3);
            }
          }, this.getExtInfo = function(e3) {
            var t3 = this.aExtInfo, r3 = e3;
            if (e3.match(/^[0-9.]+$/) || (r3 = V.asn1.x509.OID.name2oid(e3)), r3 !== "") {
              for (var n3 = 0; n3 < t3.length; n3++)
                if (t3[n3].oid === r3)
                  return t3[n3];
            }
          }, this.getExtBasicConstraints = function() {
            var e3 = this.getExtInfo("basicConstraints");
            if (e3 === void 0)
              return e3;
            var t3 = r2(this.hex, e3.vidx);
            if (t3 === "")
              return {};
            if (t3 === "0101ff")
              return {cA: true};
            if (t3.substr(0, 8) === "0101ff02") {
              var n3 = r2(t3, 6);
              return {cA: true, pathLen: parseInt(n3, 16)};
            }
            throw "basicConstraints parse error";
          }, this.getExtKeyUsageBin = function() {
            var e3 = this.getExtInfo("keyUsage");
            if (e3 === void 0)
              return "";
            var t3 = r2(this.hex, e3.vidx);
            if (t3.length % 2 != 0 || t3.length <= 2)
              throw "malformed key usage value";
            var n3 = parseInt(t3.substr(0, 2)), i3 = parseInt(t3.substr(2), 16).toString(2);
            return i3.substr(0, i3.length - n3);
          }, this.getExtKeyUsageString = function() {
            for (var e3 = this.getExtKeyUsageBin(), t3 = new Array(), r3 = 0; r3 < e3.length; r3++)
              e3.substr(r3, 1) == "1" && t3.push(X509.KEYUSAGE_NAME[r3]);
            return t3.join(",");
          }, this.getExtSubjectKeyIdentifier = function() {
            var e3 = this.getExtInfo("subjectKeyIdentifier");
            return e3 === void 0 ? e3 : r2(this.hex, e3.vidx);
          }, this.getExtAuthorityKeyIdentifier = function() {
            var e3 = this.getExtInfo("authorityKeyIdentifier");
            if (e3 === void 0)
              return e3;
            for (var i3 = {}, o2 = n2(this.hex, e3.vidx), s2 = t2(o2, 0), a2 = 0; a2 < s2.length; a2++)
              o2.substr(s2[a2], 2) === "80" && (i3.kid = r2(o2, s2[a2]));
            return i3;
          }, this.getExtExtKeyUsageName = function() {
            var e3 = this.getExtInfo("extKeyUsage");
            if (e3 === void 0)
              return e3;
            var i3 = new Array(), o2 = n2(this.hex, e3.vidx);
            if (o2 === "")
              return i3;
            for (var s2 = t2(o2, 0), a2 = 0; a2 < s2.length; a2++)
              i3.push(u2(r2(o2, s2[a2])));
            return i3;
          }, this.getExtSubjectAltName = function() {
            for (var e3 = this.getExtSubjectAltName2(), t3 = new Array(), r3 = 0; r3 < e3.length; r3++)
              e3[r3][0] === "DNS" && t3.push(e3[r3][1]);
            return t3;
          }, this.getExtSubjectAltName2 = function() {
            var e3, i3, o2, s2 = this.getExtInfo("subjectAltName");
            if (s2 === void 0)
              return s2;
            for (var a2 = new Array(), u3 = n2(this.hex, s2.vidx), c2 = t2(u3, 0), h2 = 0; h2 < c2.length; h2++)
              o2 = u3.substr(c2[h2], 2), e3 = r2(u3, c2[h2]), o2 === "81" && (i3 = hextoutf8(e3), a2.push(["MAIL", i3])), o2 === "82" && (i3 = hextoutf8(e3), a2.push(["DNS", i3])), o2 === "84" && (i3 = X509.hex2dn(e3, 0), a2.push(["DN", i3])), o2 === "86" && (i3 = hextoutf8(e3), a2.push(["URI", i3])), o2 === "87" && (i3 = hextoip(e3), a2.push(["IP", i3]));
            return a2;
          }, this.getExtCRLDistributionPointsURI = function() {
            var e3 = this.getExtInfo("cRLDistributionPoints");
            if (e3 === void 0)
              return e3;
            for (var r3 = new Array(), n3 = t2(this.hex, e3.vidx), o2 = 0; o2 < n3.length; o2++)
              try {
                var s2 = hextoutf8(i2(this.hex, n3[o2], [0, 0, 0], "86"));
                r3.push(s2);
              } catch (e4) {
              }
            return r3;
          }, this.getExtAIAInfo = function() {
            var e3 = this.getExtInfo("authorityInfoAccess");
            if (e3 === void 0)
              return e3;
            for (var r3 = {ocsp: [], caissuer: []}, n3 = t2(this.hex, e3.vidx), o2 = 0; o2 < n3.length; o2++) {
              var s2 = i2(this.hex, n3[o2], [0], "06"), a2 = i2(this.hex, n3[o2], [1], "86");
              s2 === "2b06010505073001" && r3.ocsp.push(hextoutf8(a2)), s2 === "2b06010505073002" && r3.caissuer.push(hextoutf8(a2));
            }
            return r3;
          }, this.getExtCertificatePolicies = function() {
            var e3 = this.getExtInfo("certificatePolicies");
            if (e3 === void 0)
              return e3;
            for (var o2 = n2(this.hex, e3.vidx), s2 = [], a2 = t2(o2, 0), c2 = 0; c2 < a2.length; c2++) {
              var h2 = {}, l = t2(o2, a2[c2]);
              if (h2.id = u2(r2(o2, l[0])), l.length === 2)
                for (var f = t2(o2, l[1]), g = 0; g < f.length; g++) {
                  var p2 = i2(o2, f[g], [0], "06");
                  p2 === "2b06010505070201" ? h2.cps = hextoutf8(i2(o2, f[g], [1])) : p2 === "2b06010505070202" && (h2.unotice = hextoutf8(i2(o2, f[g], [1, 0])));
                }
              s2.push(h2);
            }
            return s2;
          }, this.readCertPEM = function(e3) {
            this.readCertHex(h(e3));
          }, this.readCertHex = function(e3) {
            this.hex = e3, this.getVersion();
            try {
              s(this.hex, 0, [0, 7], "a3"), this.parseExt();
            } catch (e4) {
            }
          }, this.getInfo = function() {
            var e3, t3, r3;
            if (e3 = "Basic Fields\n", e3 += "  serial number: " + this.getSerialNumberHex() + "\n", e3 += "  signature algorithm: " + this.getSignatureAlgorithmField() + "\n", e3 += "  issuer: " + this.getIssuerString() + "\n", e3 += "  notBefore: " + this.getNotBefore() + "\n", e3 += "  notAfter: " + this.getNotAfter() + "\n", e3 += "  subject: " + this.getSubjectString() + "\n", e3 += "  subject public key info: \n", e3 += "    key algorithm: " + (t3 = this.getPublicKey()).type + "\n", t3.type === "RSA" && (e3 += "    n=" + hextoposhex(t3.n.toString(16)).substr(0, 16) + "...\n", e3 += "    e=" + hextoposhex(t3.e.toString(16)) + "\n"), (r3 = this.aExtInfo) !== void 0 && r3 !== null) {
              e3 += "X509v3 Extensions:\n";
              for (var n3 = 0; n3 < r3.length; n3++) {
                var i3 = r3[n3], o2 = V.asn1.x509.OID.oid2name(i3.oid);
                o2 === "" && (o2 = i3.oid);
                var s2 = "";
                if (i3.critical === true && (s2 = "CRITICAL"), e3 += "  " + o2 + " " + s2 + ":\n", o2 === "basicConstraints") {
                  var a2 = this.getExtBasicConstraints();
                  a2.cA === void 0 ? e3 += "    {}\n" : (e3 += "    cA=true", a2.pathLen !== void 0 && (e3 += ", pathLen=" + a2.pathLen), e3 += "\n");
                } else if (o2 === "keyUsage")
                  e3 += "    " + this.getExtKeyUsageString() + "\n";
                else if (o2 === "subjectKeyIdentifier")
                  e3 += "    " + this.getExtSubjectKeyIdentifier() + "\n";
                else if (o2 === "authorityKeyIdentifier") {
                  var u3 = this.getExtAuthorityKeyIdentifier();
                  u3.kid !== void 0 && (e3 += "    kid=" + u3.kid + "\n");
                } else {
                  if (o2 === "extKeyUsage")
                    e3 += "    " + this.getExtExtKeyUsageName().join(", ") + "\n";
                  else if (o2 === "subjectAltName")
                    e3 += "    " + this.getExtSubjectAltName2() + "\n";
                  else if (o2 === "cRLDistributionPoints")
                    e3 += "    " + this.getExtCRLDistributionPointsURI() + "\n";
                  else if (o2 === "authorityInfoAccess") {
                    var c2 = this.getExtAIAInfo();
                    c2.ocsp !== void 0 && (e3 += "    ocsp: " + c2.ocsp.join(",") + "\n"), c2.caissuer !== void 0 && (e3 += "    caissuer: " + c2.caissuer.join(",") + "\n");
                  } else if (o2 === "certificatePolicies")
                    for (var h2 = this.getExtCertificatePolicies(), l = 0; l < h2.length; l++)
                      h2[l].id !== void 0 && (e3 += "    policy oid: " + h2[l].id + "\n"), h2[l].cps !== void 0 && (e3 += "    cps: " + h2[l].cps + "\n");
                }
              }
            }
            return e3 += "signature algorithm: " + this.getSignatureAlgorithmName() + "\n", e3 += "signature: " + this.getSignatureValueHex().substr(0, 16) + "...\n";
          };
        }
        __name(X509, "X509");
        Y.compile("[^0-9a-f]", "gi"), RSAKey.prototype.sign = function(e2, t2) {
          var r2 = (/* @__PURE__ */ __name(function b(e3) {
            return V.crypto.Util.hashString(e3, t2);
          }, "b"))(e2);
          return this.signWithMessageHash(r2, t2);
        }, RSAKey.prototype.signWithMessageHash = function(e2, t2) {
          var r2 = parseBigInt(V.crypto.Util.getPaddedDigestInfoHex(e2, t2, this.n.bitLength()), 16);
          return _zeroPaddingOfSignature(this.doPrivate(r2).toString(16), this.n.bitLength());
        }, RSAKey.prototype.signPSS = function(e2, t2, r2) {
          var n2 = (/* @__PURE__ */ __name(function c(e3) {
            return V.crypto.Util.hashHex(e3, t2);
          }, "c"))(rstrtohex(e2));
          return r2 === void 0 && (r2 = -1), this.signWithMessageHashPSS(n2, t2, r2);
        }, RSAKey.prototype.signWithMessageHashPSS = function(e2, t2, r2) {
          var n2, i2 = hextorstr(e2), s = i2.length, a = this.n.bitLength() - 1, u2 = Math.ceil(a / 8), c = /* @__PURE__ */ __name(function o(e3) {
            return V.crypto.Util.hashHex(e3, t2);
          }, "o");
          if (r2 === -1 || r2 === void 0)
            r2 = s;
          else if (r2 === -2)
            r2 = u2 - s - 2;
          else if (r2 < -2)
            throw "invalid salt length";
          if (u2 < s + r2 + 2)
            throw "data too long";
          var h = "";
          r2 > 0 && (h = new Array(r2), new SecureRandom().nextBytes(h), h = String.fromCharCode.apply(String, h));
          var l = hextorstr(c(rstrtohex("\0\0\0\0\0\0\0\0" + i2 + h))), f = [];
          for (n2 = 0; n2 < u2 - r2 - s - 2; n2 += 1)
            f[n2] = 0;
          var g = String.fromCharCode.apply(String, f) + "" + h, p2 = pss_mgf1_str(l, g.length, c), d = [];
          for (n2 = 0; n2 < g.length; n2 += 1)
            d[n2] = g.charCodeAt(n2) ^ p2.charCodeAt(n2);
          var v2 = 65280 >> 8 * u2 - a & 255;
          for (d[0] &= ~v2, n2 = 0; n2 < s; n2++)
            d.push(l.charCodeAt(n2));
          return d.push(188), _zeroPaddingOfSignature(this.doPrivate(new BigInteger(d)).toString(16), this.n.bitLength());
        }, RSAKey.prototype.verify = function(e2, t2) {
          var r2 = parseBigInt(t2 = (t2 = t2.replace(Y, "")).replace(/[ \n]+/g, ""), 16);
          if (r2.bitLength() > this.n.bitLength())
            return 0;
          var n2 = _rsasign_getAlgNameAndHashFromHexDisgestInfo(this.doPublic(r2).toString(16).replace(/^1f+00/, ""));
          if (n2.length == 0)
            return false;
          var i2 = n2[0];
          return n2[1] == (/* @__PURE__ */ __name(function a(e3) {
            return V.crypto.Util.hashString(e3, i2);
          }, "a"))(e2);
        }, RSAKey.prototype.verifyWithMessageHash = function(e2, t2) {
          var r2 = parseBigInt(t2 = (t2 = t2.replace(Y, "")).replace(/[ \n]+/g, ""), 16);
          if (r2.bitLength() > this.n.bitLength())
            return 0;
          var n2 = _rsasign_getAlgNameAndHashFromHexDisgestInfo(this.doPublic(r2).toString(16).replace(/^1f+00/, ""));
          if (n2.length == 0)
            return false;
          n2[0];
          return n2[1] == e2;
        }, RSAKey.prototype.verifyPSS = function(t2, r2, n2, i2) {
          var o = (/* @__PURE__ */ __name(function e2(t3) {
            return V.crypto.Util.hashHex(t3, n2);
          }, "e"))(rstrtohex(t2));
          return i2 === void 0 && (i2 = -1), this.verifyWithMessageHashPSS(o, r2, n2, i2);
        }, RSAKey.prototype.verifyWithMessageHashPSS = function(e2, t2, n2, i2) {
          var o = new BigInteger(t2, 16);
          if (o.bitLength() > this.n.bitLength())
            return false;
          var s, a = /* @__PURE__ */ __name(function r2(e3) {
            return V.crypto.Util.hashHex(e3, n2);
          }, "r"), u2 = hextorstr(e2), c = u2.length, h = this.n.bitLength() - 1, l = Math.ceil(h / 8);
          if (i2 === -1 || i2 === void 0)
            i2 = c;
          else if (i2 === -2)
            i2 = l - c - 2;
          else if (i2 < -2)
            throw "invalid salt length";
          if (l < c + i2 + 2)
            throw "data too long";
          var f = this.doPublic(o).toByteArray();
          for (s = 0; s < f.length; s += 1)
            f[s] &= 255;
          for (; f.length < l; )
            f.unshift(0);
          if (f[l - 1] !== 188)
            throw "encoded message does not end in 0xbc";
          var g = (f = String.fromCharCode.apply(String, f)).substr(0, l - c - 1), p2 = f.substr(g.length, c), d = 65280 >> 8 * l - h & 255;
          if ((g.charCodeAt(0) & d) != 0)
            throw "bits beyond keysize not zero";
          var v2 = pss_mgf1_str(p2, g.length, a), y2 = [];
          for (s = 0; s < g.length; s += 1)
            y2[s] = g.charCodeAt(s) ^ v2.charCodeAt(s);
          y2[0] &= ~d;
          var m = l - c - i2 - 2;
          for (s = 0; s < m; s += 1)
            if (y2[s] !== 0)
              throw "leftmost octets not zero";
          if (y2[m] !== 1)
            throw "0x01 marker not found";
          return p2 === hextorstr(a(rstrtohex("\0\0\0\0\0\0\0\0" + u2 + String.fromCharCode.apply(String, y2.slice(-i2)))));
        }, RSAKey.SALT_LEN_HLEN = -1, RSAKey.SALT_LEN_MAX = -2, RSAKey.SALT_LEN_RECOVER = -2, X509.hex2dn = function(e2, t2) {
          if (t2 === void 0 && (t2 = 0), e2.substr(t2, 2) !== "30")
            throw "malformed DN";
          for (var r2 = new Array(), n2 = J.getChildIdx(e2, t2), i2 = 0; i2 < n2.length; i2++)
            r2.push(X509.hex2rdn(e2, n2[i2]));
          return "/" + (r2 = r2.map(function(e3) {
            return e3.replace("/", "\\/");
          })).join("/");
        }, X509.hex2rdn = function(e2, t2) {
          if (t2 === void 0 && (t2 = 0), e2.substr(t2, 2) !== "31")
            throw "malformed RDN";
          for (var r2 = new Array(), n2 = J.getChildIdx(e2, t2), i2 = 0; i2 < n2.length; i2++)
            r2.push(X509.hex2attrTypeValue(e2, n2[i2]));
          return (r2 = r2.map(function(e3) {
            return e3.replace("+", "\\+");
          })).join("+");
        }, X509.hex2attrTypeValue = function(e2, t2) {
          var r2 = J, n2 = r2.getV;
          if (t2 === void 0 && (t2 = 0), e2.substr(t2, 2) !== "30")
            throw "malformed attribute type and value";
          var i2 = r2.getChildIdx(e2, t2);
          i2.length !== 2 || e2.substr(i2[0], 2);
          var o = n2(e2, i2[0]), s = V.asn1.ASN1Util.oidHexToInt(o);
          return V.asn1.x509.OID.oid2atype(s) + "=" + hextorstr(n2(e2, i2[1]));
        }, X509.getPublicKeyFromCertHex = function(e2) {
          var t2 = new X509();
          return t2.readCertHex(e2), t2.getPublicKey();
        }, X509.getPublicKeyFromCertPEM = function(e2) {
          var t2 = new X509();
          return t2.readCertPEM(e2), t2.getPublicKey();
        }, X509.getPublicKeyInfoPropOfCertPEM = function(e2) {
          var t2, r2, n2 = J.getVbyList, i2 = {};
          return i2.algparam = null, (t2 = new X509()).readCertPEM(e2), r2 = t2.getPublicKeyHex(), i2.keyhex = n2(r2, 0, [1], "03").substr(2), i2.algoid = n2(r2, 0, [0, 0], "06"), i2.algoid === "2a8648ce3d0201" && (i2.algparam = n2(r2, 0, [0, 1], "06")), i2;
        }, X509.KEYUSAGE_NAME = ["digitalSignature", "nonRepudiation", "keyEncipherment", "dataEncipherment", "keyAgreement", "keyCertSign", "cRLSign", "encipherOnly", "decipherOnly"], V !== void 0 && V || (V = {}), V.jws !== void 0 && V.jws || (V.jws = {}), V.jws.JWS = function() {
          var e2 = V.jws.JWS.isSafeJSONString;
          this.parseJWS = function(t2, r2) {
            if (this.parsedJWS === void 0 || !r2 && this.parsedJWS.sigvalH === void 0) {
              var n2 = t2.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);
              if (n2 == null)
                throw "JWS signature is not a form of 'Head.Payload.SigValue'.";
              var i2 = n2[1], o = n2[2], s = n2[3], a = i2 + "." + o;
              if (this.parsedJWS = {}, this.parsedJWS.headB64U = i2, this.parsedJWS.payloadB64U = o, this.parsedJWS.sigvalB64U = s, this.parsedJWS.si = a, !r2) {
                var u2 = b64utohex(s), c = parseBigInt(u2, 16);
                this.parsedJWS.sigvalH = u2, this.parsedJWS.sigvalBI = c;
              }
              var h = W(i2), l = W(o);
              if (this.parsedJWS.headS = h, this.parsedJWS.payloadS = l, !e2(h, this.parsedJWS, "headP"))
                throw "malformed JSON string for JWS Head: " + h;
            }
          };
        }, V.jws.JWS.sign = function(e2, t2, r2, n2, o) {
          var s, a, u2, c = V, h = c.jws.JWS, l = h.readSafeJSONString, f = h.isSafeJSONString, g = c.crypto, p2 = (g.ECDSA, g.Mac), d = g.Signature, v2 = JSON;
          if (typeof t2 != "string" && (t2 === void 0 ? "undefined" : i(t2)) != "object")
            throw "spHeader must be JSON string or object: " + t2;
          if ((t2 === void 0 ? "undefined" : i(t2)) == "object" && (a = t2, s = v2.stringify(a)), typeof t2 == "string") {
            if (!f(s = t2))
              throw "JWS Head is not safe JSON string: " + s;
            a = l(s);
          }
          if (u2 = r2, (r2 === void 0 ? "undefined" : i(r2)) == "object" && (u2 = v2.stringify(r2)), e2 != "" && e2 != null || a.alg === void 0 || (e2 = a.alg), e2 != "" && e2 != null && a.alg === void 0 && (a.alg = e2, s = v2.stringify(a)), e2 !== a.alg)
            throw "alg and sHeader.alg doesn't match: " + e2 + "!=" + a.alg;
          var y2 = null;
          if (h.jwsalg2sigalg[e2] === void 0)
            throw "unsupported alg name: " + e2;
          y2 = h.jwsalg2sigalg[e2];
          var m = q(s) + "." + q(u2), _2 = "";
          if (y2.substr(0, 4) == "Hmac") {
            if (n2 === void 0)
              throw "mac key shall be specified for HS* alg";
            var S2 = new p2({alg: y2, prov: "cryptojs", pass: n2});
            S2.updateString(m), _2 = S2.doFinal();
          } else {
            var b;
            if (y2.indexOf("withECDSA") != -1)
              (b = new d({alg: y2})).init(n2, o), b.updateString(m), hASN1Sig = b.sign(), _2 = V.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig);
            else if (y2 != "none")
              (b = new d({alg: y2})).init(n2, o), b.updateString(m), _2 = b.sign();
          }
          return m + "." + hextob64u(_2);
        }, V.jws.JWS.verify = function(e2, t2, r2) {
          var n2, o = V, s = o.jws.JWS, a = s.readSafeJSONString, u2 = o.crypto, c = u2.ECDSA, h = u2.Mac, l = u2.Signature;
          i(RSAKey) !== void 0 && (n2 = RSAKey);
          var f = e2.split(".");
          if (f.length !== 3)
            return false;
          var g = f[0] + "." + f[1], p2 = b64utohex(f[2]), d = a(W(f[0])), v2 = null, y2 = null;
          if (d.alg === void 0)
            throw "algorithm not specified in header";
          if ((y2 = (v2 = d.alg).substr(0, 2), r2 != null && Object.prototype.toString.call(r2) === "[object Array]" && r2.length > 0) && (":" + r2.join(":") + ":").indexOf(":" + v2 + ":") == -1)
            throw "algorithm '" + v2 + "' not accepted in the list";
          if (v2 != "none" && t2 === null)
            throw "key shall be specified to verify.";
          if (typeof t2 == "string" && t2.indexOf("-----BEGIN ") != -1 && (t2 = z.getKey(t2)), !(y2 != "RS" && y2 != "PS" || t2 instanceof n2))
            throw "key shall be a RSAKey obj for RS* and PS* algs";
          if (y2 == "ES" && !(t2 instanceof c))
            throw "key shall be a ECDSA obj for ES* algs";
          var m = null;
          if (s.jwsalg2sigalg[d.alg] === void 0)
            throw "unsupported alg name: " + v2;
          if ((m = s.jwsalg2sigalg[v2]) == "none")
            throw "not supported";
          if (m.substr(0, 4) == "Hmac") {
            if (t2 === void 0)
              throw "hexadecimal key shall be specified for HMAC";
            var _2 = new h({alg: m, pass: t2});
            return _2.updateString(g), p2 == _2.doFinal();
          }
          if (m.indexOf("withECDSA") != -1) {
            var S2, b = null;
            try {
              b = c.concatSigToASN1Sig(p2);
            } catch (e3) {
              return false;
            }
            return (S2 = new l({alg: m})).init(t2), S2.updateString(g), S2.verify(b);
          }
          return (S2 = new l({alg: m})).init(t2), S2.updateString(g), S2.verify(p2);
        }, V.jws.JWS.parse = function(e2) {
          var t2, r2, n2, i2 = e2.split("."), o = {};
          if (i2.length != 2 && i2.length != 3)
            throw "malformed sJWS: wrong number of '.' splitted elements";
          return t2 = i2[0], r2 = i2[1], i2.length == 3 && (n2 = i2[2]), o.headerObj = V.jws.JWS.readSafeJSONString(W(t2)), o.payloadObj = V.jws.JWS.readSafeJSONString(W(r2)), o.headerPP = JSON.stringify(o.headerObj, null, "  "), o.payloadObj == null ? o.payloadPP = W(r2) : o.payloadPP = JSON.stringify(o.payloadObj, null, "  "), n2 !== void 0 && (o.sigHex = b64utohex(n2)), o;
        }, V.jws.JWS.verifyJWT = function(e2, t2, r2) {
          var n2 = V.jws, o = n2.JWS, s = o.readSafeJSONString, a = o.inArray, u2 = o.includedArray, c = e2.split("."), h = c[0], l = c[1], f = (b64utohex(c[2]), s(W(h))), g = s(W(l));
          if (f.alg === void 0)
            return false;
          if (r2.alg === void 0)
            throw "acceptField.alg shall be specified";
          if (!a(f.alg, r2.alg))
            return false;
          if (g.iss !== void 0 && i(r2.iss) === "object" && !a(g.iss, r2.iss))
            return false;
          if (g.sub !== void 0 && i(r2.sub) === "object" && !a(g.sub, r2.sub))
            return false;
          if (g.aud !== void 0 && i(r2.aud) === "object") {
            if (typeof g.aud == "string") {
              if (!a(g.aud, r2.aud))
                return false;
            } else if (i(g.aud) == "object" && !u2(g.aud, r2.aud))
              return false;
          }
          var p2 = n2.IntDate.getNow();
          return r2.verifyAt !== void 0 && typeof r2.verifyAt == "number" && (p2 = r2.verifyAt), r2.gracePeriod !== void 0 && typeof r2.gracePeriod == "number" || (r2.gracePeriod = 0), !(g.exp !== void 0 && typeof g.exp == "number" && g.exp + r2.gracePeriod < p2) && (!(g.nbf !== void 0 && typeof g.nbf == "number" && p2 < g.nbf - r2.gracePeriod) && (!(g.iat !== void 0 && typeof g.iat == "number" && p2 < g.iat - r2.gracePeriod) && ((g.jti === void 0 || r2.jti === void 0 || g.jti === r2.jti) && !!o.verify(e2, t2, r2.alg))));
        }, V.jws.JWS.includedArray = function(e2, t2) {
          var r2 = V.jws.JWS.inArray;
          if (e2 === null)
            return false;
          if ((e2 === void 0 ? "undefined" : i(e2)) !== "object")
            return false;
          if (typeof e2.length != "number")
            return false;
          for (var n2 = 0; n2 < e2.length; n2++)
            if (!r2(e2[n2], t2))
              return false;
          return true;
        }, V.jws.JWS.inArray = function(e2, t2) {
          if (t2 === null)
            return false;
          if ((t2 === void 0 ? "undefined" : i(t2)) !== "object")
            return false;
          if (typeof t2.length != "number")
            return false;
          for (var r2 = 0; r2 < t2.length; r2++)
            if (t2[r2] == e2)
              return true;
          return false;
        }, V.jws.JWS.jwsalg2sigalg = {HS256: "HmacSHA256", HS384: "HmacSHA384", HS512: "HmacSHA512", RS256: "SHA256withRSA", RS384: "SHA384withRSA", RS512: "SHA512withRSA", ES256: "SHA256withECDSA", ES384: "SHA384withECDSA", PS256: "SHA256withRSAandMGF1", PS384: "SHA384withRSAandMGF1", PS512: "SHA512withRSAandMGF1", none: "none"}, V.jws.JWS.isSafeJSONString = function(e2, t2, r2) {
          var n2 = null;
          try {
            return ((n2 = K(e2)) === void 0 ? "undefined" : i(n2)) != "object" ? 0 : n2.constructor === Array ? 0 : (t2 && (t2[r2] = n2), 1);
          } catch (e3) {
            return 0;
          }
        }, V.jws.JWS.readSafeJSONString = function(e2) {
          var t2 = null;
          try {
            return ((t2 = K(e2)) === void 0 ? "undefined" : i(t2)) != "object" ? null : t2.constructor === Array ? null : t2;
          } catch (e3) {
            return null;
          }
        }, V.jws.JWS.getEncodedSignatureValueFromJWS = function(e2) {
          var t2 = e2.match(/^[^.]+\.[^.]+\.([^.]+)$/);
          if (t2 == null)
            throw "JWS signature is not a form of 'Head.Payload.SigValue'.";
          return t2[1];
        }, V.jws.JWS.getJWKthumbprint = function(e2) {
          if (e2.kty !== "RSA" && e2.kty !== "EC" && e2.kty !== "oct")
            throw "unsupported algorithm for JWK Thumprint";
          var t2 = "{";
          if (e2.kty === "RSA") {
            if (typeof e2.n != "string" || typeof e2.e != "string")
              throw "wrong n and e value for RSA key";
            t2 += '"e":"' + e2.e + '",', t2 += '"kty":"' + e2.kty + '",', t2 += '"n":"' + e2.n + '"}';
          } else if (e2.kty === "EC") {
            if (typeof e2.crv != "string" || typeof e2.x != "string" || typeof e2.y != "string")
              throw "wrong crv, x and y value for EC key";
            t2 += '"crv":"' + e2.crv + '",', t2 += '"kty":"' + e2.kty + '",', t2 += '"x":"' + e2.x + '",', t2 += '"y":"' + e2.y + '"}';
          } else if (e2.kty === "oct") {
            if (typeof e2.k != "string")
              throw "wrong k value for oct(symmetric) key";
            t2 += '"kty":"' + e2.kty + '",', t2 += '"k":"' + e2.k + '"}';
          }
          var r2 = rstrtohex(t2);
          return hextob64u(V.crypto.Util.hashHex(r2, "sha256"));
        }, V.jws.IntDate = {}, V.jws.IntDate.get = function(e2) {
          var t2 = V.jws.IntDate, r2 = t2.getNow, n2 = t2.getZulu;
          if (e2 == "now")
            return r2();
          if (e2 == "now + 1hour")
            return r2() + 3600;
          if (e2 == "now + 1day")
            return r2() + 86400;
          if (e2 == "now + 1month")
            return r2() + 2592e3;
          if (e2 == "now + 1year")
            return r2() + 31536e3;
          if (e2.match(/Z$/))
            return n2(e2);
          if (e2.match(/^[0-9]+$/))
            return parseInt(e2);
          throw "unsupported format: " + e2;
        }, V.jws.IntDate.getZulu = function(e2) {
          return zulutosec(e2);
        }, V.jws.IntDate.getNow = function() {
          return ~~(new Date() / 1e3);
        }, V.jws.IntDate.intDate2UTCString = function(e2) {
          return new Date(1e3 * e2).toUTCString();
        }, V.jws.IntDate.intDate2Zulu = function(e2) {
          var t2 = new Date(1e3 * e2);
          return ("0000" + t2.getUTCFullYear()).slice(-4) + ("00" + (t2.getUTCMonth() + 1)).slice(-2) + ("00" + t2.getUTCDate()).slice(-2) + ("00" + t2.getUTCHours()).slice(-2) + ("00" + t2.getUTCMinutes()).slice(-2) + ("00" + t2.getUTCSeconds()).slice(-2) + "Z";
        }, t.SecureRandom = SecureRandom, t.rng_seed_time = rng_seed_time, t.BigInteger = BigInteger, t.RSAKey = RSAKey, t.ECDSA = V.crypto.ECDSA, t.DSA = V.crypto.DSA, t.Signature = V.crypto.Signature, t.MessageDigest = V.crypto.MessageDigest, t.Mac = V.crypto.Mac, t.Cipher = V.crypto.Cipher, t.KEYUTIL = z, t.ASN1HEX = J, t.X509 = X509, t.CryptoJS = y, t.b64tohex = b64tohex, t.b64toBA = b64toBA, t.stoBA = stoBA, t.BAtos = BAtos, t.BAtohex = BAtohex, t.stohex = stohex, t.stob64 = /* @__PURE__ */ __name(function stob64(e2) {
          return hex2b64(stohex(e2));
        }, "stob64"), t.stob64u = /* @__PURE__ */ __name(function stob64u(e2) {
          return b64tob64u(hex2b64(stohex(e2)));
        }, "stob64u"), t.b64utos = /* @__PURE__ */ __name(function b64utos(e2) {
          return BAtos(b64toBA(b64utob64(e2)));
        }, "b64utos"), t.b64tob64u = b64tob64u, t.b64utob64 = b64utob64, t.hex2b64 = hex2b64, t.hextob64u = hextob64u, t.b64utohex = b64utohex, t.utf8tob64u = q, t.b64utoutf8 = W, t.utf8tob64 = /* @__PURE__ */ __name(function utf8tob64(e2) {
          return hex2b64(uricmptohex(encodeURIComponentAll(e2)));
        }, "utf8tob64"), t.b64toutf8 = /* @__PURE__ */ __name(function b64toutf8(e2) {
          return decodeURIComponent(hextouricmp(b64tohex(e2)));
        }, "b64toutf8"), t.utf8tohex = utf8tohex, t.hextoutf8 = hextoutf8, t.hextorstr = hextorstr, t.rstrtohex = rstrtohex, t.hextob64 = hextob64, t.hextob64nl = hextob64nl, t.b64nltohex = b64nltohex, t.hextopem = hextopem, t.pemtohex = pemtohex, t.hextoArrayBuffer = /* @__PURE__ */ __name(function hextoArrayBuffer(e2) {
          if (e2.length % 2 != 0)
            throw "input is not even length";
          if (e2.match(/^[0-9A-Fa-f]+$/) == null)
            throw "input is not hexadecimal";
          for (var t2 = new ArrayBuffer(e2.length / 2), r2 = new DataView(t2), n2 = 0; n2 < e2.length / 2; n2++)
            r2.setUint8(n2, parseInt(e2.substr(2 * n2, 2), 16));
          return t2;
        }, "hextoArrayBuffer"), t.ArrayBuffertohex = /* @__PURE__ */ __name(function ArrayBuffertohex(e2) {
          for (var t2 = "", r2 = new DataView(e2), n2 = 0; n2 < e2.byteLength; n2++)
            t2 += ("00" + r2.getUint8(n2).toString(16)).slice(-2);
          return t2;
        }, "ArrayBuffertohex"), t.zulutomsec = zulutomsec, t.zulutosec = zulutosec, t.zulutodate = /* @__PURE__ */ __name(function zulutodate(e2) {
          return new Date(zulutomsec(e2));
        }, "zulutodate"), t.datetozulu = /* @__PURE__ */ __name(function datetozulu(e2, t2, r2) {
          var n2, i2 = e2.getUTCFullYear();
          if (t2) {
            if (i2 < 1950 || 2049 < i2)
              throw "not proper year for UTCTime: " + i2;
            n2 = ("" + i2).slice(-2);
          } else
            n2 = ("000" + i2).slice(-4);
          if (n2 += ("0" + (e2.getUTCMonth() + 1)).slice(-2), n2 += ("0" + e2.getUTCDate()).slice(-2), n2 += ("0" + e2.getUTCHours()).slice(-2), n2 += ("0" + e2.getUTCMinutes()).slice(-2), n2 += ("0" + e2.getUTCSeconds()).slice(-2), r2) {
            var o = e2.getUTCMilliseconds();
            o !== 0 && (n2 += "." + (o = (o = ("00" + o).slice(-3)).replace(/0+$/g, "")));
          }
          return n2 += "Z";
        }, "datetozulu"), t.uricmptohex = uricmptohex, t.hextouricmp = hextouricmp, t.ipv6tohex = ipv6tohex, t.hextoipv6 = hextoipv6, t.hextoip = hextoip, t.iptohex = /* @__PURE__ */ __name(function iptohex(e2) {
          var t2 = "malformed IP address";
          if (!(e2 = e2.toLowerCase(e2)).match(/^[0-9.]+$/)) {
            if (e2.match(/^[0-9a-f:]+$/) && e2.indexOf(":") !== -1)
              return ipv6tohex(e2);
            throw t2;
          }
          var r2 = e2.split(".");
          if (r2.length !== 4)
            throw t2;
          var n2 = "";
          try {
            for (var i2 = 0; i2 < 4; i2++)
              n2 += ("0" + parseInt(r2[i2]).toString(16)).slice(-2);
            return n2;
          } catch (e3) {
            throw t2;
          }
        }, "iptohex"), t.encodeURIComponentAll = encodeURIComponentAll, t.newline_toUnix = /* @__PURE__ */ __name(function newline_toUnix(e2) {
          return e2 = e2.replace(/\r\n/gm, "\n");
        }, "newline_toUnix"), t.newline_toDos = /* @__PURE__ */ __name(function newline_toDos(e2) {
          return e2 = (e2 = e2.replace(/\r\n/gm, "\n")).replace(/\n/gm, "\r\n");
        }, "newline_toDos"), t.hextoposhex = hextoposhex, t.intarystrtohex = /* @__PURE__ */ __name(function intarystrtohex(e2) {
          e2 = (e2 = (e2 = e2.replace(/^\s*\[\s*/, "")).replace(/\s*\]\s*$/, "")).replace(/\s*/g, "");
          try {
            return e2.split(/,/).map(function(e3, t2, r2) {
              var n2 = parseInt(e3);
              if (n2 < 0 || 255 < n2)
                throw "integer not in range 0-255";
              return ("00" + n2.toString(16)).slice(-2);
            }).join("");
          } catch (e3) {
            throw "malformed integer array string: " + e3;
          }
        }, "intarystrtohex"), t.strdiffidx = /* @__PURE__ */ __name(function strdiffidx(e2, t2) {
          var r2 = e2.length;
          e2.length > t2.length && (r2 = t2.length);
          for (var n2 = 0; n2 < r2; n2++)
            if (e2.charCodeAt(n2) != t2.charCodeAt(n2))
              return n2;
          return e2.length != t2.length ? r2 : -1;
        }, "strdiffidx"), t.KJUR = V, t.crypto = V.crypto, t.asn1 = V.asn1, t.jws = V.jws, t.lang = V.lang;
      }).call(this, r(43).Buffer);
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.UserInfoService = void 0;
      var n = r(6), i = r(2), o = r(0);
      t.UserInfoService = function() {
        function UserInfoService(e2) {
          var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : n.JsonService, r2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : i.MetadataService;
          if ((/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, UserInfoService), !e2)
            throw o.Log.error("UserInfoService.ctor: No settings passed"), new Error("settings");
          this._settings = e2, this._jsonService = new t2(), this._metadataService = new r2(this._settings);
        }
        __name(UserInfoService, "UserInfoService");
        return UserInfoService.prototype.getClaims = /* @__PURE__ */ __name(function getClaims(e2) {
          var t2 = this;
          return e2 ? this._metadataService.getUserInfoEndpoint().then(function(r2) {
            return o.Log.debug("UserInfoService.getClaims: received userinfo url", r2), t2._jsonService.getJson(r2, e2).then(function(e3) {
              return o.Log.debug("UserInfoService.getClaims: claims received", e3), e3;
            });
          }) : (o.Log.error("UserInfoService.getClaims: No token passed"), Promise.reject(new Error("A token is required")));
        }, "getClaims"), UserInfoService;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true}), t.ResponseValidator = void 0;
      var n = r(0), i = r(2), o = r(45), s = r(19), a = r(18), u = r(5);
      var c = ["nonce", "at_hash", "iat", "nbf", "exp", "aud", "iss", "c_hash"];
      t.ResponseValidator = function() {
        function ResponseValidator(e2) {
          var t2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : i.MetadataService, r2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : o.UserInfoService, a2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : u.JoseUtil, c2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : s.TokenClient;
          if ((/* @__PURE__ */ __name(function _classCallCheck(e3, t3) {
            if (!(e3 instanceof t3))
              throw new TypeError("Cannot call a class as a function");
          }, "_classCallCheck"))(this, ResponseValidator), !e2)
            throw n.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"), new Error("settings");
          this._settings = e2, this._metadataService = new t2(this._settings), this._userInfoService = new r2(this._settings), this._joseUtil = a2, this._tokenClient = new c2(this._settings);
        }
        __name(ResponseValidator, "ResponseValidator");
        return ResponseValidator.prototype.validateSigninResponse = /* @__PURE__ */ __name(function validateSigninResponse(e2, t2) {
          var r2 = this;
          return n.Log.debug("ResponseValidator.validateSigninResponse"), this._processSigninParams(e2, t2).then(function(t3) {
            return n.Log.debug("ResponseValidator.validateSigninResponse: state processed"), r2._validateTokens(e2, t3).then(function(e3) {
              return n.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"), r2._processClaims(e3).then(function(e4) {
                return n.Log.debug("ResponseValidator.validateSigninResponse: claims processed"), e4;
              });
            });
          });
        }, "validateSigninResponse"), ResponseValidator.prototype.validateSignoutResponse = /* @__PURE__ */ __name(function validateSignoutResponse(e2, t2) {
          return e2.id !== t2.state ? (n.Log.error("ResponseValidator.validateSignoutResponse: State does not match"), Promise.reject(new Error("State does not match"))) : (n.Log.debug("ResponseValidator.validateSignoutResponse: state validated"), t2.state = e2.data, t2.error ? (n.Log.warn("ResponseValidator.validateSignoutResponse: Response was error", t2.error), Promise.reject(new a.ErrorResponse(t2))) : Promise.resolve(t2));
        }, "validateSignoutResponse"), ResponseValidator.prototype._processSigninParams = /* @__PURE__ */ __name(function _processSigninParams(e2, t2) {
          if (e2.id !== t2.state)
            return n.Log.error("ResponseValidator._processSigninParams: State does not match"), Promise.reject(new Error("State does not match"));
          if (!e2.client_id)
            return n.Log.error("ResponseValidator._processSigninParams: No client_id on state"), Promise.reject(new Error("No client_id on state"));
          if (!e2.authority)
            return n.Log.error("ResponseValidator._processSigninParams: No authority on state"), Promise.reject(new Error("No authority on state"));
          if (this._settings.authority) {
            if (this._settings.authority && this._settings.authority !== e2.authority)
              return n.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"), Promise.reject(new Error("authority mismatch on settings vs. signin state"));
          } else
            this._settings.authority = e2.authority;
          if (this._settings.client_id) {
            if (this._settings.client_id && this._settings.client_id !== e2.client_id)
              return n.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"), Promise.reject(new Error("client_id mismatch on settings vs. signin state"));
          } else
            this._settings.client_id = e2.client_id;
          return n.Log.debug("ResponseValidator._processSigninParams: state validated"), t2.state = e2.data, t2.error ? (n.Log.warn("ResponseValidator._processSigninParams: Response was error", t2.error), Promise.reject(new a.ErrorResponse(t2))) : e2.nonce && !t2.id_token ? (n.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"), Promise.reject(new Error("No id_token in response"))) : !e2.nonce && t2.id_token ? (n.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"), Promise.reject(new Error("Unexpected id_token in response"))) : e2.code_verifier && !t2.code ? (n.Log.error("ResponseValidator._processSigninParams: Expecting code in response"), Promise.reject(new Error("No code in response"))) : !e2.code_verifier && t2.code ? (n.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"), Promise.reject(new Error("Unexpected code in response"))) : Promise.resolve(t2);
        }, "_processSigninParams"), ResponseValidator.prototype._processClaims = /* @__PURE__ */ __name(function _processClaims(e2) {
          var t2 = this;
          if (e2.isOpenIdConnect) {
            if (n.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"), e2.profile = this._filterProtocolClaims(e2.profile), this._settings.loadUserInfo && e2.access_token)
              return n.Log.debug("ResponseValidator._processClaims: loading user info"), this._userInfoService.getClaims(e2.access_token).then(function(r2) {
                return n.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"), r2.sub !== e2.profile.sub ? (n.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in access_token"), Promise.reject(new Error("sub from user info endpoint does not match sub in access_token"))) : (e2.profile = t2._mergeClaims(e2.profile, r2), n.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:", e2.profile), e2);
              });
            n.Log.debug("ResponseValidator._processClaims: not loading user info");
          } else
            n.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");
          return Promise.resolve(e2);
        }, "_processClaims"), ResponseValidator.prototype._mergeClaims = /* @__PURE__ */ __name(function _mergeClaims(e2, t2) {
          var r2 = Object.assign({}, e2);
          for (var n2 in t2) {
            var i2 = t2[n2];
            Array.isArray(i2) || (i2 = [i2]);
            for (var o2 = 0; o2 < i2.length; o2++) {
              var s2 = i2[o2];
              r2[n2] ? Array.isArray(r2[n2]) ? r2[n2].indexOf(s2) < 0 && r2[n2].push(s2) : r2[n2] !== s2 && (r2[n2] = [r2[n2], s2]) : r2[n2] = s2;
            }
          }
          return r2;
        }, "_mergeClaims"), ResponseValidator.prototype._filterProtocolClaims = /* @__PURE__ */ __name(function _filterProtocolClaims(e2) {
          n.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:", e2);
          var t2 = Object.assign({}, e2);
          return this._settings._filterProtocolClaims ? (c.forEach(function(e3) {
            delete t2[e3];
          }), n.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered", t2)) : n.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"), t2;
        }, "_filterProtocolClaims"), ResponseValidator.prototype._validateTokens = /* @__PURE__ */ __name(function _validateTokens(e2, t2) {
          return t2.code ? (n.Log.debug("ResponseValidator._validateTokens: Validating code"), this._processCode(e2, t2)) : t2.id_token ? t2.access_token ? (n.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"), this._validateIdTokenAndAccessToken(e2, t2)) : (n.Log.debug("ResponseValidator._validateTokens: Validating id_token"), this._validateIdToken(e2, t2)) : (n.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"), Promise.resolve(t2));
        }, "_validateTokens"), ResponseValidator.prototype._processCode = /* @__PURE__ */ __name(function _processCode(e2, t2) {
          var r2 = this, i2 = {client_id: e2.client_id, client_secret: this._settings.client_secret, code: t2.code, redirect_uri: e2.redirect_uri, code_verifier: e2.code_verifier};
          return this._tokenClient.exchangeCode(i2).then(function(i3) {
            for (var o2 in i3)
              t2[o2] = i3[o2];
            return t2.id_token ? (n.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"), r2._validateIdTokenAttributes(e2, t2)) : (n.Log.debug("ResponseValidator._processCode: token response successful, returning response"), t2);
          });
        }, "_processCode"), ResponseValidator.prototype._validateIdTokenAttributes = /* @__PURE__ */ __name(function _validateIdTokenAttributes(e2, t2) {
          var r2 = this;
          return this._metadataService.getIssuer().then(function(i2) {
            var o2 = e2.client_id, s2 = r2._settings.clockSkew;
            return n.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ", s2), r2._joseUtil.validateJwtAttributes(t2.id_token, i2, o2, s2).then(function(r3) {
              return e2.nonce && e2.nonce !== r3.nonce ? (n.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"), Promise.reject(new Error("Invalid nonce in id_token"))) : r3.sub ? (t2.profile = r3, t2) : (n.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"), Promise.reject(new Error("No sub present in id_token")));
            });
          });
        }, "_validateIdTokenAttributes"), ResponseValidator.prototype._validateIdTokenAndAccessToken = /* @__PURE__ */ __name(function _validateIdTokenAndAccessToken(e2, t2) {
          var r2 = this;
          return this._validateIdToken(e2, t2).then(function(e3) {
            return r2._validateAccessToken(e3);
          });
        }, "_validateIdTokenAndAccessToken"), ResponseValidator.prototype._validateIdToken = /* @__PURE__ */ __name(function _validateIdToken(e2, t2) {
          var r2 = this;
          if (!e2.nonce)
            return n.Log.error("ResponseValidator._validateIdToken: No nonce on state"), Promise.reject(new Error("No nonce on state"));
          var i2 = this._joseUtil.parseJwt(t2.id_token);
          if (!i2 || !i2.header || !i2.payload)
            return n.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token", i2), Promise.reject(new Error("Failed to parse id_token"));
          if (e2.nonce !== i2.payload.nonce)
            return n.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"), Promise.reject(new Error("Invalid nonce in id_token"));
          var o2 = i2.header.kid;
          return this._metadataService.getIssuer().then(function(s2) {
            return n.Log.debug("ResponseValidator._validateIdToken: Received issuer"), r2._metadataService.getSigningKeys().then(function(a2) {
              if (!a2)
                return n.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"), Promise.reject(new Error("No signing keys from metadata"));
              n.Log.debug("ResponseValidator._validateIdToken: Received signing keys");
              var u2 = void 0;
              if (o2)
                u2 = a2.filter(function(e3) {
                  return e3.kid === o2;
                })[0];
              else {
                if ((a2 = r2._filterByAlg(a2, i2.header.alg)).length > 1)
                  return n.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"), Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));
                u2 = a2[0];
              }
              if (!u2)
                return n.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"), Promise.reject(new Error("No key matching kid or alg found in signing keys"));
              var c2 = e2.client_id, h = r2._settings.clockSkew;
              return n.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ", h), r2._joseUtil.validateJwt(t2.id_token, u2, s2, c2, h).then(function() {
                return n.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"), i2.payload.sub ? (t2.profile = i2.payload, t2) : (n.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"), Promise.reject(new Error("No sub present in id_token")));
              });
            });
          });
        }, "_validateIdToken"), ResponseValidator.prototype._filterByAlg = /* @__PURE__ */ __name(function _filterByAlg(e2, t2) {
          var r2 = null;
          if (t2.startsWith("RS"))
            r2 = "RSA";
          else if (t2.startsWith("PS"))
            r2 = "PS";
          else {
            if (!t2.startsWith("ES"))
              return n.Log.debug("ResponseValidator._filterByAlg: alg not supported: ", t2), [];
            r2 = "EC";
          }
          return n.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ", r2), e2 = e2.filter(function(e3) {
            return e3.kty === r2;
          }), n.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ", r2, e2.length), e2;
        }, "_filterByAlg"), ResponseValidator.prototype._validateAccessToken = /* @__PURE__ */ __name(function _validateAccessToken(e2) {
          if (!e2.profile)
            return n.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"), Promise.reject(new Error("No profile loaded from id_token"));
          if (!e2.profile.at_hash)
            return n.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"), Promise.reject(new Error("No at_hash in id_token"));
          if (!e2.id_token)
            return n.Log.error("ResponseValidator._validateAccessToken: No id_token"), Promise.reject(new Error("No id_token"));
          var t2 = this._joseUtil.parseJwt(e2.id_token);
          if (!t2 || !t2.header)
            return n.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token", t2), Promise.reject(new Error("Failed to parse id_token"));
          var r2 = t2.header.alg;
          if (!r2 || r2.length !== 5)
            return n.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:", r2), Promise.reject(new Error("Unsupported alg: " + r2));
          var i2 = r2.substr(2, 3);
          if (!i2)
            return n.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:", r2, i2), Promise.reject(new Error("Unsupported alg: " + r2));
          if ((i2 = parseInt(i2)) !== 256 && i2 !== 384 && i2 !== 512)
            return n.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:", r2, i2), Promise.reject(new Error("Unsupported alg: " + r2));
          var o2 = "sha" + i2, s2 = this._joseUtil.hashString(e2.access_token, o2);
          if (!s2)
            return n.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:", o2), Promise.reject(new Error("Failed to validate at_hash"));
          var a2 = s2.substr(0, s2.length / 2), u2 = this._joseUtil.hexToBase64Url(a2);
          return u2 !== e2.profile.at_hash ? (n.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash", u2, e2.profile.at_hash), Promise.reject(new Error("Failed to validate at_hash"))) : (n.Log.debug("ResponseValidator._validateAccessToken: success"), Promise.resolve(e2));
        }, "_validateAccessToken"), ResponseValidator;
      }();
    }, function(e, t, r) {
      "use strict";
      Object.defineProperty(t, "__esModule", {value: true});
      var n = r(0), i = r(20), o = r(8), s = r(7), a = r(34), u = r(33), c = r(14), h = r(2), l = r(22), f = r(21), g = r(11), p = r(10), d = r(12), v = r(1), y = r(15);
      t.default = {Log: n.Log, OidcClient: i.OidcClient, OidcClientSettings: o.OidcClientSettings, WebStorageStateStore: s.WebStorageStateStore, InMemoryWebStorage: a.InMemoryWebStorage, UserManager: u.UserManager, AccessTokenEvents: c.AccessTokenEvents, MetadataService: h.MetadataService, CordovaPopupNavigator: l.CordovaPopupNavigator, CordovaIFrameNavigator: f.CordovaIFrameNavigator, CheckSessionIFrame: g.CheckSessionIFrame, TokenRevocationClient: p.TokenRevocationClient, SessionMonitor: d.SessionMonitor, Global: v.Global, User: y.User}, e.exports = t.default;
    }]);
  });
});

// dep:oidc-client
var oidc_client_default = require_oidc_client_min();
export {
  oidc_client_default as default
};
//# sourceMappingURL=oidc-client.js.map
